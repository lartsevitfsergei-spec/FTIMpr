<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Å–æ—á–Ω–∏—Ü–∞ –°—Ç–∞—Ä—Ç–∞–ø-—Å—Ç—É–¥–∏–∏</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* ====================== –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –°–¢–ò–õ–ò ====================== */
        :root {
          --bg: #f8fafc;
          --panel: #ffffff;
          --text: #0f172a;
          --muted: #64748b;
          --border: #e2e8f0;
          --accent: #3b82f6;
          --accent-light: #60a5fa;
          --accent-dark: #2563eb;
          --green: #10b981;
          --red: #ef4444;
          --yellow: #f59e0b;
          --purple: #8b5cf6;
          --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * { box-sizing: border-box; }
        html, body { height: 100%; }
        body {
          margin: 0;
          background: var(--bg);
          color: var(--text);
          font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        }

        .app-shell { display: flex; flex-direction: column; min-height: 100vh; }
        
        /* –ù–û–í–´–ô –°–¢–ò–õ–¨ –•–ï–î–ï–†–ê */
        .header {
          display: flex; align-items: center; gap: 12px; padding: 16px 20px;
          border-bottom: 1px solid var(--border);
          background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
          box-shadow: var(--shadow);
        }
        .header .title { 
          font-weight: 700; 
          letter-spacing: .2px; 
          font-size: 1.25rem;
          color: var(--accent-dark);
        }
        .header .spacer { flex: 1; }

        /* –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –í–ö–õ–ê–î–û–ö */
        .tabs-container {
          background: var(--panel);
          border-bottom: 1px solid var(--border);
          padding: 0 20px;
        }
        .tabs {
          display: flex;
          gap: 0;
          margin: 0;
          padding: 0;
          list-style: none;
        }
        .tab {
          padding: 12px 24px;
          background: transparent;
          border: none;
          border-bottom: 3px solid transparent;
          color: var(--muted);
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
          position: relative;
        }
        .tab:hover {
          color: var(--accent);
          background: #f1f5f9;
        }
        .tab.active {
          color: var(--accent);
          border-bottom-color: var(--accent);
          background: rgba(59, 130, 246, 0.05);
        }
        .tab-badge {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          background: var(--accent);
          color: white;
          border-radius: 12px;
          padding: 2px 8px;
          font-size: 0.75rem;
          margin-left: 8px;
          min-width: 20px;
          height: 20px;
        }

        /* –û–ë–ù–û–í–õ–ï–ù–ù–´–ô TOOLBAR */
        .toolbar { 
          display: grid; 
          gap: 16px; 
          padding: 16px 20px; 
          border-bottom: 1px solid var(--border); 
          background: var(--panel);
          align-items: start;
        }
        @media (min-width: 900px) {
          .toolbar { grid-template-columns: 1fr auto; align-items: center; }
        }
        React.createElement("div", { 
            className: "status-panel",
            style: { 
                background: error ? "#fef2f2" : "#f0fdf4",
                borderColor: error ? "#fecaca" : "#bbf7d0"
            }
        },
            React.createElement("div", { className: "status-item" },
                React.createElement("span", { className: "small" }, "üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:"),
                React.createElement("span", { 
                    className: "status-count",
                    style: { background: error ? "#ef4444" : "#10b981" }
                }, error ? "–û—à–∏–±–∫–∞" : "–ê–∫—Ç–∏–≤–Ω–∞")
            ),
            React.createElement("div", { className: "status-item" },
                React.createElement("span", { className: "small" }, "–û–±–Ω–æ–≤–ª–µ–Ω–æ:"),
                React.createElement("span", { className: "status-count" }, 
                    lastUpdate.toLocaleTimeString())
            ),
            React.createElement("div", { className: "spacer" }),
            error && React.createElement("div", { className: "status-item" },
                React.createElement("span", { 
                    className: "small", 
                    style: { color: "#ef4444" } 
                }, "–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å –æ–±–ª–∞–∫–æ–º")
            ),
            React.createElement("button", {
                className: "btn ghost",
                onClick: onDataRefresh,
                style: { fontSize: "12px" }
            }, "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ")
        ),
        .filters { display: flex; flex-wrap: wrap; gap: 12px; align-items: start; }
        .actions { display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-end; }
        /* –£–ª—É—á—à–∞–µ–º —Å—Ç–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
        .filters { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 12px; 
            align-items: start;
            margin-bottom: 8px;
        }
        
        /* –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ - —Ñ–∏–ª—å—Ç—Ä—ã –≤ –æ–¥–Ω—É –ª–∏–Ω–∏—é */
        @media (min-width: 768px) {
            .filters {
                flex-wrap: nowrap;
                align-items: center;
                margin-bottom: 0;
            }
        }
        
        /* –ö–∞–∂–¥—ã–π —Ñ–∏–ª—å—Ç—Ä - –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .filter-item {
            min-width: 140px;
            max-width: 200px;
            flex: 1;
        }
        
        /* –ü–æ–∏—Å–∫ —à–∏—Ä–µ –¥—Ä—É–≥–∏—Ö */
        .filter-item.search {
            min-width: 200px;
            flex: 2;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è dropdown —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
        .filter-dropdown {
            position: relative;
            min-width: 140px;
        }
        
        .filter-dropdown .btn {
            width: 100%;
            justify-content: space-between;
            padding: 10px 12px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            text-align: left;
        }
        
        .filter-dropdown .btn:hover {
            background: #f8fafc;
            border-color: var(--accent-light);
        }
        
        .filter-dropdown .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 4px;
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px;
            z-index: 50;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: var(--shadow);
        }
        
        .filter-dropdown .dropdown-item {
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 14px;
        }
        
        .filter-dropdown .dropdown-item:hover {
            background: #f1f5f9;
        }
        
        /* –°–∫—Ä—ã–≤–∞–µ–º –ª–µ–π–±–ª—ã –≤ —Ç—É–ª–±–∞—Ä–µ */
        .toolbar .filter-dropdown .label {
            display: none;
        }

        /* –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –§–û–†–ú */
        .input, .select, .btn, .textarea {
          border: 1px solid var(--border);
          background: #ffffff;
          color: var(--text);
          border-radius: 8px;
          padding: 10px 12px;
          font-size: 14px;
          transition: all 0.2s ease;
        }
        .input:focus, .select:focus, .textarea:focus, .btn:focus {
          outline: 2px solid rgba(59, 130, 246, 0.2);
          outline-offset: 1px;
          border-color: var(--accent);
        }
        .input::placeholder { color: #94a3b8; }
        
        .select { 
          appearance: none; 
          padding-right: 40px;
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
          background-position: calc(100% - 12px) center;
          background-size: 16px;
          background-repeat: no-repeat;
        }

        .btn { 
          cursor: pointer; 
          transition: all 0.2s ease; 
          font-weight: 500;
          display: inline-flex;
          align-items: center;
          gap: 6px;
        }
        .btn:hover { 
          background: #f8fafc; 
          border-color: #cbd5e1;
          transform: translateY(-1px);
          box-shadow: var(--shadow);
        }
        .btn:active { transform: translateY(0); }
        .btn.primary { 
          border-color: var(--accent); 
          background: var(--accent); 
          color: #ffffff; 
        }
        .btn.primary:hover {
          background: var(--accent-dark);
          border-color: var(--accent-dark);
        }
        .btn.ghost { background: transparent; border-color: transparent; }
        .btn.toggle.active { 
          outline: 2px solid rgba(59, 130, 246, 0.35);
          background: rgba(59, 130, 246, 0.1);
        }

        .chips { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
        .badge, .chip {
          display: inline-flex; 
          align-items: center; 
          gap: 6px; 
          padding: 6px 12px;
          border: 1px solid var(--border); 
          border-radius: 20px; 
          font-size: 12px; 
          color: var(--text); 
          background: #f8fafc;
          font-weight: 500;
        }
        .badge.ok { color: var(--green); border-color: #a7f3d0; background: #ecfdf5; }
        .badge.err { color: var(--red); border-color: #fecaca; background: #fef2f2; }
        .badge.muted { color: var(--muted); background: #f1f5f9; }
        .badge.warn { color: var(--yellow); border-color: #fde68a; background: #fffbeb; }
        .badge.accent { color: var(--accent); border-color: var(--accent-light); background: rgba(59, 130, 246, 0.1); }

        .grid { display: grid; gap: 16px; padding: 16px 20px; }
        .grid.cards { grid-template-columns: 1fr; }
        @media (min-width: 900px) { .grid.cards { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1200px) { .grid.cards { grid-template-columns: repeat(3, 1fr); } }

        /* –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ö–ê–†–¢–û–ß–ö–ò */
        .card {
          background: var(--panel);
          border: 1px solid var(--border);
          border-radius: 12px;
          overflow: hidden;
          transition: all 0.2s ease;
          box-shadow: var(--shadow);
        }
        .card:hover { 
          box-shadow: var(--shadow-lg); 
          border-color: var(--accent-light);
          transform: translateY(-2px);
        }
        .card .card-head { 
          padding: 16px; 
          border-bottom: 1px solid var(--border); 
          display: flex; 
          gap: 12px; 
          justify-content: space-between;
          background: #fafbfc;
        }
        .card .card-body { padding: 16px; display: grid; gap: 12px; }
        .card .card-foot { 
          padding: 12px 16px; 
          border-top: 1px solid var(--border); 
          display: flex; 
          justify-content: space-between; 
          align-items: center;
          background: #fafbfc;
        }

        .table { width: 100%; border-collapse: collapse; background: var(--panel); }
        .table th, .table td { padding: 12px 16px; border-bottom: 1px solid var(--border); text-align: left; font-size: 14px; vertical-align: top; }
        .table th { color: var(--muted); font-weight: 600; background: #f8fafc; }
        .table-row:hover { background: #f3f4f6; }

        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.4); z-index: 60; }
        .modal {
          position: fixed; right: 0; top: 0; height: 100vh; width: 100%; max-width: 480px; z-index: 61;
          background: var(--panel); border-left: 1px solid var(--border); display: flex; flex-direction: column;
          box-shadow: -4px 0 20px rgba(0,0,0,0.1);
        }
        .modal .modal-head { padding: 16px; border-bottom: 1px solid var(--border); display: flex; align-items: start; justify-content: space-between; gap: 8px; }
        .modal .modal-body { flex: 1; overflow: auto; padding: 16px; display: grid; gap: 16px; }
        .modal .modal-foot { padding: 16px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; gap: 8px; }

        .row { display: grid; gap: 16px; }
        @media (min-width: 720px) { .row.cols-2 { grid-template-columns: 1fr 1fr; } }
        .label { font-size: 14px; color: var(--muted); margin-bottom: 8px; display: inline-block; font-weight: 500; }
        .textarea { min-height: 100px; resize: vertical; }
        .small { font-size: 12px; color: var(--muted); }
        .status { display: inline-flex; gap: 8px; align-items: center; }
        .icon { opacity: .8; }
        .list { margin: 0; padding-left: 18px; }
        hr.sep { border: 0; border-top: 1px dashed var(--border); margin: 8px 0; opacity: .8; }

        .sa-list { list-style: none; padding-left: 0; margin: 0; display: grid; gap: 12px; }
        .sa-item { 
          display: grid; 
          grid-template-columns: auto 1fr; 
          gap: 12px; 
          align-items: start; 
          border-radius: 8px; 
          padding: 12px; 
          transition: all 0.2s ease; 
          border: 1px solid transparent;
          background: #fafbfc;
        }
        .sa-item.missing { border: 1px dashed var(--yellow); background: rgba(245,158,11,0.06); }
        .sa-meta { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
        .note-input { width: 100%; }
        .softq { display: grid; gap: 8px; }
        .softq-item { display: grid; gap: 4px; border: 1px solid var(--border); border-radius: 8px; padding: 8px; }
        .softq-item.low { border-color: #fde68a; background: #fffbeb; }
        
        /* –°–¢–ò–õ–ò –î–õ–Ø –°–ò–°–¢–ï–ú–´ –°–ê–ú–û–û–¶–ï–ù–ö–ò */
        .assessment-steps { display: flex; gap: 8px; margin-bottom: 20px; }
        .assessment-step { 
            flex: 1; 
            text-align: center; 
            padding: 12px; 
            border-radius: 8px; 
            background: #f1f5f9; 
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        .assessment-step.active { 
            background: var(--accent); 
            color: white; 
            border-color: var(--accent);
        }
        .assessment-step.completed { 
            background: #dcfce7; 
            color: var(--green); 
            border-color: #bbf7d0;
        }
        .assessment-step.disabled { 
            opacity: 0.5; 
            cursor: not-allowed;
        }
        .assessment-block { 
            border: 1px solid var(--border); 
            border-radius: 8px; 
            padding: 20px; 
            margin-bottom: 16px;
            background: #fafafa;
        }
        .assessment-block.completed { 
            border-color: var(--green); 
            background: #f0fdf4;
        }
        .assessment-progress { 
            height: 8px; 
            background: #e2e8f0; 
            border-radius: 4px; 
            margin-bottom: 20px; 
            overflow: hidden;
        }
        .assessment-progress-bar { 
            height: 100%; 
            background: var(--accent); 
            transition: width 0.3s ease;
        }
        .business-model-options { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
        .business-model-option { 
            border: 1px solid var(--border); 
            border-radius: 8px; 
            padding: 16px; 
            text-align: center; 
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
        }
        .business-model-option.selected { 
            border-color: var(--accent); 
            background: rgba(59, 130, 246, 0.05);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        .field-group { margin-bottom: 20px; }
        .field-group .label { display: flex; align-items: center; gap: 6px; }
        .required::after { content: "‚Ä¢"; color: var(--red); margin-left: 4px; }

        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –°–¢–ê–¢–£–°-–ü–ê–ù–ï–õ–ò */
        .status-panel {
            display: flex;
            gap: 16px;
            padding: 12px 20px;
            background: #f1f5f9;
            border-bottom: 1px solid var(--border);
            align-items: center;
        }
        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        .status-count {
            background: var(--accent);
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 600;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è –±–ª–æ–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–µ–π—Å–∞ */
        .case-alignment-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        .case-alignment-badge.original {
            background: #fffbeb;
            border: 1px solid #fde68a;
            color: #f59e0b;
        }
        .case-alignment-badge.aligned {
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
            color: #10b981;
        }
        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –¶–ï–ù–¢–†–ê–õ–¨–ù–´–• –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù */
        .center-modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,.6);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            
        }
        .center-modal {
            background: var(--panel);
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);  
            animation: modalAppear 0.2s ease-out;
            
        }
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
                }
            
        }
        .center-modal .modal-head {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;  
            flex-shrink: 0;
            
        }
        .center-modal .modal-body {
            flex: 1;
            overflow: auto;
            padding: 20px;
            max-height: 60vh;
            
        }
        .center-modal .modal-foot {
            padding: 16px 20px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            gap: 12px;
            flex-shrink: 0;
            
        }
        .center-modal .modal-head h2 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text);
            
        }
        .center-modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 4px;
            color: var(--muted);
            border-radius: 4px;
            
        }
        .center-modal-close:hover {
            background: var(--border);
            color: var(--text);
            
        }
        .instruction-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,.8);
        z-index: 200;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: fadeIn 0.3s ease-out;
        }
    
        .instruction-modal {
            background: var(--panel);
            border-radius: 16px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
            animation: modalAppear 0.3s ease-out;
        }
    
        .instruction-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            color: white;
            border-radius: 16px 16px 0 0;
        }
    
        .instruction-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
        }
    
        .instruction-body {
            flex: 1;
            overflow: auto;
            padding: 24px;
            line-height: 1.6;
        }
    
        .instruction-footer {
            padding: 20px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }
    
        .instruction-section {
            margin-bottom: 24px;
        }
    
        .instruction-section h3 {
            color: var(--accent-dark);
            margin: 0 0 12px 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
    
        .instruction-section p {
            margin: 0 0 12px 0;
            color: var(--text);
        }
    
        .instruction-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
    
        .instruction-feature {
            background: #f8fafc;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
        }
    
        .instruction-feature h4 {
            margin: 0 0 8px 0;
            color: var(--accent);
            font-size: 1rem;
        }
    
        .instruction-feature p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--muted);
        }
    
        .metric-explanation {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
        }
    
        .metric-explanation h4 {
            margin: 0 0 8px 0;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
        }
    
        .metric-score {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
        }
    
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
                /* ====================== –°–¢–ò–õ–ò –ü–û–ú–û–©–ù–ò–ö–û–í ====================== */
        .helper-btn {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          border: 1px solid var(--accent);
          background: var(--accent);
          color: white;
          border-radius: 50%;
          font-size: 14px;
          font-weight: bold;
          margin-left: 8px;
          cursor: pointer;
          transition: all 0.2s ease;
        }
        
        .helper-btn:hover {
          background: var(--accent-dark);
          border-color: var(--accent-dark);
          transform: scale(1.1);
        }
        
        .helper-content {
          line-height: 1.6;
        }
        
        .helper-section {
          margin-bottom: 24px;
        }
        
        .helper-section.intro .helper-text {
          font-size: 15px;
          color: var(--text);
          margin: 0;
        }
        
        .helper-section.example {
          background: #f8fafc;
          border-left: 4px solid var(--accent);
          padding: 16px 20px;
          border-radius: 0 8px 8px 0;
        }
        
        .helper-section.example h4 {
          color: var(--accent-dark);
          margin: 0 0 8px 0;
          font-size: 1rem;
        }
        
        .helper-section.insight {
          background: #fffbeb;
          border-left: 4px solid var(--yellow);
          padding: 12px 16px;
          border-radius: 0 8px 8px 0;
        }
        
        .helper-section.insight h4 {
          color: var(--yellow);
          margin: 0 0 6px 0;
          font-size: 0.95rem;
        }
        
        .helper-section.checklist {
          background: #f0fdf4;
          border-left: 4px solid var(--green);
          padding: 16px 20px;
          border-radius: 0 8px 8px 0;
        }
        
        .helper-section.checklist h4 {
          color: var(--green);
          margin: 0 0 12px 0;
          font-size: 1rem;
        }
        
        .helper-list {
          margin: 0;
          padding-left: 20px;
        }
        
        .helper-list li {
          margin-bottom: 8px;
          color: var(--text);
        }
        
        .helper-text {
          margin: 0;
          color: var(--text);
        }
        /* ====================== –£–õ–£–ß–®–ï–ù–ù–´–ô FIT-CHECK –°–¢–ò–õ–ò ====================== */
        .enhanced-fit-check {
          display: flex;
          flex-direction: column;
          gap: 24px;
          max-height: 70vh;
          overflow-y: auto;
          padding: 4px;
        }
        
        .fit-header {
          text-align: center;
          padding-bottom: 16px;
          border-bottom: 1px solid var(--border);
        }
        
        .project-summary-expanded {
          display: flex;
          flex-direction: column;
          gap: 20px;
          margin-top: 16px;
        }
        
        .summary-section {
          background: white;
          border: 1px solid var(--border);
          border-radius: 8px;
          padding: 16px;
        }
        
        .summary-section h4 {
          margin: 0 0 12px 0;
          color: var(--accent);
          font-size: 14px;
          font-weight: 600;
        }
        
        .summary-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 12px;
        }
        
        .summary-item.full-width {
          grid-column: 1 / -1;
        }
        
        .summary-item {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }
        
        .summary-label {
          font-size: 12px;
          color: var(--muted);
          font-weight: 600;
        }
        
        .summary-value {
          font-size: 14px;
          color: var(--text);
          word-break: break-word;
          line-height: 1.4;
        }
        
        .progress-overview {
          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
          border-radius: 12px;
          padding: 20px;
          border: 1px solid var(--border);
        }
        
        .progress-cards {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 16px;
          margin-top: 16px;
        }
        
        .progress-card {
          background: white;
          border-radius: 8px;
          padding: 16px;
          text-align: center;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-title {
          font-size: 14px;
          font-weight: 600;
          color: var(--text);
          margin-bottom: 8px;
        }
        
        .progress-score {
          font-size: 24px;
          font-weight: 800;
          color: var(--accent);
          margin-bottom: 8px;
        }
        
        .progress-bar {
          height: 8px;
          background: #e2e8f0;
          border-radius: 4px;
          margin-bottom: 8px;
          overflow: hidden;
        }
        
        .progress-fill {
          height: 100%;
          background: var(--accent);
          border-radius: 4px;
          transition: width 0.5s ease;
        }
        
        .progress-status {
          font-size: 12px;
          font-weight: 600;
        }
        
        .total-score-section {
          text-align: center;
          padding: 24px;
          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
          border-radius: 12px;
          border: 1px solid var(--border);
        }
        
        .score-display {
          display: flex;
          align-items: baseline;
          justify-content: center;
          gap: 8px;
          margin-bottom: 12px;
        }
        
        .score-number {
          font-size: 3.5rem;
          font-weight: 800;
          color: var(--accent);
          line-height: 1;
        }
        
        .score-out-of {
          font-size: 1.5rem;
          color: var(--muted);
          font-weight: 600;
        }
        
        .score-visualization {
          height: 12px;
          background: #e2e8f0;
          border-radius: 6px;
          margin: 20px 0;
          overflow: hidden;
          position: relative;
        }
        
        .score-bar-total {
          height: 100%;
          background: linear-gradient(90deg, var(--accent) 0%, var(--accent-dark) 100%);
          transition: width 0.5s ease;
          border-radius: 6px;
        }
        
        .score-status {
          font-weight: 700;
          padding: 10px 20px;
          border-radius: 25px;
          display: inline-block;
          font-size: 14px;
        }
        
        .score-status.passed {
          background: #dcfce7;
          color: var(--green);
          border: 2px solid #bbf7d0;
        }
        
        .score-status.medium {
          background: #fef3c7;
          color: var(--yellow);
          border: 2px solid #fde68a;
        }
        
        .score-status.low {
          background: #fef2f2;
          color: var(--red);
          border: 2px solid #fecaca;
        }
        
        .breakdown-section {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }
        
        .metric-component {
          background: white;
          border: 1px solid var(--border);
          border-radius: 8px;
          padding: 16px;
          transition: transform 0.2s ease;
        }
        
        .metric-component:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .metric-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 12px;
        }
        
        .metric-title {
          display: flex;
          align-items: center;
          gap: 8px;
          font-weight: 600;
          font-size: 15px;
        }
        
        .metric-score {
          font-weight: 700;
          padding: 4px 10px;
          border-radius: 20px;
          font-size: 13px;
          min-width: 60px;
          text-align: center;
        }
        
        .metric-score.good {
          background: #dcfce7;
          color: var(--green);
          border: 1px solid #bbf7d0;
        }
        
        .metric-score.medium {
          background: #fef3c7;
          color: var(--yellow);
          border: 1px solid #fde68a;
        }
        
        .metric-score.poor {
          background: #fef2f2;
          color: var(--red);
          border: 1px solid #fecaca;
        }
        
        .metric-bar {
          height: 8px;
          background: #f1f5f9;
          border-radius: 4px;
          margin-bottom: 12px;
          overflow: hidden;
          position: relative;
        }
        
        .metric-progress {
          height: 100%;
          background: var(--accent);
          transition: width 0.3s ease;
          border-radius: 4px;
        }
        
        .metric-description {
          font-size: 14px;
          color: var(--muted);
          line-height: 1.4;
        }
        
        .metric-tags {
          display: flex;
          flex-wrap: wrap;
          gap: 6px;
          margin-top: 8px;
        }
        
        .tag {
          padding: 4px 10px;
          border-radius: 15px;
          font-size: 12px;
          font-weight: 500;
        }
        
        .tag.matched {
          background: #dcfce7;
          color: var(--green);
          border: 1px solid #bbf7d0;
        }
        
        .tag.custom {
          background: #fef3c7;
          color: var(--yellow);
          border: 1px solid #fde68a;
        }
        
        .recommendations-section {
          background: #fffbeb;
          border: 1px solid #fde68a;
          border-radius: 8px;
          padding: 20px;
        }
        
        .recommendations-list {
          display: flex;
          flex-direction: column;
          gap: 12px;
          margin-top: 12px;
        }
        
        .recommendation {
          display: flex;
          gap: 12px;
          padding: 14px;
          border-radius: 8px;
          align-items: flex-start;
          transition: transform 0.2s ease;
        }
        
        .recommendation:hover {
          transform: translateX(4px);
        }
        
        .recommendation.high {
          background: #fef2f2;
          border: 1px solid #fecaca;
        }
        
        .recommendation.medium {
          background: #fffbeb;
          border: 1px solid #fde68a;
        }
        
        .rec-icon {
          font-size: 18px;
          flex-shrink: 0;
          margin-top: 2px;
        }
        
        .rec-content {
          flex: 1;
        }
        
        .rec-text {
          margin-bottom: 8px;
          line-height: 1.5;
          color: var(--text);
        }
        
        .rec-action {
          background: var(--accent);
          color: white;
          border: none;
          padding: 6px 14px;
          border-radius: 6px;
          font-size: 12px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s ease;
        }
        
        .rec-action:hover {
          background: var(--accent-dark);
          transform: translateY(-1px);
        }
        
        .fit-actions {
          display: flex;
          gap: 12px;
          justify-content: center;
          padding-top: 20px;
          border-top: 1px solid var(--border);
        }
        
        .fit-check-error {
          text-align: center;
          padding: 40px;
          color: var(--muted);
          font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ====================== –ü–û–õ–ù–´–ô –ö–û–î –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ======================
        // –° –î–û–ë–ê–í–õ–ï–ù–ù–´–ú –§–£–ù–ö–¶–ò–û–ù–ê–õ–û–ú –í–´–ë–û–†–ê –û–¢–ö–†–´–¢–´–• –ö–ï–ô–°–û–í
        
        const { useState, useEffect, useMemo, useRef, useCallback } = React;

        /* ====================== –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–æ—Ä–æ–≥–æ–≤ ====================== */
        const FIT_MIN = 50;
        const PILOT_MIN = 40;
        const MIN_NOTE_CHARS = 20;

        /* ====================== –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ ====================== */
        const CUSTOMERS = ["–ú–µ—Ç—Ä–æ", "–ú–ì–¢"];
        
        /* ====================== –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ====================== */
        const USER_ROLES = {
          FOUNDATION: "foundation",      // –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –§–æ–Ω–¥–∞ –¢–ò–ú
          PARTICIPANT: "participant"     // –£—á–∞—Å—Ç–Ω–∏–∫ –°—Ç–°—Ç
        };
        
        const FOUNDATION_PASSWORD = "–Ø –ª—é–±–ª—é –§–¢–ò–ú";
        
        // –ö–ª—é—á–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ LocalStorage
        const LS_USER_ROLE = "mvb_user_role";
        const LS_USER_NAME = "mvb_user_name";
        
        // –ù–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏
        const BUSINESS_MODELS = ["–ö–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è", "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è"];

        const EFFECT_OPTIONS = [
            "–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–ø—ã—Ç",
            "–ö–æ–º–º–µ—Ä—Ü–∏—è",
            "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
            "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
            "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞",
            "–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞",
        ];

        const EFFECT_DEFINITIONS = {
            "–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–ø—ã—Ç": "–í–ª–∏—è–Ω–∏–µ –Ω–∞ —É–¥–æ–±—Å—Ç–≤–æ –∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ (–∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞, —Å–∫–æ—Ä–æ—Å—Ç—å, NPS).",
            "–ö–æ–º–º–µ—Ä—Ü–∏—è": "–ü—Ä–∏—Ä–æ—Å—Ç –Ω–µ–±–∏–ª–µ—Ç–Ω–æ–π –≤—ã—Ä—É—á–∫–∏ / –¥–æ—Ö–æ–¥–æ–≤.",
            "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å": "–°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç/–≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.",
            "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å": "–°–Ω–∏–∂–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, —Ç—Ä–∞–≤–º–∞—Ç–∏–∑–º–∞, –Ω–∞—Ä—É—à–µ–Ω–∏–π.",
            "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞": "–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.",
            "–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞": "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º, —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤.",
        };

        const DIT_TAGS = [
            "–≠–ª–µ–∫—Ç—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ",
            "–ë–µ—Å–ø–∏–ª–æ—Ç–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç",
            "ITS",
            "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Ä–æ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã",
            "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã",
            "–ú–∏–∫—Ä–æ–º–æ–±–∏–ª—å–Ω–æ—Å—Ç—å",
            "–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (–ú–ì–ù)",
            "–≠–∫–æ–ª–æ–≥–∏—è/–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥",
            "–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤",
            "EdTech/HRTech",
            "–î—Ä—É–≥–æ–µ",
        ];

        /* ====================== –ò—Å—Ö–æ–¥–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (6 —à—Ç.) ====================== */
        const INITIAL_DIRECTIONS = [
            {
                code: "1.0",
                name: "–ü–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã",
                description: "–ù–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ —É–ª—É—á—à–µ–Ω–∏–µ UX –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.",
                customersRecommended: ["–ú–µ—Ç—Ä–æ"],
                openCases: [
                    "–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
                    "–ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
                    "–£–ª—É—á—à–µ–Ω–∏–µ UX –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤",
                ],
                recommendedEffects: ["–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–ø—ã—Ç"],
                recommendedTags: ["–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤", "ITS"],
                pilotHints: [
                    "–í—ã–±—Ä–∞—Ç—å –ø–∏–ª–æ—Ç–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏/–º–∞—Ä—à—Ä—É—Ç—ã",
                    "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º",
                    "–ü—Ä–æ–≤–µ—Å—Ç–∏ UX-—Ç–µ—Å—Ç—ã –Ω–∞ —Ñ–æ–∫—É—Å-–≥—Ä—É–ø–ø–∞—Ö",
                ],
                stakeholders: [],
                requirements: [
                    "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ü–î–Ω (152-–§–ó) –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –ø–æ–ª–∏—Ç–∏–∫–∞–º",
                    "–ù–µ —É—Ö—É–¥—à–∞–µ—Ç SLA —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è",
                    "–†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ç–∏ (–æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—ã)",
                    "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–∞—è –ø–æ–ª—å–∑–∞ —á–µ—Ä–µ–∑ UX-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/–º–µ—Ç—Ä–∏–∫–∏",
                ],
            },
            {
                code: "2.0",
                name: "–ù–µ–±–∏–ª–µ—Ç–Ω—ã–µ –¥–æ—Ö–æ–¥—ã",
                description: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤—ã—Ä—É—á–∫–∞ —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞.",
                customersRecommended: ["–ú–µ—Ç—Ä–æ"],
                openCases: [
                    "–ö–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã",
                    "–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã",
                    "Digital signage/—Ä–µ–∫–ª–∞–º–∞",
                ],
                recommendedEffects: ["–ö–æ–º–º–µ—Ä—Ü–∏—è"],
                recommendedTags: ["–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"],
                pilotHints: [
                    "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–ª–æ—â–∞–¥–∫–∏",
                    "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–∏–ª–ª–∏–Ω–≥–æ–º",
                    "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–∞–º–∫–∏",
                ],
                stakeholders: [],
                requirements: [
                    "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏",
                    "–ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —É—á—ë—Ç –≤—ã—Ä—É—á–∫–∏",
                    "–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–ª–∞—Ç—ë–∂–Ω–æ–π/–¥–æ–≥–æ–≤–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π",
                    "–°–æ–±–ª—é–¥–µ–Ω–∏–µ –±—Ä–µ–Ω–¥-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ä–∞–∑–º–µ—â–µ–Ω–∏—è",
                ],
            },
            {
                code: "3.0",
                name: "–†–æ–±–æ—Ç–∏–∑–∞—Ü–∏—è –∏ –ë–ê–°",
                description: "–ë–µ—Å–ø–∏–ª–æ—Ç–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ —Ä–æ–±–æ—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è –∑–∞–¥–∞—á —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞.",
                customersRecommended: ["–ú–µ—Ç—Ä–æ"],
                openCases: [
                    "–ë–ê–° –¥–ª—è –∑–∞–¥–∞—á –¢–ö",
                    "–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –¥–µ–ø–æ",
                ],
                recommendedEffects: ["–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"],
                recommendedTags: ["–ë–µ—Å–ø–∏–ª–æ—Ç–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "ITS"],
                pilotHints: [
                    "–ò—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª–∏–≥–æ–Ω/–º–∞—Ä—à—Ä—É—Ç",
                    "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
                    "–¢–µ–ª–µ–º–µ—Ç—Ä–∏—è",
                ],
                stakeholders: [],
                requirements: [
                    "–î–æ–∫—É–º–µ–Ω—Ç—ã/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–¢–†/–ì–û–°–¢ –≤ —á–∞—Å—Ç–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π)",
                    "–ù–∞–ª–∏—á–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞",
                    "–ì–µ–æ–∑–æ–Ω—ã, —Å—Ü–µ–Ω–∞—Ä–∏–∏ fallback –∏ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞",
                    "–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –∏ –ø–ª–∞–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è",
                ],
            },
            {
                code: "4.0",
                name: "–û–ø–ª–∞—Ç–∞ –ø—Ä–æ–µ–∑–¥–∞",
                description: "–ú–æ—Ç–∏–≤–∞—Ü–∏—è –∫ –æ–ø–ª–∞—Ç–µ –∏ –Ω–æ–≤—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã.",
                customersRecommended: ["–ú–µ—Ç—Ä–æ", "–ú–ì–¢"],
                openCases: [
                    "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –æ–ø–ª–∞—Ç–µ",
                    "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç–∞",
                    "–ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏",
                ],
                recommendedEffects: ["–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞", "–ö–æ–º–º–µ—Ä—Ü–∏—è"],
                recommendedTags: ["–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤", "ITS"],
                pilotHints: [
                    "–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏/–±–∏–ª–ª–∏–Ω–≥–æ–º",
                    "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞",
                    "–ü–∏–ª–æ—Ç –Ω–∞ 1‚Äì2 –º–∞—Ä—à—Ä—É—Ç–∞—Ö",
                ],
                stakeholders: ["–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –ø–µ—Ä–µ–≤–æ–∑–æ–∫"],
                requirements: [
                    "–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ –∏ –±–∏–ª–ª–∏–Ω–≥–æ–º",
                    "–ó–∞—â–∏—Ç–∞ –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (PCI DSS/–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)",
                    "–ú–µ—Ö–∞–Ω–∏–∑–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–∏—á–Ω–æ—Å—Ç–∏/–ø—Ä–∞–≤–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –æ–ø–ª–∞—Ç–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏",
                    "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–º",
                ],
            },
            {
                code: "6.0",
                name: "–ù–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è —Ä–µ—á–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞",
                description: "–°—É–¥–∞, –≤–µ—Ä—Ñ–∏, –ø—Ä–∏—á–∞–ª—ã –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ —Ä–µ—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.",
                customersRecommended: ["–ú–µ—Ç—Ä–æ", "–ú–ì–¢"],
                openCases: [
                    "–í–µ—Ä—Ñ–∏ –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —Å—É–¥–æ–≤",
                    "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–æ–±—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏—á–∞–ª–æ–≤",
                    "–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–≤–∏–∂–µ–Ω–∏—è –∏ —Å–µ—Ä–≤–∏—Å–∞",
                ],
                recommendedEffects: ["–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞"],
                recommendedTags: ["–≠–∫–æ–ª–æ–≥–∏—è/–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥", "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"],
                pilotHints: [
                    "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Ä–æ–ª–∏ –ú–µ—Ç—Ä–æ/–ú–ì–¢/–¶–û–î–î",
                    "–í—ã–±—Ä–∞—Ç—å –ø—Ä–∏—á–∞–ª/–º–∞—Ä—à—Ä—É—Ç",
                    "–£—á–∏—Ç—ã–≤–∞—Ç—å –ø–ª–∞–Ω—ã –ø–æ –≤–µ—Ä—Ñ–∏",
                ],
                stakeholders: ["–¶–û–î–î", "–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞"],
                requirements: [
                    "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å —Ä–µ—á–Ω–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –°–£–î–°",
                    "–ü—Ä–æ–µ–∫—Ç –ø—Ä–∏—á–∞–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —ç–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è",
                    "–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–æ—Ä–º—ã/–∫–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–±—Ä–æ—Å–æ–≤/—à—É–º",
                    "–ü–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏ –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤",
                ],
            },
            {
                code: "8.0",
                name: "–°–Ω–∏–∂–µ–Ω–∏–µ —Ç—Ä–∞–≤–º–æ–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
                description: "–°–Ω–∏–∂–µ–Ω–∏–µ —Ç—Ä–∞–≤–º–æ–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ—Å–∞–¥–∫–µ –∏ –≤ –¥–≤–∏–∂–µ–Ω–∏–∏ –Ω–∞–∑–µ–º–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.",
                customersRecommended: ["–ú–ì–¢"],
                openCases: [
                    "–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏ –ø–æ—Å–∞–¥–∫–µ",
                    "–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤",
                    "–ö–æ–Ω—Ç—Ä–æ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ —É –æ—Å—Ç–∞–Ω–æ–≤–æ–∫",
                ],
                recommendedEffects: ["–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"],
                recommendedTags: ["–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã", "ITS"],
                pilotHints: [
                    "–î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º",
                    "–¢–µ—Å—Ç–æ–≤–∞—è –ª–∏–Ω–∏—è/–º–∞—Ä—à—Ä—É—Ç",
                    "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π",
                ],
                stakeholders: [],
                requirements: [
                    "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–º –ì–û–°–¢/–¢–£ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
                    "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º",
                    "–ù–µ —É—Ö—É–¥—à–∞–µ—Ç –ø–æ—Å–∞–¥–∫—É/–≤—ã—Å–∞–¥–∫—É –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞",
                    "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—É—á–µ–Ω–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞",
                ],
            },
        ];

        /* ====================== –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π ====================== */
        const REQ_EXAMPLES = {
            "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ü–î–Ω (152-–§–ó) –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –ø–æ–ª–∏—Ç–∏–∫–∞–º": "–ü—Ä–∏–º–µ—Ä: –æ–±–µ–∑–ª–∏—á–∏–≤–∞–Ω–∏–µ, –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å; –ø—Ä–æ–≤–µ—Ä–∫–∞: –∞—É–¥–∏—Ç –ª–æ–≥–æ–≤, –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã = 0",
            "–ù–µ —É—Ö—É–¥—à–∞–µ—Ç SLA —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è": "–ü—Ä–∏–º–µ—Ä: A/B-—Ç–µ—Å—Ç, –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ push ‚â§ 3—Å, % –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ –Ω–∏–∂–µ –±–∞–∑–æ–≤–æ–≥–æ",
            "–†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ç–∏ (–æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—ã)": "–ü—Ä–∏–º–µ—Ä: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ñ–ª–∞–π–Ω-—Ñ–æ–ª–±—ç–∫; –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è—Ö –±–µ–∑ —Å–≤—è–∑–∏",
            "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–∞—è –ø–æ–ª—å–∑–∞ —á–µ—Ä–µ–∑ UX-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/–º–µ—Ç—Ä–∏–∫–∏": "–ü—Ä–∏–º–µ—Ä: 5 UX-—Ç–µ—Å—Ç–æ–≤; –æ–∂–∏–¥–∞–Ω–∏–µ: —Ä–æ—Å—Ç CSAT +10 –ø.–ø.",
            "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏": "–ü—Ä–∏–º–µ—Ä: —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä–Ω–æ–π –ø–æ—Ç–æ–∫; —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤—ã—Ä—É—á–∫–∏ X/Y",
            "–ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —É—á—ë—Ç –≤—ã—Ä—É—á–∫–∏": "–ü—Ä–∏–º–µ—Ä: –¥–∞—à–±–æ—Ä–¥ –≤ BI; —Å–≤–µ—Ä–∫–∞ —á–µ–∫–æ–≤/—Å–µ—Å—Å–∏–π 1:1",
            "–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø–ª–∞—Ç—ë–∂–Ω–æ–π/–¥–æ–≥–æ–≤–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π": "–ü—Ä–∏–º–µ—Ä: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–ª–ª–∏–Ω–≥–æ–º N; —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥ –û–ö",
            "–°–æ–±–ª—é–¥–µ–Ω–∏–µ –±—Ä–µ–Ω–¥-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ä–∞–∑–º–µ—â–µ–Ω–∏—è": "–ü—Ä–∏–º–µ—Ä: –º–∞–∫–µ—Ç—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã; —á–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–æ–±–ª—é–¥—ë–Ω",
            "–î–æ–∫—É–º–µ–Ω—Ç—ã/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–¢–†/–ì–û–°–¢ –≤ —á–∞—Å—Ç–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π)": "–ü—Ä–∏–º–µ—Ä: –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏—Å–ø—ã—Ç–∞–Ω–∏–π; —á–µ–∫ –ø–æ –¢–†/–ì–û–°–¢",
            "–ù–∞–ª–∏—á–∏–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞": "–ü—Ä–∏–º–µ—Ä: –ø–æ—Ç–æ–∫ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –≤ SCADA; —Ç—Ä–µ–≤–æ–≥–∏ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã",
            "–ì–µ–æ–∑–æ–Ω—ã, —Å—Ü–µ–Ω–∞—Ä–∏–∏ fallback –∏ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞": "–ü—Ä–∏–º–µ—Ä: –≥–µ–æ–∑–æ–Ω—ã –æ–ø–∏—Å–∞–Ω—ã; —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ fallback/—Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞",
            "–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –∏ –ø–ª–∞–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è": "–ü—Ä–∏–º–µ—Ä: HAZOP/FAQ; —Ä–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è",
            "–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ –∏ –±–∏–ª–ª–∏–Ω–≥–æ–º": "–ü—Ä–∏–º–µ—Ä: —Ç–µ—Å—Ç—ã —Å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ X; —Å—Ç–µ–Ω–¥ –±–∏–ª–ª–∏–Ω–≥–∞",
            "–ó–∞—â–∏—Ç–∞ –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (PCI DSS/–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)": "–ü—Ä–∏–º–µ—Ä: —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è; —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω–µ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞",
            "–ú–µ—Ö–∞–Ω–∏–∑–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–∏—á–Ω–æ—Å—Ç–∏/–ø—Ä–∞–≤–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏": "–ü—Ä–∏–º–µ—Ä: —Å—Ö–µ–º–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Å–∏—Å—Ç–µ–º–µ Y",
            "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–º": "–ü—Ä–∏–º–µ—Ä: –ø–∏—Å—å–º–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π; —É—Å–ª–æ–≤–∏—è –ø–∏–ª–æ—Ç–∞",
            "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å —Ä–µ—á–Ω–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –°–£–î–°": "–ü—Ä–∏–º–µ—Ä: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –°–£–î–°; –æ–∫–Ω–æ –ø–∏–ª–æ—Ç–∞",
            "–ü—Ä–æ–µ–∫—Ç –ø—Ä–∏—á–∞–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —ç–ª–µ–∫—Ç—Ä–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è": "–ü—Ä–∏–º–µ—Ä: —Å—Ö–µ–º–∞ –º–æ—â–Ω–æ—Å—Ç–∏; –º–µ—Å—Ç–æ –¥–ª—è –ó–£",
            "–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–æ—Ä–º—ã/–∫–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–±—Ä–æ—Å–æ–≤/—à—É–º": "–ü—Ä–∏–º–µ—Ä: —É—Ä–æ–≤–µ–Ω—å —à—É–º–∞ ‚â§ N –¥–ë; –Ω–æ—Ä–º—ã –≤—ã–±—Ä–æ—Å–æ–≤ —Å–æ–±–ª—é–¥–µ–Ω—ã",
            "–ü–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏ –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤": "–ü—Ä–∏–º–µ—Ä: —ç–≤–∞–∫—É–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
            "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–º –ì–û–°–¢/–¢–£ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏": "–ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ—á–µ–Ω—å –ì–û–°–¢; –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ç–µ—Å—Ç–æ–≤",
            "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –ø–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º": "–ü—Ä–∏–º–µ—Ä: –º–µ—Ç—Ä–∏–∫–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤/–º–ª–Ω –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤",
            "–ù–µ —É—Ö—É–¥—à–∞–µ—Ç –ø–æ—Å–∞–¥–∫—É/–≤—ã—Å–∞–¥–∫—É –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞": "–ü—Ä–∏–º–µ—Ä: —Ç–∞–π–º–∏–Ω–≥–∏ –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞—Ö –≤ –Ω–æ—Ä–º–µ",
            "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—É—á–µ–Ω–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞": "–ü—Ä–∏–º–µ—Ä: –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è –Ω–∞ 2 —Å–º–µ–Ω—ã",
        };
        const DEFAULT_REQ_EXAMPLE = "–ü—Ä–∏–º–µ—Ä: –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ/—Å–∏—Å—Ç–µ–º—ã –∏ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –ø–∏–ª–æ—Ç–µ (–º–µ—Ç—Ä–∏–∫–∞/–º–µ—Ç–æ–¥).";

        /* ====================== LocalStorage –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ ====================== */
        const LS_DIRECTIONS_V3 = "mvb_directions_v3";
        const LS_PROJECTS_V3 = "mvb_projects_v3";
        const LS_DIRECTIONS_V2 = "mvb_directions_v2";
        const LS_PROJECTS_V2 = "mvb_projects_v2";
        const LS_TOUR_KEY = "mvb_tour_dismissed_v1";
        const LS_FTIM_PROJECTS = "mvb_ftim_projects_v1";
        const LS_INSTRUCTION_KEY = "mvb_instruction_dismissed_v1";
        const LS_DELETED_ITEMS = "mvb_deleted_items"; // –î–ª—è –∂—É—Ä–Ω–∞–ª–∞ —É–¥–∞–ª–µ–Ω–∏–π
        const MIN_CONFIRM_TEXT = "–£–î–ê–õ–ò–¢–¨"; // –¢–µ–∫—Å—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        const DELETE_TIMEOUT = 5000; // 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—Ç–º–µ–Ω—É
        const BATCH_DELETE_LIMIT = 10; // –ú–∞–∫—Å–∏–º—É–º —É–¥–∞–ª–µ–Ω–∏–π –∑–∞ —Ä–∞–∑


        function tryParse(raw) {
            try {
                return raw ? JSON.parse(raw) : null;
            } catch {
                return null;
            }
        }

        function migrateV2toV3() {
            try {
                const v3Dir = tryParse(localStorage.getItem(LS_DIRECTIONS_V3));
                const v3Proj = tryParse(localStorage.getItem(LS_PROJECTS_V3));
                const needDir = !Array.isArray(v3Dir) || v3Dir.length === 0;
                const needProj = !Array.isArray(v3Proj);
                if (needDir) {
                    const v2Dir = tryParse(localStorage.getItem(LS_DIRECTIONS_V2));
                    if (Array.isArray(v2Dir) && v2Dir.length > 0) {
                        localStorage.setItem(LS_DIRECTIONS_V3, JSON.stringify(v2Dir));
                    }
                }
                if (needProj) {
                    const v2Proj = tryParse(localStorage.getItem(LS_PROJECTS_V2));
                    if (Array.isArray(v2Proj)) {
                        localStorage.setItem(LS_PROJECTS_V3, JSON.stringify(v2Proj));
                    }
                }
            } catch {}
        }

        function saveDirections(arr) {
            try {
                localStorage.setItem(LS_DIRECTIONS_V3, JSON.stringify(arr));
            } catch {}
        }

        function loadDirections() {
            migrateV2toV3();
            try {
                const raw = localStorage.getItem(LS_DIRECTIONS_V3);
                if (raw) {
                    const arr = JSON.parse(raw);
                    if (Array.isArray(arr) && arr.length > 0) return arr;
                }
            } catch {}
            localStorage.setItem(LS_DIRECTIONS_V3, JSON.stringify(INITIAL_DIRECTIONS));
            return INITIAL_DIRECTIONS;
        }

        function saveProjects(arr) {
            try {
                localStorage.setItem(LS_PROJECTS_V3, JSON.stringify(arr));
            } catch {}
        }

        /* ====================== –£—Ç–∏–ª–∏—Ç—ã ====================== */
        function uuid() {
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
                const r = (Math.random() * 16) | 0;
                const v = c === "x" ? r : (r & 0x3) | 0x8;
                return v.toString(16);
            });
        }

        function normalizeText(s = "") {
            return (s || "").toLowerCase();
        }

        function openCasesMatchRatio(idea = "", description = "", openCases = []) {
            const text = normalizeText(`${idea} ${description}`);
            if (!openCases || openCases.length === 0) return 0;
            let matched = 0;
            for (const oc of openCases) {
                const tokens = oc
                    .toLowerCase()
                    .split(/[^\p{L}\p{N}]+/u)
                    .filter(Boolean);
                const hit = tokens.some((t) => text.includes(t));
                if (hit) matched += 1;
            }
            return matched / openCases.length;
        }

        function intersectCount(a = [], b = []) {
            const set = new Set(a);
            return b.reduce((acc, x) => acc + (set.has(x) ? 1 : 0), 0);
        }

        // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø: –†–∞—Å—á–µ—Ç FitScore —Å —É—á–µ—Ç–æ–º –≤—ã–±–æ—Ä–∞ –∫–µ–π—Å–∞
        function computeFitScore(project, directions) {
            const dir = directions.find((d) => d.name === project.directionName);
            if (!dir) return 0;
            
            // –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê: –†–∞—Å—á–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–µ–π—Å–∞–º
            let caseAlignmentScore;
            if (project.selectedOpenCase === "ORIGINAL") {
                // –ë–æ–Ω—É—Å –∑–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å
                caseAlignmentScore = 0.8; // 80% –∑–∞ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å
            } else if (project.selectedOpenCase && dir.openCases?.includes(project.selectedOpenCase)) {
                // –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –∫–µ–π—Å—É
                caseAlignmentScore = 1.0; // 100% –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã
            } else {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (—Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
                caseAlignmentScore = openCasesMatchRatio(
                    project.title || "",
                    project.shortDescription || "",
                    dir.openCases || []
                );
            }
            
            const effRecommended = dir.recommendedEffects || [];
            const effMatch =
                effRecommended.length > 0
                    ? intersectCount(project.effectTags || [], effRecommended) /
                      effRecommended.length
                    : 0;
                    
            const custMatch = (dir.customersRecommended || []).includes(
                project.customer || ""
            )
                ? 1
                : 0;

            // –ù–û–í–ê–Ø –§–û–†–ú–£–õ–ê —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –≤—ã–±–æ—Ä–∞ –∫–µ–π—Å–∞
            const fit = 100 * (0.4 * caseAlignmentScore + 0.3 * effMatch + 0.3 * custMatch);
            return Math.round(fit);
        }

        function computePilotReadiness(project) {
            const p = project.pilot || {};
            const fields = [
                p.site,
                (p.dataSources || []).length > 0,
                (p.integrations || []).length > 0,
                p.legalApprovals,
                p.resources,
                p.stepsPlan,
                p.successCriteria,
            ];
            const values = fields.map((f) =>
                Array.isArray(f) ? f.length > 0 : typeof f === "string" ? f.trim() !== "" : !!f
            );
            const completed = values.filter(Boolean).length;
            const total = fields.length;
            return Math.round((completed / total) * 100);
        }

        function isTrivialNote(val) {
            const v = (val || "").trim().toLowerCase();
            if (v.length === 0) return true;
            const trivial = new Set(["-", "‚Äî", "ok", "–æ–∫", "n/a", "–Ω/–¥", "none", "–ø—É—Å—Ç–æ"]);
            return trivial.has(v);
        }

        function computeReqNotesScore(project, dir) {
          // –ï—Å–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 100%
          if (!dir?.requirements || dir.requirements.length === 0) {
            return 100;
          }
        
          const requirements = dir.requirements;
          const selfAssessment = project.selfAssessment || [];
          const selfNotes = project.selfAssessmentNotes || [];
        
          let totalScore = 0;
        
          for (let i = 0; i < requirements.length; i++) {
            const isConfirmed = selfAssessment[i] === true;
            const note = selfNotes[i] || '';
            const hasQualityNote = note.trim().length >= MIN_NOTE_CHARS && !isTrivialNote(note);
        
            if (isConfirmed && hasQualityNote) {
              totalScore += 1; // 100% –∑–∞ —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç
            } else if (isConfirmed) {
              totalScore += 0.5; // 50% –∑–∞ —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç
            }
            // –ò–Ω–∞—á–µ 0 - –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
          }
        
          return (totalScore / requirements.length) * 100;
        }

        function computePilotCoreScore(project) {
            const p = project.pilot || {};
            const tri = [
                (p.site || "").trim() !== "",
                (p.dataSources || []).length > 0,
                (p.integrations || []).length > 0,
            ];
            const cnt = tri.filter(Boolean).length;
            if (cnt === 0) return 0;
            if (cnt === 1) return 40;
            if (cnt === 2) return 70;
            return 100; // cnt === 3
        }
        
        function computeProductCompleteness(project) {
            const fields = [
                project.problemStatement?.trim(),
                project.productType?.trim(),
                project.productDescription?.trim(),
                project.businessModel?.trim(),
                project.businessModelDescription?.trim()
            ];
            
            const completed = fields.filter(field => field && field.length > 0).length;
            return Math.round((completed / fields.length) * 100);
        }
        function computeIdeaAdequacy(project, dir) {
          const reqNotesScore = computeReqNotesScore(project, dir);
          const pilotCoreScore = computePilotCoreScore(project);
          const productCompletenessScore = computeProductCompleteness(project);
          
          // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–û–†–ú–£–õ–ê: 60% —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è + 25% –ø–∏–ª–æ—Ç + 15% –ø—Ä–æ–¥—É–∫—Ç
          const raw = 0.6 * reqNotesScore + 0.25 * pilotCoreScore + 0.15 * productCompletenessScore;
          return Math.round(raw);
        }

        // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
        function computeAssessmentProgress(project) {
            const baseFields = [
                project.title?.trim(),
                project.teamName?.trim(),
                project.shortDescription?.trim()
            ];
            const baseCompleted = baseFields.filter(f => f && f.length > 0).length;
            const baseProgress = Math.round((baseCompleted / baseFields.length) * 100);
            
            const usefulnessFields = [
                project.directionName,
                project.customer,
                project.selectedOpenCase // –ù–û–í–û–ï –ü–û–õ–ï: –≤—ã–±–æ—Ä –∫–µ–π—Å–∞
            ];
            const usefulnessCompleted = usefulnessFields.filter(f => f && f.length > 0).length;
            const usefulnessProgress = Math.round((usefulnessCompleted / usefulnessFields.length) * 100);
            
            const ideaFields = [
                project.targetAudience?.length > 0,
                project.problemStatement?.trim(),
                project.businessModel?.trim(),
                project.businessModelDescription?.trim(),
                project.productType?.trim(), // –ù–û–í–û–ï –ü–û–õ–ï: —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞
                project.productDescription?.trim() // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–µ (—Ç–µ–ø–µ—Ä—å "–†–µ—à–µ–Ω–∏–µ")
            ];
            const ideaCompleted = ideaFields.filter(Boolean).length;
            const ideaProgress = Math.round((ideaCompleted / ideaFields.length) * 100);
                        
            const pilotFields = [
                project.pilot?.site?.trim(),
                project.pilot?.stepsPlan?.trim(),
                project.pilot?.resources?.trim()
            ];
            const pilotCompleted = pilotFields.filter(f => f && f.length > 0).length;
            const pilotProgress = Math.round((pilotCompleted / pilotFields.length) * 100);
            
            return {
                base: baseProgress,
                usefulness: usefulnessProgress,
                idea: ideaProgress,
                pilot: pilotProgress,
                overall: Math.round((baseProgress + usefulnessProgress + ideaProgress + pilotProgress) / 4)
            };
        }

        function timeStamp() {
            const d = new Date();
            const pad = (n) => String(n).padStart(2, "0");
            return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}_${pad(
                d.getHours()
            )}-${pad(d.getMinutes())}`;
        }

        function downloadBlob(content, mime, name) {
            const blob = content instanceof Blob ? content : new Blob([content], { type: mime + ";charset=utf-8;" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = name;
            a.click();
            URL.revokeObjectURL(url);
        }

        function useOnClickOutside(ref, handler) {
            useEffect(() => {
                const fn = (e) => {
                    if (!ref.current) return;
                    if (!ref.current.contains(e.target)) handler();
                };
                document.addEventListener("mousedown", fn);
                return () => document.removeEventListener("mousedown", fn);
            }, [ref, handler]);
        }

        function useDebounced(value, delay = 200) {
            const [v, setV] = useState(value);
            useEffect(() => {
                const h = setTimeout(() => setV(value), delay);
                return () => clearTimeout(h);
            }, [value, delay]);
            return v;
        }

        /* ====================== –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ ====================== */
        function normalizeProject(p, directions) {
            // ‚úÖ –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú, —á—Ç–æ p - –æ–±—ä–µ–∫—Ç
            if (!p || typeof p !== 'object') {
                p = {};
            }
            
            const id = p.id || uuid();
            const pilot = {
                site: p?.pilot?.site || "",
                dataSources: Array.isArray(p?.pilot?.dataSources) ? p.pilot.dataSources : [],
                integrations: Array.isArray(p?.pilot?.integrations) ? p.pilot.integrations : [],
                legalApprovals: p?.pilot?.legalApprovals || "",
                resources: p?.pilot?.resources || "",
                stepsPlan: p?.pilot?.stepsPlan || "",
                successCriteria: p?.pilot?.successCriteria || "",
            };
            
            // ‚úÖ –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú, —á—Ç–æ directions - –º–∞—Å—Å–∏–≤
            const safeDirections = Array.isArray(directions) ? directions : [];
            
            // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
            const projBase = {
                id,
                title: p.title || "",
                teamName: p.teamName || "",
                teamMembers: Array.isArray(p.teamMembers) ? p.teamMembers : [],
                customer: p.customer || "",
                directionName: p.directionName || "",
                directionCode: p.directionCode || "",
                targetAudience: typeof p.targetAudience === 'string' ? p.targetAudience : 
                               Array.isArray(p.targetAudience) ? p.targetAudience.join(", ") : "",
                effectTags: Array.isArray(p.effectTags) ? p.effectTags : [],
                DITTags: Array.isArray(p.DITTags) ? p.DITTags : [],
                shortDescription: p.shortDescription || "",
                // –ù–û–í–û–ï –ü–û–õ–ï: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –∫–µ–π—Å—É
                selectedOpenCase: p.selectedOpenCase || "", // "" | "ORIGINAL" | –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–µ–π—Å
                // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
                problemStatement: p.problemStatement || "",
                businessModel: p.businessModel || "",
                businessModelDescription: p.businessModelDescription || "",
                productType: p.productType || "",
                productDescription: p.productDescription || "",
                pilot,
                selfAssessment: Array.isArray(p.selfAssessment) ? p.selfAssessment : [],
                selfAssessmentNotes: Array.isArray(p.selfAssessmentNotes) ? p.selfAssessmentNotes : [],
                selfAssessmentPassed: !!p.selfAssessmentPassed,
                fitScore: typeof p.fitScore === "number" ? p.fitScore : 0,
                pilotReadiness: typeof p.pilotReadiness === "number" ? p.pilotReadiness : 0,
                ideaAdequacy: typeof p.ideaAdequacy === "number" ? p.ideaAdequacy : 0,
                status: p.status === "—á–µ—Ä–Ω–æ–≤–∏–∫" ? "—á–µ—Ä–Ω–æ–≤–∏–∫" : "–≥–æ—Ç–æ–≤",
            };
            // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–æ–≤
            projBase.fitScore = computeFitScore(projBase, safeDirections);
            projBase.pilotReadiness = computePilotReadiness(projBase);
            const dirObj = safeDirections.find((d) => d.name === projBase.directionName);
            projBase.ideaAdequacy = computeIdeaAdequacy(projBase, dirObj);
        
            // –ü–æ–¥–≥–æ–Ω—è–µ–º –¥–ª–∏–Ω—É selfAssessmentNotes –ø–æ–¥ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
            const reqLen = dirObj?.requirements?.length || 0;
            if (projBase.selfAssessmentNotes.length < reqLen) {
                const arr = projBase.selfAssessmentNotes.slice();
                while (arr.length < reqLen) arr.push("");
                projBase.selfAssessmentNotes = arr;
            }
            if (projBase.selfAssessment.length < reqLen) {
                const sa = projBase.selfAssessment.slice();
                while (sa.length < reqLen) sa.push(false);
                projBase.selfAssessment = sa;
            }
            return projBase;
        }

        function loadProjects() {
            migrateV2toV3();
            try {
                const raw = localStorage.getItem(LS_PROJECTS_V3);
                if (raw) {
                    const arr = JSON.parse(raw);
                    if (Array.isArray(arr)) {
                        const dirs = loadDirections(); // –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
                        return arr.map((p) => normalizeProject(p, dirs));
                    }
                }
            } catch {}
            localStorage.setItem(LS_PROJECTS_V3, JSON.stringify([]));
            return [];
        }

        /* ====================== –ü—Ä–æ–µ–∫—Ç—ã –æ—Ç –§–¢–ò–ú ====================== */
        function saveFTIMProjects(arr) {
            try {
                localStorage.setItem(LS_FTIM_PROJECTS, JSON.stringify(arr));
            } catch {}
        }

        function loadFTIMProjects() {
            try {
                const raw = localStorage.getItem(LS_FTIM_PROJECTS);
                if (raw) {
                    const arr = JSON.parse(raw);
                    if (Array.isArray(arr)) return arr;
                }
            } catch {}
            localStorage.setItem(LS_FTIM_PROJECTS, JSON.stringify([]));
            return [];
        }

        /* ====================== –ü—Ä–∏–º–∏—Ç–∏–≤—ã UI ====================== */
        function ToggleGroup({ value, onChange, items, ariaLabel }) {
            return (
                React.createElement("div", { 
                    role: "tablist", 
                    "aria-label": ariaLabel, 
                    className: "chips" 
                }, items.map((it) =>
                    React.createElement("button", {
                        key: it.value,
                        role: "tab",
                        "aria-selected": value === it.value,
                        className: "btn toggle " + (value === it.value ? "active" : ""),
                        onClick: () => onChange(it.value),
                        title: it.label
                    }, it.label)
                ))
            );
        }

        function Badge({ children, kind = "outline", title }) {
            const cls =
                kind === "ok"
                    ? "badge ok"
                    : kind === "err"
                    ? "badge err"
                    : kind === "muted"
                    ? "badge muted"
                    : kind === "warn"
                    ? "badge warn"
                    : kind === "accent"
                    ? "badge accent"
                    : "badge";
            return React.createElement("span", { className: cls, title }, children);
        }

        function Chip({ children, onRemove, ariaLabel, onClick }) {
            return React.createElement("span", {
                className: "chip",
                "aria-label": ariaLabel,
                style: { cursor: onClick ? "pointer" : "default" },
                onClick
            }, children, onRemove && React.createElement("button", {
                className: "btn ghost",
                style: { padding: "0px 6px" },
                "aria-label": "–£–¥–∞–ª–∏—Ç—å",
                onClick: (e) => {
                    e.stopPropagation();
                    onRemove();
                }
            }, "√ó"));
        }

        function TagsInput({ label, values, setValues, placeholder, ariaLabel }) {
            const [input, setInput] = useState("");
            const addValue = (v) => {
                const t = v.trim();
                if (t && !values.includes(t)) setValues([...values, t]);
            };
            const onKeyDown = (e) => {
                if (e.key === "Enter" || e.key === ",") {
                    e.preventDefault();
                    addValue(input);
                    setInput("");
                }
                if (e.key === "Backspace" && input === "" && values.length > 0) {
                    setValues(values.slice(0, -1));
                }
            };
            return React.createElement("div", null,
                React.createElement("div", { className: "label" }, label),
                React.createElement("div", {
                    className: "chips",
                    style: {
                        border: "1px solid var(--border)",
                        borderRadius: 8,
                        padding: 8,
                        background: "#ffffff",
                    }
                }, values.map((v) =>
                    React.createElement(Chip, {
                        key: v,
                        onRemove: () => setValues(values.filter((x) => x !== v)),
                        ariaLabel: v
                    }, v)
                ), React.createElement("input", {
                    className: "input",
                    style: { flex: 1, minWidth: 120, background: "transparent", border: "none", padding: "6px 8px" },
                    value: input,
                    onChange: (e) => setInput(e.target.value),
                    onKeyDown,
                    placeholder,
                    "aria-label": ariaLabel
                }))
            );
        }

        function MultiSelectDropdown({ label, options, values, setValues, defs }) {
            const [open, setOpen] = useState(false);
            const ref = useRef(null);
            useOnClickOutside(ref, () => setOpen(false));
            const toggle = (v) => {
                setValues(values.includes(v) ? values.filter((x) => x !== v) : [...values, v]);
            };
            return React.createElement("div", { className: "dropdown", ref, style: { position: "relative" } },
                React.createElement("div", { className: "label" }, label),
                React.createElement("button", {
                    className: "btn",
                    onClick: () => setOpen((v) => !v),
                    "aria-haspopup": "menu",
                    "aria-expanded": open
                }, values.length > 0 ? values.join(", ") : "–í—ã–±–µ—Ä–∏—Ç–µ..."),
                open && React.createElement("div", {
                    role: "menu",
                    "aria-label": label,
                    style: {
                        position: "absolute",
                        marginTop: 4,
                        background: "#fff",
                        border: "1px solid var(--border)",
                        borderRadius: 8,
                        padding: 8,
                        zIndex: 50,
                        minWidth: 220,
                        boxShadow: "0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",
                    }
                }, options.map((opt) =>
                    React.createElement("div", {
                        key: opt,
                        className: "dropdown-item",
                        onClick: () => toggle(opt),
                        role: "menuitemcheckbox",
                        "aria-checked": values.includes(opt),
                        style: {
                            display: "flex",
                            gap: 8,
                            alignItems: "center",
                            padding: 8,
                            borderRadius: 6,
                            cursor: "pointer",
                            transition: "background 0.2s ease",
                        }
                    }, React.createElement("input", { 
                        type: "checkbox", 
                        readOnly: true, 
                        checked: values.includes(opt) 
                    }), React.createElement("span", null, opt), defs?.[opt] ? 
                    React.createElement("span", { className: "small" }, "‚Äî ", defs[opt]) : null)
                ))
            );
        }

        function CheckboxList({ label, items, values, setValues }) {
            const toggle = (v) =>
                setValues(values.includes(v) ? values.filter((x) => x !== v) : [...values, v]);
            return React.createElement("div", null,
                React.createElement("div", { className: "label" }, label),
                React.createElement("div", { className: "chips" }, items.map((c) =>
                    React.createElement("label", { 
                        key: c, 
                        className: "chip", 
                        style: { cursor: "pointer" } 
                    }, React.createElement("input", {
                        type: "checkbox",
                        checked: values.includes(c),
                        onChange: () => toggle(c),
                        "aria-label": c
                    }), React.createElement("span", null, c)))
                )
            );
        }

        function SortHeader({ label, sortKey, currentKey, sortDir, onSort }) {
            const active = currentKey === sortKey;
            return React.createElement("button", {
                className: "btn ghost",
                onClick: () => onSort(sortKey),
                "aria-label": `–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å: ${label}`,
                title: label
            }, React.createElement("span", null, label), React.createElement("span", { 
                className: "icon", 
                style: { marginLeft: 6 } 
            }, active ? (sortDir === "asc" ? "‚ñ≤" : "‚ñº") : "‚Üï"));
        }

        function SideModal({ open, title, onClose, headExtra, children, footLeft, footRight, ariaLabel }) {
            useEffect(() => {
                const onKey = (e) => {
                    if (e.key === "Escape") onClose();
                };
                document.addEventListener("keydown", onKey);
                return () => document.removeEventListener("keydown", onKey);
            }, [onClose]);
            if (!open) return null;
            return React.createElement(React.Fragment, null,
                React.createElement("div", { 
                    className: "modal-backdrop", 
                    "aria-hidden": "true" 
                }),
                React.createElement("aside", {
                    className: "modal",
                    role: "dialog",
                    "aria-modal": "true",
                    "aria-label": ariaLabel || title
                }, React.createElement("div", { className: "modal-head" },
                    React.createElement("div", null,
                        React.createElement("div", { style: { fontWeight: 600, fontSize: "1.1rem" } }, title),
                        React.createElement("div", { className: "small" }, "–ù–∞–∂–º–∏—Ç–µ Esc –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è")
                    ),
                    React.createElement("div", { style: { display: "flex", gap: 8, alignItems: "center" } },
                        headExtra,
                        React.createElement("button", {
                            className: "btn ghost",
                            onClick: onClose,
                            "aria-label": "–ó–∞–∫—Ä—ã—Ç—å"
                        }, "‚úï")
                    )
                ), React.createElement("div", { className: "modal-body" }, children),
                React.createElement("div", { className: "modal-foot" },
                    React.createElement("div", null, footLeft),
                    React.createElement("div", { style: { display: "flex", gap: 8 } }, footRight)
                ))
            );
        }

        /* ====================== –ü–æ–¥—Å–∫–∞–∑–∫–∏ (–ø—Ä–µ—Å–µ—Ç—ã) ====================== */
        function computePresetDataSources(effects, directionName) {
            const set = new Set();
            const add = (x) => x.forEach((v) => set.add(v));
            if (effects.includes("–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞") || (directionName || "").toLowerCase().includes("–æ–ø–ª–∞—Ç–∞")) add(["–≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã", "—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏/–±–∏–ª–ª–∏–Ω–≥"]);
            if (effects.includes("–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–ø—ã—Ç")) add(["–ª–æ–≥ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è", "CRM –∂–∞–ª–æ–±"]);
            if (effects.includes("–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å")) add(["SCADA/–¥–∞—Ç—á–∏–∫–∏", "—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –¥–µ–ø–æ"]);
            if (effects.includes("–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å")) add(["–∂—É—Ä–Ω–∞–ª—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤", "–≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ"]);
            if (effects.includes("–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞")) add(["–ø–∞—Å–ø–æ—Ä—Ç–∞ –æ–±—ä–µ–∫—Ç–æ–≤", "–Ω–∞–≥—Ä—É–∑–∫–∏/—Ç—Ä–∞—Ñ–∏–∫"]);
            return Array.from(set);
        }

        function computePresetIntegrations(effects, directionName) {
            const set = new Set();
            const add = (x) => x.forEach((v) => set.add(v));
            if (effects.includes("–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞") || (directionName || "").toLowerCase().includes("–æ–ø–ª–∞—Ç–∞")) add(["–±–∏–ª–ª–∏–Ω–≥", "–ø–ª–∞—Ç—ë–∂–Ω—ã–π —à–ª—é–∑"]);
            if (effects.includes("–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–ø—ã—Ç")) add(["push-—à–ª—é–∑", "–Ω–∞–≤–∏–≥–∞—Ü–∏—è/–∫–∞—Ä—Ç—ã"]);
            if (effects.includes("–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å")) add(["ERP/—É—á—ë—Ç", "CMMS"]);
            if (effects.includes("–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å")) add(["—Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–∞–ª–µ—Ä—Ç–∏–Ω–≥"]);
            if (effects.includes("–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞")) add(["–ê–°–£ –¢–ü", "–ì–ò–°"]);
            return Array.from(set);
        }

        function suggestEffects(title, descr) {
            const text = `${title} ${descr}`.toLowerCase();
            const sugg = new Set();
            if (/(–æ–ø–ª–∞—Ç–∞|—à—Ç—Ä–∞—Ñ|–±–∏–ª–µ—Ç|–≤–∞–ª–∏–¥–∞—Ç–æ—Ä|–±–∏–ª–ª–∏–Ω–≥)/i.test(text)) { sugg.add("–†–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∞"); sugg.add("–ö–æ–º–º–µ—Ä—Ü–∏—è"); }
            if (/(—É–≤–µ–¥–æ–º–ª–µ–Ω|–Ω–∞–≤–∏–≥–∞—Ü|–ø—Ä–∏–ª–æ–∂–µ–Ω|nps|ux)/i.test(text)) { sugg.add("–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –æ–ø—ã—Ç"); }
            if (/(–∏–Ω—Ü–∏–¥–µ–Ω—Ç|–±–µ–∑–æ–ø–∞—Å–Ω|—Ç—Ä–∞–≤–º)/i.test(text)) { sugg.add("–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"); }
            if (/(scada|–¥–∞—Ç—á–∏–∫|—Ç–µ–ª–µ–º–µ—Ç—Ä|—Ä–µ–º–æ–Ω—Ç|—É—á—ë—Ç|erp|cmms)/i.test(text)) { sugg.add("–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"); sugg.add("–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞"); }
            return Array.from(sugg);
        }

        function suggestDITTags(title, descr) {
            const text = `${title} ${descr}`.toLowerCase();
            const sugg = new Set();
            if (/(–æ–ø–ª–∞—Ç–∞|—à—Ç—Ä–∞—Ñ|–±–∏–ª–µ—Ç|–≤–∞–ª–∏–¥–∞—Ç–æ—Ä|–±–∏–ª–ª–∏–Ω–≥)/i.test(text)) { sugg.add("–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"); }
            if (/(—É–≤–µ–¥–æ–º–ª–µ–Ω|–Ω–∞–≤–∏–≥–∞—Ü|–ø—Ä–∏–ª–æ–∂–µ–Ω|nps|ux)/i.test(text)) { sugg.add("–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"); }
            if (/(–∏–Ω—Ü–∏–¥–µ–Ω—Ç|–±–µ–∑–æ–ø–∞—Å–Ω|—Ç—Ä–∞–≤–º)/i.test(text)) { sugg.add("–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"); }
            if (/(scada|–¥–∞—Ç—á–∏–∫|—Ç–µ–ª–µ–º–µ—Ç—Ä|—Ä–µ–º–æ–Ω—Ç|—É—á—ë—Ç|erp|cmms)/i.test(text)) { sugg.add("–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã"); sugg.add("–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"); }
            return Array.from(sugg);
        }
        /* ====================== –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ü–û–ú–û–©–ù–ò–ö–û–í ====================== */
        function HelperButton({ topic }) {
          const [isOpen, setIsOpen] = React.useState(false);
          
          return React.createElement(React.Fragment, null,
            React.createElement("button", {
              className: "helper-btn",
              onClick: () => setIsOpen(true),
              type: "button",
              "aria-label": `–ü–æ–º–æ—â—å –ø–æ —Ç–µ–º–µ: ${topic}`
            }, "?"),
            
            isOpen && React.createElement(HelperModal, {
              topic: topic,
              onClose: () => setIsOpen(false)
            })
          );
        }
        
        function HelperModal({ topic, onClose }) {
          const content = HELPER_CONTENT[topic];
          if (!content) return null;
          
          return React.createElement(CenterModal, {
            open: true,
            onClose: onClose,
            title: content.title,
            "aria-label": `–ü–æ–º–æ—â–Ω–∏–∫: ${content.title}`,
            footRight: React.createElement("button", {
              className: "btn primary",
              onClick: onClose
            }, "–ü–æ–Ω—è—Ç–Ω–æ, –Ω–∞—á–∏–Ω–∞—é!")
          }, 
            React.createElement("div", { className: "helper-content" },
              content.sections.map((section, index) => {
                switch (section.type) {
                  case "intro":
                    return React.createElement("div", { 
                      key: index,
                      className: "helper-section intro" 
                    },
                      React.createElement("p", { className: "helper-text" }, section.text)
                    );
                    
                  case "example":
                    return React.createElement("div", {
                      key: index,
                      className: "helper-section example"
                    },
                      React.createElement("h4", null, section.title),
                      React.createElement("p", { className: "helper-text" }, section.text)
                    );
                    
                  case "insight":
                    return React.createElement("div", {
                      key: index,
                      className: "helper-section insight"
                    },
                      React.createElement("h4", null, section.title),
                      React.createElement("p", { className: "helper-text" }, section.text)
                    );
                    
                  case "checklist":
                    return React.createElement("div", {
                      key: index,
                      className: "helper-section checklist"
                    },
                      React.createElement("h4", null, section.title),
                      React.createElement("ul", { className: "helper-list" },
                        section.items.map((item, i) => 
                          React.createElement("li", { key: i }, item)
                        )
                      )
                    );
                    
                  default:
                    return null;
                }
              })
            )
          );
        }
        
        const HELPER_CONTENT = {
          targetAudience: {
            title: "–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è: –≤–∏–¥–µ—Ç—å –ª—é–¥–µ–π, –∞ –Ω–µ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤",
            sections: [
              {
                type: "intro",
                text: "–ö–æ–≥–¥–∞ –º—ã –≥–æ–≤–æ—Ä–∏–º –æ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –º—ã –Ω–µ –≥–æ–≤–æ—Ä–∏–º –æ ¬´–ø–∞—Å—Å–∞–∂–∏—Ä–∞—Ö¬ª –∏–ª–∏ ¬´–∂–∏—Ç–µ–ª—è—Ö –ú–æ—Å–∫–≤—ã¬ª. –ú—ã –≥–æ–≤–æ—Ä–∏–º –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ª—é–¥—è—Ö ‚Äî —Å –∏–º–µ–Ω–∞–º–∏, —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏, —Å –¥–µ—Ç—å–º–∏ –≤ –∫–æ–ª—è—Å–∫–∞—Ö, —Å –±–æ–ª—å–Ω—ã–º–∏ –Ω–æ–≥–∞–º–∏, —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ 2018 –≥–æ–¥–∞, —Å –±–æ—è–∑–Ω—å—é –æ–ø–æ–∑–¥–∞—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É, —Å —Ç–µ–º, —á—Ç–æ –æ–Ω–∏ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª–∏ –≤—Å—ë, —á—Ç–æ –º–æ–∂–Ω–æ ‚Äî –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ."
              },
              {
                type: "intro", 
                text: "–≠—Ç–æ –Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –∏–∑ –æ—Ç—á—ë—Ç–æ–≤. –ù–µ —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –º–µ—Ç—Ä–æ. –ù–µ ¬´–≤—Å–µ, –∫—Ç–æ –ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–±—É—Å–∞–º–∏¬ª."
              },
              {
                type: "intro",
                text: "–≠—Ç–æ ‚Äî –ª—é–¥–∏. –ò –µ—Å–ª–∏ –≤—ã –∏—Ö –Ω–µ –≤–∏–¥–∏—Ç–µ ‚Äî –≤–∞—à–∞ –∏–¥–µ—è, –∫–∞–∫ –±—ã –æ–Ω–∞ –Ω–∏ –±—ã–ª–∞ –≥–µ–Ω–∏–∞–ª—å–Ω–æ–π, –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ –±—É–º–∞–≥–µ. –ü–æ—Ç–æ–º—É —á—Ç–æ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ ‚Äî –Ω–µ –ø—Ä–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –û–Ω–∏ –ø—Ä–æ –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –¥–æ–±—Ä–∞—Ç—å—Å—è."
              },
              {
                type: "example",
                title: "üëµ –ü–µ–Ω—Å–∏–æ–Ω–µ—Ä–∫–∞ –ú–∞—Ä–∏—è, 71 –≥–æ–¥, –∂–∏–≤—ë—Ç –≤ –í–∏–¥–Ω–æ–º",
                text: "–£ –Ω–µ—ë –Ω–µ—Ç —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ ‚Äî –µ—Å—Ç—å –∫–Ω–æ–ø–æ—á–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –∑–≤–æ–Ω–∏—Ç, –Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –û–Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –µ–∑–¥–∏—Ç –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ ‚Ññ 555 –¥–æ —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ ¬´–ö—É–Ω—Ü–µ–≤—Å–∫–∞—è¬ª ‚Äî —á—Ç–æ–±—ã —Å—Ö–æ–¥–∏—Ç—å –∫ –≤—Ä–∞—á—É, –∫—É–ø–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–∞, —Å—Ö–æ–¥–∏—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω. –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî —Å—Ç–∞—Ä–æ–µ, –≤—ã—Ü–≤–µ—Ç—à–µ–µ, –Ω–∞–ø–∏—Å–∞–Ω–æ —Ä—É—á–∫–æ–π –≤ 2020 –≥–æ–¥—É. –û–Ω–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞ 30 –º–∏–Ω—É—Ç –¥–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—á–µ—Ä–∞ –∞–≤—Ç–æ–±—É—Å –ø—Ä–∏—à—ë–ª —á–µ—Ä–µ–∑ 22 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, –∞ –≤ –ø–æ–∑–∞–≤—á–µ—Ä–∞ ‚Äî –Ω–µ –ø—Ä–∏—à—ë–ª –≤–æ–æ–±—â–µ. –û–Ω–∞ –Ω–µ –∂–∞–ª—É–µ—Ç—Å—è. –û–Ω–∞ –ø—Ä–æ—Å—Ç–æ —Ç–µ—Ä–ø–∏—Ç."
              },
              {
                type: "insight",
                title: "üí° –ß—Ç–æ —Ö–æ—á–µ—Ç –ú–∞—Ä–∏—è?",
                text: "–ù–µ ¬´–≥–æ–ª–æ—Å–æ–≤–æ–µ —Ç–∞–±–ª–æ –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ¬ª, –∞ ¬´—á—Ç–æ–±—ã –∫—Ç–æ-–Ω–∏–±—É–¥—å –≥—Ä–æ–º–∫–æ —Å–∫–∞–∑–∞–ª, –∫–æ–≥–¥–∞ –∞–≤—Ç–æ–±—É—Å –ø–æ–¥—ä–µ–¥–µ—Ç. –ß—Ç–æ–± —è —Å–ª—ã—à–∞–ª–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –≤–∏–∂—É¬ª."
              },
              {
                type: "example",
                title: "üë©‚Äçüëß‚Äçüë¶ –ú–æ–ª–æ–¥–∞—è –º–∞–º–∞ –ï–ª–µ–Ω–∞, 32 –≥–æ–¥–∞",
                text: "–†–∞–±–æ—Ç–∞–µ—Ç –≤ –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–µ –Ω–∞ ¬´–ü–∞—Ä–∫–µ –ü–æ–±–µ–¥—ã¬ª. –£ –Ω–µ—ë ‚Äî –¥–≤–æ–π–Ω—è. –î–≤–∞ —Ä–µ–±—ë–Ω–∫–∞ –ø–æ –≥–æ–¥–∏–∫–∞. –û–±–∞ ‚Äî –≤ –∫–æ–ª—è—Å–∫–∞—Ö. –û–Ω–∞ –µ–∑–¥–∏—Ç –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∫–µ ‚Ññ 32 –æ—Ç ¬´–ë—Ä–∞—Ç–∏—Å–ª–∞–≤—Å–∫–æ–π¬ª –¥–æ ¬´–ú–æ–ª–æ–¥—ë–∂–Ω–æ–π¬ª, –ø–æ—Ç–æ–º –Ω–∞ –º–µ—Ç—Ä–æ, –ø–æ—Ç–æ–º —Å–Ω–æ–≤–∞ –Ω–∞ –∞–≤—Ç–æ–±—É—Å. –ö–æ–ª—è—Å–∫–∏ –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è –Ω–∞ —ç—Å–∫–∞–ª–∞—Ç–æ—Ä–∞—Ö ‚Äî –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ, –Ω–µ—Å—Ç–∏ –¥–≤—É—Ö –¥–µ—Ç–µ–π, —Ç–∞—â–∏—Ç—å —Å—É–º–∫—É —Å –ø–æ–¥–≥—É–∑–Ω–∏–∫–∞–º–∏, –±—É—Ç—ã–ª–æ—á–∫–∞–º–∏, –ø–µ–ª—ë–Ω–∫–∞–º–∏. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: ¬´–°–≤–æ–±–æ–¥–Ω–æ¬ª. –ù–∞ –¥–µ–ª–µ ‚Äî ¬´–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ –¥–æ –ø–æ—Ç–æ–ª–∫–∞¬ª. –û–Ω–∞ –±–æ–∏—Ç—Å—è –æ–ø–æ–∑–¥–∞—Ç—å ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—Å–ª–∏ –æ–ø–æ–∑–¥–∞–µ—Ç, –µ—ë —É–≤–æ–ª—è—Ç. –û–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ —Ç–∞–∫—Å–∏ ‚Äî –∑–∞—Ä–ø–ª–∞—Ç–∞ 65 000‚ÇΩ, –∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç ‚Äî —ç—Ç–æ 10% –±—é–¥–∂–µ—Ç–∞."
              },
              {
                type: "insight", 
                title: "üí° –ß—Ç–æ –Ω—É–∂–Ω–æ –ï–ª–µ–Ω–µ?",
                text: "–ù–µ ¬´—É–ª—É—á—à–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –∑–∞–≥—Ä—É–∑–∫–∏¬ª, –∞ ¬´—á—Ç–æ–±—ã –∞–≤—Ç–æ–±—É—Å –±—ã–ª –Ω–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω. –ò —á—Ç–æ–±—ã –º–Ω–µ –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –Ω–µ—Å—Ç–∏ –¥–≤–µ –∫–æ–ª—è—Å–∫–∏ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ¬ª."
              },
              {
                type: "example",
                title: "üöï –í–æ–¥–∏—Ç–µ–ª—å —Ç–∞–∫—Å–∏ –°–µ—Ä–≥–µ–π, 47 –ª–µ—Ç", 
                text: "–†–∞–±–æ—Ç–∞–µ—Ç —Å 5 —É—Ç—Ä–∞ –¥–æ 10 –≤–µ—á–µ—Ä–∞. –£ –Ω–µ–≥–æ ‚Äî Samsung Galaxy S8, 2018 –≥–æ–¥–∞, Android 10, –±–∞—Ç–∞—Ä–µ—è –¥–µ—Ä–∂–∏—Ç—Å—è 4 —á–∞—Å–∞. –û–Ω –Ω–µ –ø–æ–ª—å–∑—É–µ—Ç—Å—è ¬´–Ø–Ω–¥–µ–∫—Å.–¢–∞–∫—Å–∏¬ª ‚Äî –∫–æ–º–∏—Å—Å–∏—è 25%. –û–Ω –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç ¬´–ú–æ—Å–∫–æ–≤—Å–∫–æ–º—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É¬ª ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—á–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ: ¬´–ê–≤—Ç–æ–±—É—Å —á–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã¬ª. –ê –æ–Ω –∂–¥–∞–ª ‚Äî 27. –û–Ω –Ω–µ —á–∏—Ç–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. –û–Ω –∑–≤–æ–Ω–∏—Ç —Å–≤–æ–µ–º—É –¥—Ä—É–≥—É-–≤–æ–¥–∏—Ç–µ–ª—é: ¬´–°–µ—Ä—ë–∂, —Ç—ã –ø—Ä–æ–µ–∑–∂–∞–ª –º–∏–º–æ ‚Äû–ö–∏–µ–≤—Å–∫–æ–π‚Äú? –¢–∞–º –ø—Ä–æ–±–∫–∞?¬ª –ò —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å."
              },
              {
                type: "insight",
                title: "üí° –ß—Ç–æ –ø–æ–º–æ–∂–µ—Ç –°–µ—Ä–≥–µ—é?",
                text: "–ù–µ ¬´–Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π¬ª, –∞ ¬´–≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ. –¢–∞–±–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ê–≤—Ç–æ–±—É—Å 555 ‚Äî 5 –º–∏–Ω—É—Ç¬ª. –ü—Ä–æ—Å—Ç–æ. –ì—Ä–æ–º–∫–æ. –ù–∞–¥—ë–∂–Ω–æ.¬ª"
              },
              {
                type: "example",
                title: "‚ôø –î–º–∏—Ç—Ä–∏–π, 39 –ª–µ—Ç, –ø–µ—Ä–µ–¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–ª—è—Å–∫–µ",
                text: "–ñ–∏–≤—ë—Ç –≤ –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥–µ. –ï–º—É –Ω—É–∂–Ω–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ ¬´–ö—Ä–∞—Å–Ω–æ–ø—Ä–µ—Å–Ω–µ–Ω—Å–∫–æ–π¬ª ‚Äî –Ω–∞ –ø—Ä–∏—ë–º –∫ –Ω–µ–≤—Ä–æ–ª–æ–≥—É. –ú–µ—Ç—Ä–æ? ‚Äî –ù–µ—Ç –ª–∏—Ñ—Ç–æ–≤ –Ω–∞ ¬´–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥—Å–∫–æ–π¬ª. –ê–≤—Ç–æ–±—É—Å? ‚Äî –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ –ø–∞–Ω–¥—É—Å–∞. –¢–∞–∫—Å–∏? ‚Äî ¬´–°–ª—É–∂–±–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞¬ª –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞ 3 –¥–Ω—è. –ü—Ä–∏–µ–∑–∂–∞–µ—Ç —Å –æ–ø–æ–∑–¥–∞–Ω–∏–µ–º. –û–Ω —É–∂–µ –Ω–µ –∑–≤–æ–Ω–∏—Ç. –û–Ω –ø—Ä–æ—Å—Ç–æ –Ω–µ –µ–∑–¥–∏—Ç. –ê –µ—Å–ª–∏ —Å—Ä–æ—á–Ω–æ ‚Äî –æ–Ω –ø–ª–∞—Ç–∏—Ç 1 500‚ÇΩ –∑–∞ ¬´–ú–∞—Ä—à—Ä—É—Ç–∫—É¬ª ‚Äî –∏ –ø—Ä–æ—Å–∏—Ç –≤–æ–¥–∏—Ç–µ–ª—è –ø–æ–º–æ—á—å –ø–æ–¥–Ω—è—Ç—å –∫–æ–ª—è—Å–∫—É. –ù–æ –≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ –æ–±—è–∑–∞–Ω."
              },
              {
                type: "insight",
                title: "üí° –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –∂–∏–∑–Ω—å –î–º–∏—Ç—Ä–∏—è?",
                text: "–ù–µ —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è, –∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –≤—Ä–∞—á–∞."
              },
              {
                type: "checklist",
                title: "‚úÖ –ö–∞–∫ –æ–ø–∏—Å–∞—Ç—å —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é?",
                items: [
                  "–û–ø–∏—à–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ (–ú–∞—Ä–∏—è, –ï–ª–µ–Ω–∞, –°–µ—Ä–≥–µ–π, –î–º–∏—Ç—Ä–∏–π)",
                  "–£–∫–∞–∂–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç, –º–µ—Å—Ç–æ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞, –ø—Ä–∏–≤—ã—á–∫–∏", 
                  "–û–ø–∏—à–∏—Ç–µ –µ–≥–æ —Ä–∞—Å–ø–æ—Ä—è–¥–æ–∫ –¥–Ω—è –∏ –º–∞—Ä—à—Ä—É—Ç—ã",
                  "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –æ–Ω —á—É–≤—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞",
                  "–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ –æ–Ω —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª –∏ –ø–æ—á–µ–º—É –Ω–µ –ø–æ–º–æ–≥–ª–æ",
                  "–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –µ–≥–æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –µ–≥–æ —Å–ª–æ–≤–∞–º–∏"
                ]
              },
              {
                type: "intro",
                text: "üìå –ü–æ–º–Ω–∏—Ç–µ: –≤–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –Ω–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî —É–≤–∏–¥–µ—Ç—å –±–æ–ª—å. –ò —Ç–æ–≥–¥–∞ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥—ë—Ç—Å—è —Å–∞–º–æ."
              },
              {
                type: "intro", 
                text: "–í—ã –Ω–µ –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç. –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ –ª—é–¥—è–º –≤—Ä–µ–º—è, –Ω–∞–¥–µ–∂–¥—É –∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ. –ò –¥–ª—è —ç—Ç–æ–≥–æ ‚Äî –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å –≥–µ–Ω–∏–µ–º. –í–∞–º –Ω—É–∂–Ω–æ –±—ã—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–º."
              }
            ]
          },
          problemStatement: {
            title: "–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞: —É–≤–∏–¥–µ—Ç—å –±–æ–ª—å, –∞ –Ω–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É",
            sections: [
              {
                type: "intro",
                text: "–í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞. –í—ã –Ω–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä. –í—ã –Ω–µ —Å—Ç–∞—Ä—Ç–∞–ø–µ—Ä –∏–∑ –ö—Ä–µ–º–Ω–∏–µ–≤–æ–π –¥–æ–ª–∏–Ω—ã. –í—ã ‚Äî —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–æ—Å–∫–æ–≤—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏–∑–Ω—É—Ç—Ä–∏. –ò –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Ö–æ—Ä–æ—à–µ–µ."
              },
              {
                type: "intro",
                text: "–ù–æ‚Ä¶ —á–∞—Å—Ç–æ –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ: –∫–æ–ª–ª–µ–≥–∏ –ø–∏—à—É—Ç: ¬´–ù—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ¬ª. –ò–ª–∏: ¬´–ü–∞—Å—Å–∞–∂–∏—Ä—ã –Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã¬ª. –ê –ø–æ—Ç–æ–º ‚Äî —Ç–∏—à–∏–Ω–∞. –ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å. –ü–æ—á–µ–º—É? –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –Ω–µ –∏—â—É—Ç –ø—Ä–æ–±–ª–µ–º—É. –û–Ω–∏ –∏—â—É—Ç —Ä–µ—à–µ–Ω–∏–µ."
              },
              {
                type: "example",
                title: "üëµ –ú–∞—Ä–∏—è, 72 –≥–æ–¥–∞, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –í–∏–¥–Ω–æ–º",
                text: "–£—Ç—Ä–æ–º, –≤ 7:45, –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ –í–∏–¥–Ω–æ–º ‚Äî —Å—Ç–æ–∏—Ç –∂–µ–Ω—â–∏–Ω–∞. –ù–∞ –Ω–µ–π –ø–∞–ª—å—Ç–æ, –≤ —Ä—É–∫–µ ‚Äî —Å—É–º–∫–∞ —Å –ª–µ–∫–∞—Ä—Å—Ç–≤–∞–º–∏. –û–Ω–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Äî –∏ –æ–Ω–æ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ —Ç–∞–±–ª–æ. –û–Ω–∞ –±–µ—Ä—ë—Ç —Ç–µ–ª–µ—Ñ–æ–Ω ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç¬ª. –ß–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç. –ü–æ—Ç–æ–º—É —á—Ç–æ –∫–Ω–æ–ø–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ. –û–Ω–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–∏—Ç ¬´—á–µ—Ä–µ–∑ 7 –º–∏–Ω—É—Ç¬ª. –û–Ω–∞ –±–æ–∏—Ç—Å—è –æ–ø–æ–∑–¥–∞—Ç—å. –ò –æ–Ω–∞ ‚Äî –ø—Ä–∏—à–ª–∞ –∑–∞ –ø–æ–ª—á–∞—Å–∞. –ü–æ—á–µ–º—É? –ü–æ—Ç–æ–º—É —á—Ç–æ –≤—á–µ—Ä–∞ –∞–≤—Ç–æ–±—É—Å –ø—Ä–∏–µ—Ö–∞–ª —á–µ—Ä–µ–∑ 22 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è. –ê –ø–æ–∑–∞–≤—á–µ—Ä–∞ ‚Äî –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–∏–µ—Ö–∞–ª."
              },
              {
                type: "insight",
                title: "üí° –≠—Ç–æ ‚Äî –Ω–µ ¬´–Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ¬ª. –≠—Ç–æ ‚Äî –±–æ–ª—å.",
                text: "–í—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –≤ –ú–æ—Å–∫–≤–µ –µ—Å—Ç—å —Ç—ã—Å—è—á–∏ —Ç–∞–∫–∏—Ö –ú–∞—Ä–∏–π. –í—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –≤ 2024 –≥–æ–¥—É 43% –ø–æ–∂–∏–ª—ã—Ö –ª—é–¥–µ–π –≤ –ü–æ–¥–º–æ—Å–∫–æ–≤—å–µ –Ω–µ –ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏. –í—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —É 68% –∏–∑ –Ω–∏—Ö ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω —Å—Ç–∞—Ä—à–µ 5 –ª–µ—Ç. –ù–æ –≤—ã ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ –∑–Ω–∞–µ—Ç–µ. –í—ã ‚Äî –º–æ–∂–µ—Ç–µ —á—Ç–æ-—Ç–æ —Å —ç—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å."
              },
              {
                type: "example",
                title: "üë©‚Äçüëß‚Äçüë¶ –ï–ª–µ–Ω–∞, –º–∞–º–∞ —Å –¥–≤—É–º—è –¥–µ—Ç—å–º–∏",
                text: "–û–Ω–∞ ‚Äî –º–∞–º–∞. –î–≤–æ–µ –¥–µ—Ç–µ–π ‚Äî 1 –∏ 3 –≥–æ–¥–∞. –ö–æ–ª—è—Å–∫–∏. –°—É–º–∫–∏. –ü–µ–ª—ë–Ω–∫–∏. –ò –æ–Ω–∞ –µ–¥–µ—Ç –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ ‚Ññ32 ‚Äî —Å –ø–µ—Ä–µ—Å–∞–¥–∫–æ–π. –ù–∞ —ç—Å–∫–∞–ª–∞—Ç–æ—Ä–µ ‚Äî –Ω–µ—Ç –ª–∏—Ñ—Ç–∞. –û–Ω–∞ –Ω–µ—Å—ë—Ç –æ–¥–Ω—É –∫–æ–ª—è—Å–∫—É, –≤—Ç–æ—Ä–∞—è ‚Äî —Å—Ç–æ–∏—Ç –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ. –û–Ω–∞ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É. –û–Ω–∞ –±–æ–∏—Ç—Å—è. –û–Ω–∞ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª–∞ –≤–∑—è—Ç—å —Ç–∞–∫—Å–∏ ‚Äî —ç—Ç–æ 1200‚ÇΩ –≤ –¥–µ–Ω—å. –û–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç."
              },
              {
                type: "insight",
                title: "üöÄ –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?",
                text: "–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ª–∏—Ñ—Ç –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ ¬´–ë—Ä–∞—Ç–∏—Å–ª–∞–≤—Å–∫–∞—è¬ª. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–ª–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–æ –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥–∞. –ù–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –ú–∞—Ä–∏—è –Ω–µ –∂–¥–∞–ª–∞ 30 –º–∏–Ω—É—Ç. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –¥–∏–Ω–∞–º–∏–∫. –ó–∞–ø–∏—Å–∞—Ç—å —Ç—É–¥–∞ –≥–æ–ª–æ—Å: ¬´–ê–≤—Ç–æ–±—É—Å ‚Ññ555 ‚Äî —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç¬ª. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∑–∞ 500 —Ä—É–±–ª–µ–π. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞ 3 –¥–Ω—è."
              },
              {
                type: "checklist",
                title: "‚úÖ –ö–∞–∫ –æ–ø–∏—Å–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫—É?",
                items: [
                  "–û–ø–∏—à–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏ –µ–≥–æ —Å–∏—Ç—É–∞—Ü–∏—é",
                  "–ü–æ–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –æ–Ω —á—É–≤—Å—Ç–≤—É–µ—Ç (—Å—Ç—Ä–∞—Ö, –±–æ–ª—å, —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ)",
                  "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –æ–Ω —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª –∏ –ø–æ—á–µ–º—É –Ω–µ –ø–æ–º–æ–≥–ª–æ",
                  "–£–∫–∞–∂–∏—Ç–µ, –ø–æ—á–µ–º—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç",
                  "–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –µ–≥–æ —Å–ª–æ–≤–∞–º–∏",
                  "–ü–æ–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å (–ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
                ]
              },
              {
                type: "checklist",
                title: "‚ùå –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å:",
                items: [
                  "–ù–µ –ø–∏—Å–∞—Ç—å: ¬´–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ¬ª",
                  "–ù–µ –ø–∏—Å–∞—Ç—å: ¬´–ù—É–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª¬ª", 
                  "–ù–µ –ø–∏—Å–∞—Ç—å: ¬´–ü–∞—Å—Å–∞–∂–∏—Ä—ã –Ω–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã¬ª",
                  "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ —Ñ—Ä–∞–∑—ã –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏"
                ]
              },
              {
                type: "checklist", 
                title: "‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ:",
                items: [
                  "–ù–∞–π—Ç–∏ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ ‚Äî –∏ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –æ–Ω —á—É–≤—Å—Ç–≤—É–µ—Ç",
                  "–°–ø—Ä–æ—Å–∏—Ç—å: ¬´–ß—Ç–æ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏–ª–æ—Å—å ‚Äî –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?¬ª",
                  "–ü—Ä–∏–¥—É–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ 3 –¥–Ω—è, –∑–∞ 500 —Ä—É–±–ª–µ–π",
                  "–û–ø–∏—Å–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Ç–∞–∫, —á—Ç–æ–±—ã –∫–æ–ª–ª–µ–≥–∞ —Å—Ä–∞–∑—É –ø–æ–Ω—è–ª –±–æ–ª—å"
                ]
              },
              {
                type: "intro",
                text: "üìå –ü–æ–º–Ω–∏—Ç–µ: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –º–µ–Ω—è–µ—Ç—Å—è –≥–æ–¥–∞–º–∏. –î–æ–≤–µ—Ä–∏–µ ‚Äî –º–µ–Ω—è–µ—Ç—Å—è –∑–∞ –æ–¥–∏–Ω –∑–≤–æ–Ω–æ–∫. –í—ã –Ω–µ –º–µ–Ω—è–µ—Ç–µ –≥–æ—Ä–æ–¥. –í—ã –º–µ–Ω—è–µ—Ç–µ —Ç–æ, –∫–∞–∫ —á–µ–ª–æ–≤–µ–∫ —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è –≤ –≥–æ—Ä–æ–¥–µ."
              },
              {
                type: "intro",
                text: "–í—ã –Ω–µ –≥–µ–Ω–∏–π. –í—ã –Ω–µ –∏–Ω–∂–µ–Ω–µ—Ä. –í—ã ‚Äî —á–µ–ª–æ–≤–µ–∫. –ò —É –≤–∞—Å –µ—Å—Ç—å —Å–∞–º–∞—è —Å–∏–ª—å–Ω–∞—è —Å–∏–ª–∞ –≤ –º–∏—Ä–µ: –í—ã –≤–∏–¥–∏—Ç–µ. –í—ã —Å–ª—ã—à–∏—Ç–µ. –í—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ –º–∏–º–æ. –ò –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É ‚Äî –ú–æ—Å–∫–≤–∞ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ª—É—á—à–µ."
              }
            ]
          },
          productDescription: {
            title: "–†–µ—à–µ–Ω–∏–µ: –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∂–∏–∑–Ω–∏ —á–µ–ª–æ–≤–µ–∫–∞, –∞ –Ω–µ –ø—Ä–æ–¥—É–∫—Ç",
            sections: [
              {
                type: "intro",
                text: "–†–µ—à–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ. –†–µ—à–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —á–µ–ª–æ–≤–µ–∫–æ–º, –∫–æ–≥–¥–∞ –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç —Å—Ç—Ä–∞–¥–∞—Ç—å."
              },
              {
                type: "intro",
                text: "–≠—Ç–æ –Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ù–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞. –ù–µ —Å–∏—Å—Ç–µ–º–∞. –ù–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ù–µ –∞–ª–≥–æ—Ä–∏—Ç–º. –ù–µ API. –ù–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è. –ù–µ –¥–∞–Ω–Ω—ã–µ. –ù–µ —Ü–∏—Ñ—Ä—ã. –ù–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –≤ PowerPoint."
              },
              {
                type: "intro",
                text: "–≠—Ç–æ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∂–∏–∑–Ω–∏ —á–µ–ª–æ–≤–µ–∫–∞. –ö–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –∂–¥–∞—Ç—å. –ö–æ–≥–¥–∞ –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±–æ—è—Ç—å—Å—è. –ö–æ–≥–¥–∞ –æ–Ω –≤—Å—Ç–∞—ë—Ç —Å –ª–∞–≤–æ—á–∫–∏, –∏–¥—ë—Ç –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî –∏ –∑–Ω–∞–µ—Ç: ¬´–û–Ω –ø—Ä–∏–µ–¥–µ—Ç¬ª. –ö–æ–≥–¥–∞ –æ–Ω –≤–ø–µ—Ä–≤—ã–µ –∑–∞ –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è ‚Äî –Ω–µ —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è –∑–∞–±—ã—Ç—ã–º."
              },
              {
                type: "insight",
                title: "üí° –ü—Ä–æ–¥—É–∫—Ç vs –†–µ—à–µ–Ω–∏–µ",
                text: "–ü—Ä–æ–¥—É–∫—Ç ‚Äî —ç—Ç–æ –≤—Å—ë, —á—Ç–æ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ü—Ä–æ–¥—É–∫—Ç ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –†–µ—à–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ò –µ—Å–ª–∏ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Äî –≤—ã –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —Ç–µ—Ä—è–µ—Ç–µ —Ä–µ—à–µ–Ω–∏–µ. –ü–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–æ–¥—É–∫—Ç ‚Äî —ç—Ç–æ –≤–∞—à–∞ –∏–¥–µ—è. –†–µ—à–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —á—É–∂–∞—è –±–æ–ª—å."
              },
              {
                type: "example",
                title: "üëµ –ú–∞—Ä–∏—è, 72 –≥–æ–¥–∞, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –í–∏–¥–Ω–æ–º",
                text: "–í –ú–æ—Å–∫–≤–µ –µ—Å—Ç—å –±–æ–ª–µ–µ 10 —Ç—ã—Å—è—á –æ—Å—Ç–∞–Ω–æ–≤–æ–∫. –ù–∞ –º–Ω–æ–≥–∏—Ö –∏–∑ –Ω–∏—Ö ‚Äî –Ω–µ—Ç —Ç–∞–±–ª–æ. –ù–∞ –º–Ω–æ–≥–∏—Ö ‚Äî —Ç–∞–±–ª–æ —É—Å—Ç–∞—Ä–µ–ª–æ. –ù–∞ –º–Ω–æ–≥–∏—Ö ‚Äî —Ç–∞–±–ª–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç, –∫–æ–≥–¥–∞ –ø—Ä–∏–µ–¥–µ—Ç. –ù–∞ –º–Ω–æ–≥–∏—Ö ‚Äî –ª—é–¥–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –≤–µ—Ä—è—Ç –µ–º—É. –ò –≤–æ—Ç –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ —ç—Ç–∏—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ ‚Äî —Å—Ç–æ–∏—Ç –∂–µ–Ω—â–∏–Ω–∞. –ï–π 72 –≥–æ–¥–∞. –û–Ω–∞ –∂–∏–≤—ë—Ç –≤ –í–∏–¥–Ω–æ–º. –£ –Ω–µ—ë –ø–µ–Ω—Å–∏—è 21‚ÄØ000 —Ä—É–±–ª–µ–π. –û–Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –µ–∑–¥–∏—Ç –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ ‚Ññ555 ‚Äî —á—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏. –û–Ω–∞ –Ω–µ –ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ù–µ –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —Ö–æ—á–µ—Ç. –ê –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —É–º–µ–µ—Ç. –û–Ω–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –ø–æ—á–µ–º—É –Ω–∞ —ç–∫—Ä–∞–Ω–µ –Ω–∞–ø–∏—Å–∞–Ω–æ ¬´—á–µ—Ä–µ–∑ 7 –º–∏–Ω—É—Ç¬ª, –∞ –∞–≤—Ç–æ–±—É—Å –ø—Ä–∏–µ–∑–∂–∞–µ—Ç —á–µ—Ä–µ–∑ 27. –û–Ω–∞ –Ω–µ –≤–µ—Ä–∏—Ç —Ü–∏—Ñ—Ä–∞–º. –û–Ω–∞ –≤–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–º—É, —á—Ç–æ —Å–ª—ã—à–∏—Ç."
              },
              {
                type: "insight",
                title: "üöÄ –ß—Ç–æ –±—É–¥–µ—Ç —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è –ú–∞—Ä–∏–∏?",
                text: "–ù–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∞ –≥–æ–ª–æ—Å. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ ‚Äî –ø—Ä–æ—Å—Ç–æ–π –¥–∏–Ω–∞–º–∏–∫. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ä–∞–∑ –≤ –ø—è—Ç—å –º–∏–Ω—É—Ç. –ò –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ê–≤—Ç–æ–±—É—Å ‚Ññ555 ‚Äî —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç. –°–ª–µ–¥—É—é—â–∏–π ‚Äî —á–µ—Ä–µ–∑ 15¬ª. –û–Ω–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –Ω–∏—á–µ–≥–æ –Ω–∞–∂–∏–º–∞—Ç—å. –ù–µ –¥–æ–ª–∂–Ω–∞ –Ω–∏—á–µ–≥–æ —Å–∫–∞—á–∏–≤–∞—Ç—å. –ù–µ –¥–æ–ª–∂–Ω–∞ –Ω–∏—á–µ–≥–æ –ø–æ–Ω–∏–º–∞—Ç—å. –û–Ω–∞ –ø—Ä–æ—Å—Ç–æ —Å–ª—ã—à–∏—Ç. –ò –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –∂–¥–∞—Ç—å –∑–∞ –ø–æ–ª—á–∞—Å–∞. –û–Ω–∞ –∏–¥—ë—Ç –≤ –º–∞–≥–∞–∑–∏–Ω. –ü—å—ë—Ç —á–∞–π. –ü–æ—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è ‚Äî –∏ –∞–≤—Ç–æ–±—É—Å —É–∂–µ –Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ."
              },
              {
                type: "insight",
                title: "üíé –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ—à–µ–Ω–∏—è",
                text: "–≠—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. –ù–µ —Ç—Ä–µ–±—É–µ—Ç –±—é–¥–∂–µ—Ç–∞. –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç ‚Äî –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∏—Ç –¥–∏–Ω–∞–º–∏–∫. –ò –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏, —Å–¥–µ–ª–∞–Ω–Ω–æ–π –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ. –ò –æ–¥–Ω–æ–≥–æ –¥–Ω—è, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏. –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–∞—é—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏. –û–Ω–∏ —Ä–µ—à–∞—é—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–º–∏, —Ç–∏—Ö–∏–º–∏, —á–µ–ª–æ–≤–µ—á–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏."
              },
              {
                type: "checklist",
                title: "‚úÖ –ö–∞–∫ –æ–ø–∏—Å–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ?",
                items: [
                  "–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è –∂–∏–∑–Ω—å —á–µ–ª–æ–≤–µ–∫–∞ (–Ω–µ —á—Ç–æ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ, –∞ —á—Ç–æ –æ–Ω –ø–æ—á—É–≤—Å—Ç–≤—É–µ—Ç)",
                  "–ü–æ–∫–∞–∂–∏—Ç–µ, –∫–∞–∫ –∏—Å—á–µ–∑–Ω–µ—Ç –µ–≥–æ –±–æ–ª—å –∏–ª–∏ —Å—Ç—Ä–∞—Ö",
                  "–£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –æ–Ω –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É",
                  "–û–±—ä—è—Å–Ω–∏—Ç–µ, –ø–æ—á–µ–º—É –≤–∞—à —Å–ø–æ—Å–æ–± –ø—Ä–æ—Å—Ç –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞ —É—Å–∏–ª–∏–π",
                  "–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –µ–≥–æ —Å–ª–æ–≤–∞–º–∏"
                ]
              },
              {
                type: "checklist",
                title: "‚ùå –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å:",
                items: [
                  "–ù–µ –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å–∏—Å—Ç–µ–º—ã (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, API)",
                  "–ù–µ –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
                  "–ù–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ –≤—ã —Å–æ–∑–¥–∞–¥–∏—Ç–µ",
                  "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ —Ñ—Ä–∞–∑—ã –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏"
                ]
              },
              {
                type: "checklist",
                title: "‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ:",
                items: [
                  "–û–ø–∏—à–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ —á–µ–ª–æ–≤–µ–∫–∞",
                  "–ü–æ–∫–∞–∂–∏—Ç–µ, –∫–∞–∫ –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Å—Ç—Ä–∞–¥–∞—Ç—å",
                  "–£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –æ–Ω –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–≥–æ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è",
                  "–û–±—ä—è—Å–Ω–∏—Ç–µ, –ø–æ—á–µ–º—É —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –¥–ª—è –Ω–µ–≥–æ"
                ]
              },
              {
                type: "intro",
                text: "üìå –ü–æ–º–Ω–∏—Ç–µ: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—è–µ—Ç—Å—è –≥–æ–¥–∞–º–∏. –õ–∏—Ñ—Ç—ã —Å—Ç–∞–≤—è—Ç —á–µ—Ä–µ–∑ 3 –≥–æ–¥–∞. –ú–∞—Ä—à—Ä—É—Ç—ã –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —á–µ—Ä–µ–∑ 5. –ë—é–¥–∂–µ—Ç—ã —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 8. –ê –¥–æ–≤–µ—Ä–∏–µ ‚Äî –º–µ–Ω—è–µ—Ç—Å—è –∑–∞ –æ–¥–∏–Ω –∑–≤–æ–Ω–æ–∫. –ó–∞ –æ–¥–Ω—É —Ñ—Ä–∞–∑—É. –ó–∞ –æ–¥–∏–Ω –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ê–≤—Ç–æ–±—É—Å —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç¬ª."
              },
              {
                type: "intro",
                text: "–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ ‚Äî –Ω–µ –ø—Ä–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –û–Ω–∏ –ø—Ä–æ —Ç–æ, –∫–∞–∫ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –ª—é–¥—è–º. –í—ã –Ω–µ –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç–µ —Å–µ—Ä–≤–∏—Å. –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ –≤—Ä–µ–º—è. –í—ã –Ω–µ –≤–Ω–µ–¥—Ä—è–µ—Ç–µ —Å–∏—Å—Ç–µ–º—É. –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ. –í—ã –Ω–µ —Å–æ–∑–¥–∞—ë—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –í—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ."
              }
            ]
          }
        };

        /* ====================== Project: —Ñ–æ—Ä–º–∞ —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏ ====================== */
        function ProjectDrawer({ open, onClose, directions, initialProject, onSaveFinal, onSaveDraft }) {
            const isEdit = !!(initialProject && initialProject.id);

            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —à–∞–≥–æ–≤ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
            const [currentStep, setCurrentStep] = useState(1);

            // Fields - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
            const [title, setTitle] = useState("");
            const [teamName, setTeamName] = useState("");
            const [teamMembers, setTeamMembers] = useState([]);
            const [customer, setCustomer] = useState("");
            const [directionName, setDirectionName] = useState("");
            const [directionCode, setDirectionCode] = useState("");
            const [targetAudience, setTargetAudience] = useState("");
            const [effectTags, setEffectTags] = useState([]);
            const [DITTags, setDITTags] = useState([]);
            const [shortDescription, setShortDescription] = useState("");

            // –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
            const [problemStatement, setProblemStatement] = useState("");
            const [businessModel, setBusinessModel] = useState("");
            const [businessModelDescription, setBusinessModelDescription] = useState("");
            const [productDescription, setProductDescription] = useState("");
            const [productType, setProductType] = useState("");

            const [pilotSite, setPilotSite] = useState("");
            const [pilotDataSources, setPilotDataSources] = useState([]);
            const [pilotIntegrations, setPilotIntegrations] = useState([]);
            const [pilotLegal, setPilotLegal] = useState("");
            const [pilotResources, setPilotResources] = useState("");
            const [pilotSteps, setPilotSteps] = useState("");
            const [pilotSuccess, setPilotSuccess] = useState("");

            const [selfChecks, setSelfChecks] = useState([]);
            const [selfNotes, setSelfNotes] = useState([]);
            const [errors, setErrors] = useState({});

            // –ù–û–í–û–ï –°–û–°–¢–û–Ø–ù–ò–ï: –≤—ã–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–µ–π—Å–∞
            const [selectedOpenCase, setSelectedOpenCase] = useState("");

            // –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            const assessmentProgress = useMemo(() => {
                return computeAssessmentProgress({
                    title,
                    teamName,
                    shortDescription,
                    directionName,
                    customer,
                    selectedOpenCase, // –ù–û–í–û–ï –ü–û–õ–ï
                    targetAudience,
                    problemStatement,
                    businessModel,
                    businessModelDescription,
                    productType,
                    productDescription,
                    pilot: {
                        site: pilotSite,
                        resources: pilotResources,
                        stepsPlan: pilotSteps
                    }
                });
            }, [title, teamName, shortDescription, directionName, customer, selectedOpenCase, targetAudience, 
                problemStatement, businessModel, businessModelDescription, productDescription,
                pilotSite, pilotResources, pilotSteps]);

            const dirObj = useMemo(() => directions.find((d) => d.name === directionName), [directions, directionName]);
            const reqs = (dirObj?.requirements ?? []);

            // –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ —á–µ–∫–æ–≤/–∑–∞–º–µ—Ç–æ–∫ –ø–æ–¥ –¥–ª–∏–Ω—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π + –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
            useEffect(() => {
                if (!open) return;
                if (isEdit && initialProject) {
                    setTitle(initialProject.title || "");
                    setTeamName(initialProject.teamName || "");
                    setTeamMembers(initialProject.teamMembers || []);
                    setCustomer(initialProject.customer || "");
                    setDirectionName(initialProject.directionName || "");
                    setDirectionCode(initialProject.directionCode || "");
                    setTargetAudience(Array.isArray(initialProject.targetAudience) ? initialProject.targetAudience.join(", ") : initialProject.targetAudience || "");
                    setEffectTags(initialProject.effectTags || []);
                    setDITTags(initialProject.DITTags || []);
                    setShortDescription(initialProject.shortDescription || "");
                    
                    // –ù–û–í–û–ï –ü–û–õ–ï
                    setSelectedOpenCase(initialProject.selectedOpenCase || "");
                    
                    // –ù–æ–≤—ã–µ –ø–æ–ª—è
                    setProblemStatement(initialProject.problemStatement || "");
                    setBusinessModel(initialProject.businessModel || "");
                    setBusinessModelDescription(initialProject.businessModelDescription || "");
                    setProductDescription(initialProject.productDescription || "");
                    setProductType(initialProject.productType || "");
                    
                    const p = initialProject.pilot || {};
                    setPilotSite(p.site || "");
                    setPilotDataSources(p.dataSources || []);
                    setPilotIntegrations(p.integrations || []);
                    setPilotLegal(p.legalApprovals || "");
                    setPilotResources(p.resources || "");
                    setPilotSteps(p.stepsPlan || "");
                    setPilotSuccess(p.successCriteria || "");
                    const d = directions.find((dd) => dd.name === initialProject.directionName);
                    const len = (d?.requirements ?? []).length;
                    const sa = (initialProject.selfAssessment || []).slice(0, len);
                    while (sa.length < len) sa.push(false);
                    setSelfChecks(sa);
                    const notes = Array.isArray(initialProject.selfAssessmentNotes)
                        ? initialProject.selfAssessmentNotes.slice(0, len)
                        : [];
                    while (notes.length < len) notes.push("");
                    setSelfNotes(notes);
                } else if (open) {
                    // reset
                    setTitle("");
                    setTeamName("");
                    setTeamMembers([]);
                    setCustomer("");
                    setDirectionName("");
                    setDirectionCode("");
                    setTargetAudience([]);
                    setEffectTags([]);
                    setDITTags([]);
                    setShortDescription("");
                    
                    // –ù–û–í–û–ï –ü–û–õ–ï
                    setSelectedOpenCase("");
                    
                    // –ù–æ–≤—ã–µ –ø–æ–ª—è
                    setProblemStatement("");
                    setBusinessModel("");
                    setBusinessModelDescription("");
                    setProductDescription("");
                    
                    setPilotSite("");
                    setPilotDataSources([]);
                    setPilotIntegrations([]);
                    setPilotLegal("");
                    setPilotResources("");
                    setPilotSteps("");
                    setPilotSuccess("");
                    setSelfChecks([]);
                    setSelfNotes([]);
                    setCurrentStep(1);
                }
                setErrors({});
            }, [open, isEdit, initialProject, directions]);

            const onDirectionChange = (name) => {
                setDirectionName(name);
                const d = directions.find((x) => x.name === name);
                setDirectionCode(d?.code || "");
                if (effectTags.length === 0 && (d?.recommendedEffects || []).length > 0) {
                    setEffectTags(d.recommendedEffects);
                }
                const len = (d?.requirements ? d.requirements : []).length;
                setSelfChecks(Array.from({ length: len }, () => false));
                setSelfNotes(Array.from({ length: len }, () => ""));
            };

            const computed = useMemo(() => {
                const proj = {
                    title,
                    customer,
                    directionName,
                    directionCode,
                    targetAudience,
                    effectTags,
                    DITTags,
                    shortDescription,
                    // –ù–û–í–û–ï –ü–û–õ–ï
                    selectedOpenCase,
                    problemStatement,
                    businessModel,
                    businessModelDescription,
                    productDescription,
                    pilot: {
                        site: pilotSite,
                        dataSources: pilotDataSources,
                        integrations: pilotIntegrations,
                        legalApprovals: pilotLegal,
                        resources: pilotResources,
                        stepsPlan: pilotSteps,
                        successCriteria: pilotSuccess,
                    },
                    selfAssessmentNotes: selfNotes,
                };
                const fit = computeFitScore(proj, directions);
                const pilot = computePilotReadiness(proj);
                const idea = computeIdeaAdequacy(proj, dirObj || undefined);
                return { fit, pilot, idea };
            }, [
                title,
                customer,
                directionName,
                directionCode,
                targetAudience,
                effectTags,
                DITTags,
                shortDescription,
                selectedOpenCase, // –ù–û–í–û–ï –ü–û–õ–ï
                problemStatement,
                businessModel,
                businessModelDescription,
                productDescription,
                pilotSite,
                pilotDataSources,
                pilotIntegrations,
                pilotLegal,
                pilotResources,
                pilotSteps,
                pilotSuccess,
                selfNotes,
                directions,
                dirObj,
            ]);

            const notesOkFlags = reqs.map((_, i) => {
                const n = (selfNotes[i] || "").trim();
                return n.length >= MIN_NOTE_CHARS && !isTrivialNote(n);
            });
            const allChecked = reqs.length > 0 ? reqs.every((_, i) => !!selfChecks[i]) : true;
            const allNotesOk = reqs.length > 0 ? notesOkFlags.every(Boolean) : true;
            const allNotesEmpty = reqs.length > 0 ? notesOkFlags.filter(Boolean).length === 0 : true;

            const pilotTriadCount = [
                (pilotSite || "").trim() !== "",
                (pilotDataSources || []).length > 0,
                (pilotIntegrations || []).length > 0,
            ].filter(Boolean).length;

            // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ¬´–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥¬ª
            const nextSteps = [];
            // –ù–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ö–∞—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
                const confirmedCount = selfChecks.filter(Boolean).length;
                const qualityNotesCount = selfNotes.filter(note => 
                  note && note.trim().length >= MIN_NOTE_CHARS && !isTrivialNote(note)
                ).length;
                
                if (confirmedCount < reqs.length) {
                  nextSteps.push(`–û—Ç–º–µ—Ç—å—Ç–µ –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (${confirmedCount}/${reqs.length} –≥–∞–ª–æ—á–µ–∫)`);
                }
                
                if (qualityNotesCount < reqs.length) {
                  nextSteps.push(`–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (${qualityNotesCount}/${reqs.length} —Ç–µ–∫—Å—Ç–æ–≤)`);
                }
                
                // –°–¢–ê–†–´–ï –ü–†–û–í–ï–†–ö–ò (–æ—Å—Ç–∞–≤–ª—è–µ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
                if (!pilotSite.trim()) nextSteps.push("–ù–∞–∑–æ–≤–∏—Ç–µ –ø–ª–æ—â–∞–¥–∫—É –ø–∏–ª–æ—Ç–∞ (–º–∞—Ä—à—Ä—É—Ç/–¥–µ–ø–æ/—Å—Ç–∞–Ω—Ü–∏—è)");
                if ((pilotDataSources || []).length === 0) nextSteps.push("–î–æ–±–∞–≤—å—Ç–µ 1 –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã/CRM –∂–∞–ª–æ–±)");
                if ((pilotIntegrations || []).length === 0) nextSteps.push("–î–æ–±–∞–≤—å—Ç–µ 1 —Å–∏—Å—Ç–µ–º—É/API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∏–ª–ª–∏–Ω–≥/—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è)");
                if (computed.fit < 20) nextSteps.push("–£—Ç–æ—á–Ω–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã/–∑–∞–∫–∞–∑—á–∏–∫–∞ (–ø–æ–≤—ã—Å–∏—Ç Fit)");
                
                const nextStepsUnique = Array.from(new Set(nextSteps)).slice(0, 3);

            const validateBase = () => {
                const e = {};
                if (!title.trim()) e.title = "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞.";
                if (!teamName.trim()) e.teamName = "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã.";
                if (!customer) e.customer = "–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑—á–∏–∫–∞.";
                if (!directionName) e.directionName = "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.";
                setErrors(e);
                return Object.keys(e).length === 0;
            };

            const submit = (status) => {
                if (status === "–≥–æ—Ç–æ–≤") {
                    if (!validateBase() || !allChecked || !allNotesOk || computed.fit < FIT_MIN || computed.pilot < PILOT_MIN) {
                        return;
                    }
                }
                const id = isEdit && initialProject ? initialProject.id : uuid();
                const base = {
                    id,
                    title,
                    teamName,
                    teamMembers,
                    customer,
                    directionName,
                    directionCode,
                    targetAudience,
                    effectTags,
                    DITTags,
                    shortDescription,
                    // –ù–û–í–û–ï –ü–û–õ–ï
                    selectedOpenCase,
                    // –ù–æ–≤—ã–µ –ø–æ–ª—è
                    problemStatement,
                    businessModel,
                    businessModelDescription,
                    productType,
                    productDescription,
                    pilot: {
                        site: pilotSite,
                        dataSources: pilotDataSources,
                        integrations: pilotIntegrations,
                        legalApprovals: pilotLegal,
                        resources: pilotResources,
                        stepsPlan: pilotSteps,
                        successCriteria: pilotSuccess,
                    },
                    selfAssessment: selfChecks.slice(),
                    selfAssessmentNotes: selfNotes.slice(),
                    selfAssessmentPassed: allChecked,
                    fitScore: 0,
                    pilotReadiness: 0,
                    ideaAdequacy: 0,
                    status,
                };
                base.fitScore = computeFitScore(base, directions);
                base.pilotReadiness = computePilotReadiness(base);
                const dir = directions.find((d) => d.name === base.directionName);
                base.ideaAdequacy = computeIdeaAdequacy(base, dir);
                if (status === "–≥–æ—Ç–æ–≤") onSaveFinal(base);
                else onSaveDraft(base);
                onClose();
            };

            const unmet = [];
            if (!allChecked) unmet.push("–û—Ç–º–µ—Ç—å—Ç–µ –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è");
            if (!allNotesOk) unmet.push("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è –ø–æ–¥ –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç (‚â• 20 —Å–∏–º–≤–æ–ª–æ–≤)");
            if (computed.fit < FIT_MIN) unmet.push(`–¢—Ä–µ–±—É–µ—Ç—Å—è Fit ‚â• ${FIT_MIN}%`);
            if (computed.pilot < PILOT_MIN) unmet.push(`–¢—Ä–µ–±—É–µ—Ç—Å—è Pilot ‚â• ${PILOT_MIN}%`);

            const baseFieldsOk =
                (title || "").trim().length > 0 &&
                (teamName || "").trim().length > 0 &&
                !!customer &&
                !!directionName;
            const canSave = baseFieldsOk && allChecked && allNotesOk && computed.fit >= FIT_MIN && computed.pilot >= PILOT_MIN;

            // –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∞–º/—Ç–µ–≥–∞–º
            const effSugg = suggestEffects(title, shortDescription).filter((t) => !effectTags.includes(t));
            const ditSugg = suggestDITTags(title, shortDescription).filter((t) => !DITTags.includes(t));

            // –ü—Ä–µ—Å–µ—Ç—ã –¥–ª—è –ø–∏–ª–æ—Ç–∞
            const dsPresets = computePresetDataSources(effectTags, directionName).filter((x) => !pilotDataSources.includes(x));
            const intPresets = computePresetIntegrations(effectTags, directionName).filter((x) => !pilotIntegrations.includes(x));

            // –†–µ–Ω–¥–µ—Ä —à–∞–≥–æ–≤ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
            const renderStep = (step) => {
                switch(step) {
                    case 1:
                        return React.createElement("div", { className: "assessment-block" + (assessmentProgress.base === 100 ? " completed" : "") },
                            React.createElement("h3", { style: { marginTop: 0 } }, "1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"),
                            React.createElement("div", { className: "small", style: { marginBottom: 16 } }, 
                                "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ. –ë–µ–∑ —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–∞–º."),
                            
                            React.createElement("div", { className: "row cols-2" },
                                React.createElement("div", { className: "field-group" },
                                    React.createElement("div", { className: "label required" }, "–ù–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏"),
                                    React.createElement("input", {
                                        className: "input",
                                        value: title,
                                        onChange: (e) => setTitle(e.target.value),
                                        placeholder: "–ö—Ä–∞—Ç–∫–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞"
                                    })
                                ),
                                React.createElement("div", { className: "field-group" },
                                    React.createElement("div", { className: "label required" }, "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã"),
                                    React.createElement("input", {
                                        className: "input",
                                        value: teamName,
                                        onChange: (e) => setTeamName(e.target.value),
                                        placeholder: "–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
                                    })
                                )
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label required" }, "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞"),
                                React.createElement("textarea", {
                                    className: "input textarea",
                                    value: shortDescription,
                                    onChange: (e) => setShortDescription(e.target.value),
                                    placeholder: "–û–ø–∏—à–∏—Ç–µ —Å—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞, –æ—Å–Ω–æ–≤–Ω—É—é –∏–¥–µ—é –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å"
                                })
                            ),
                            
                            React.createElement(TagsInput, {
                                label: "–ö–æ–º–∞–Ω–¥–∞ ‚Äî –§–ò–û —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤",
                                values: teamMembers,
                                setValues: setTeamMembers,
                                placeholder: "–î–æ–±–∞–≤—å—Ç–µ –§–ò–û –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                                ariaLabel: "–ö–æ–º–∞–Ω–¥–∞ ‚Äî –§–ò–û —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
                            })
                        );
                    
                    case 2:
                        return React.createElement("div", { className: "assessment-block" + (assessmentProgress.usefulness === 100 ? " completed" : "") },
                            React.createElement("h3", { style: { marginTop: 0 } }, "2. –û—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏"),
                            React.createElement("div", { className: "small", style: { marginBottom: 16 } }, 
                                "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∑–∞–∫–∞–∑—á–∏–∫–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞."),
                            
                            React.createElement("div", { className: "row cols-2" },
                                React.createElement("div", { className: "field-group" },
                                    React.createElement("div", { className: "label required" }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                                    React.createElement("select", {
                                        className: "select",
                                        value: directionName,
                                        onChange: (e) => onDirectionChange(e.target.value)
                                    }, React.createElement("option", { value: "" }, "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                                    directions
                                        .filter(d => !d.archived) // ‚Üê –î–û–ë–ê–í–õ–Ø–ï–ú –§–ò–õ–¨–¢–†–ê–¶–ò–Æ
                                        .map((d) =>
                                            React.createElement("option", { key: d.code, value: d.name }, d.name)
                                    ))
                                ),
                                React.createElement("div", { className: "field-group" },
                                    React.createElement("div", { className: "label required" }, "–ó–∞–∫–∞–∑—á–∏–∫"),
                                    React.createElement("select", {
                                        className: "select",
                                        value: customer,
                                        onChange: (e) => setCustomer(e.target.value)
                                    }, React.createElement("option", { value: "" }, "–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑—á–∏–∫–∞"),
                                    CUSTOMERS.map((c) =>
                                        React.createElement("option", { key: c, value: c }, c)
                                    ))
                                )
                            ),
                            
                            // –ù–û–í–´–ô –ë–õ–û–ö: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–µ–π—Å–∞–º
                            dirObj && dirObj.openCases && dirObj.openCases.length > 0 && 
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –∫–µ–π—Å—É"),
                                React.createElement("select", {
                                    className: "select",
                                    value: selectedOpenCase,
                                    onChange: (e) => setSelectedOpenCase(e.target.value)
                                }, 
                                    React.createElement("option", { value: "" }, "–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–µ–π—Å"),
                                    dirObj.openCases.map((caseItem, index) =>
                                        React.createElement("option", { key: index, value: caseItem }, caseItem)
                                    ),
                                    React.createElement("option", { value: "ORIGINAL" }, "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è (–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–µ–π—Å–∞–º)")
                                ),
                                React.createElement("div", { className: "small" },
                                    selectedOpenCase === "ORIGINAL" 
                                        ? "üí° –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–¥–µ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ —Ü–µ–Ω–Ω—ã –¥–ª—è —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã"
                                        : selectedOpenCase 
                                        ? `‚úÖ –†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞: "${selectedOpenCase}"`
                                        : "–í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –≤–∞—à–∞ –∏–¥–µ—è, –∏–ª–∏ –æ—Ç–º–µ—Ç—å—Ç–µ –µ—ë –∫–∞–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é"
                                )
                            ),
                            
                            // –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                            dirObj && React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
                                React.createElement("div", { className: "card" },
                                    React.createElement("div", { className: "card-body" },
                                        React.createElement("div", { className: "small" }, dirObj.description),
                                        (dirObj.openCases || []).length > 0 && React.createElement("div", null,
                                            React.createElement("div", { 
                                                className: "small", 
                                                style: { marginBottom: 4, fontWeight: 600 } 
                                            }, "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã:"),
                                            React.createElement("ul", { className: "list" },
                                                (dirObj.openCases || []).map((c, i) =>
                                                    React.createElement("li", { key: i, className: "small" }, c)
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        );
                    
                    case 3:
                        return React.createElement("div", { className: "assessment-block" + (assessmentProgress.idea >= 60 ? " completed" : "") },
                            React.createElement("h3", { style: { marginTop: 0 } }, "3. –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∏–¥–µ–∏"),
                            React.createElement("div", { className: "small", style: { marginBottom: 16 } }, 
                                "–î–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞."),
                            
                            React.createElement("div", { className: "field-group" },
                              React.createElement("div", { className: "label" }, 
                                "–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è",
                                React.createElement(HelperButton, { topic: "targetAudience" })
                              ),
                              React.createElement("textarea", {
                                className: "input textarea",
                                value: targetAudience,
                                onChange: (e) => setTargetAudience(e.target.value),
                                placeholder: "–¶–ê = –ü–æ–ª + –¶–µ–ª—å + –ú–∞—Ä—à—Ä—É—Ç + –°–ø–µ—Ü–∏—Ñ–∏–∫–∞\n–ü—Ä–∏–º–µ—Ä: –ñ–µ–Ω—â–∏–Ω–∞, –µ–¥–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–∞ –∞–≤—Ç–æ–±—É—Å–µ ‚Ññ555 –æ—Ç –í–∏–¥–Ω–æ–≥–æ –¥–æ –ö—É–Ω—Ü–µ–≤—Å–∫–æ–π, –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä–∫–∞ 72 –ª–µ—Ç –±–µ–∑ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞",
                                style: { minHeight: "80px" }
                              })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                              React.createElement("div", { className: "label" }, 
                                "–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞",
                                React.createElement(HelperButton, { topic: "problemStatement" })
                              ),
                              React.createElement("textarea", {
                                className: "input textarea", 
                                value: problemStatement,
                                onChange: (e) => setProblemStatement(e.target.value),
                                placeholder: "–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç –≤–∞—à –ø—Ä–æ–µ–∫—Ç"
                                })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å"),
                                React.createElement("div", { className: "business-model-options" },
                                    BUSINESS_MODELS.map((model) =>
                                        React.createElement("div", {
                                            key: model,
                                            className: "business-model-option" + (businessModel === model ? " selected" : ""),
                                            onClick: () => setBusinessModel(model)
                                        }, model)
                                    )
                                ),
                                businessModel && React.createElement("textarea", {
                                    className: "input textarea",
                                    value: businessModelDescription,
                                    onChange: (e) => setBusinessModelDescription(e.target.value),
                                    placeholder: "–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–∞—è –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å",
                                    style: { marginTop: 8 }
                                })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞"),
                                React.createElement("select", {
                                    className: "select",
                                    value: productType,
                                    onChange: (e) => setProductType(e.target.value)
                                }, 
                                    React.createElement("option", { value: "" }, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞"),
                                    React.createElement("option", { value: "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" }, "–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"),
                                    React.createElement("option", { value: "–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" }, "–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"),
                                    React.createElement("option", { value: "–î–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" }, "–î–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"),
                                    React.createElement("option", { value: "–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ" }, "–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ"),
                                    React.createElement("option", { value: "–£—Å–ª—É–≥–∞" }, "–£—Å–ª—É–≥–∞"),
                                    React.createElement("option", { value: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞" }, "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞"),
                                    React.createElement("option", { value: "–°–µ—Ä–≤–∏—Å" }, "–°–µ—Ä–≤–∏—Å"),
                                    React.createElement("option", { value: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ" }, "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ"),
                                    React.createElement("option", { value: "–î—Ä—É–≥–æ–µ" }, "–î—Ä—É–≥–æ–µ")
                                )
                            ),

                            React.createElement("div", { className: "field-group" },
                              React.createElement("div", { className: "label" }, 
                                "–†–µ—à–µ–Ω–∏–µ",
                                React.createElement(HelperButton, { topic: "productDescription" })
                              ),
                              React.createElement("textarea", {
                                className: "input textarea", 
                                value: productDescription,
                                onChange: (e) => setProductDescription(e.target.value),
                                placeholder: "–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫ –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç –∑–∞—è–≤–ª–µ–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"
                                })
                            ),
                            
                            // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
                                reqs.length === 0 ? React.createElement("div", { className: "small" }, "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî —á–µ–∫-–ª–∏—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.") :
                                React.createElement("div", null,
                                    React.createElement("div", { className: "sa-meta" },
                                      React.createElement("span", { className: "small" }, "–û—Ç–º–µ—Ç—å—Ç–µ –≥–∞–ª–æ—á–∫–∏ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è."),
                                      React.createElement(Badge, { 
                                        kind: reqs.length > 0 && selfChecks.filter(Boolean).length === reqs.length ? "ok" : "muted" 
                                      }, "–ì–∞–ª–æ—á–∫–∏ ", selfChecks.filter(Boolean).length, "/", reqs.length),
                                      React.createElement(Badge, { 
                                        kind: notesOkFlags.every(Boolean) ? "ok" : "muted" 
                                      }, "–¢–µ–∫—Å—Ç—ã ", notesOkFlags.filter(Boolean).length, "/", reqs.length),
                                      React.createElement(Badge, { 
                                        kind: "accent" 
                                      }, "–ö–∞—á–µ—Å—Ç–≤–æ ", Math.round(computeReqNotesScore({
                                        selfAssessment: selfChecks,
                                        selfAssessmentNotes: selfNotes
                                      }, { requirements: reqs }) || 0), "%")
                                    ),
                                    React.createElement("ul", { className: "sa-list" }, reqs.map((req, idx) => {
                                        const checked = !!selfChecks[idx];
                                        const note = selfNotes[idx] || "";
                                        const noteOk = note.trim().length >= MIN_NOTE_CHARS && !isTrivialNote(note);
                                        const missing = !checked || !noteOk;
                                        const example = REQ_EXAMPLES[req] || DEFAULT_REQ_EXAMPLE;
                                        return React.createElement("li", {
                                            key: idx,
                                            className: "sa-item " + (missing ? "missing" : ""),
                                            title: "–û—Ç–º–µ—Ç—å—Ç–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ"
                                        }, React.createElement("input", {
                                            type: "checkbox",
                                            checked,
                                            onChange: (e) => {
                                                const arr = selfChecks.slice();
                                                arr[idx] = e.target.checked;
                                                setSelfChecks(arr);
                                            },
                                            "aria-label": `–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å: ${req}`
                                        }), React.createElement("div", null,
                                            React.createElement("div", { 
                                                className: "small", 
                                                style: { color: "inherit", marginBottom: 6 } 
                                            }, req),
                                            React.createElement("input", {
                                                className: "input note-input",
                                                value: note,
                                                onChange: (e) => {
                                                    const arr = selfNotes.slice();
                                                    arr[idx] = e.target.value;
                                                    setSelfNotes(arr);
                                                },
                                                placeholder: "–ö–æ—Ä–æ—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ",
                                                "aria-label": `–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ${req}`,
                                                "aria-invalid": !noteOk
                                            }),
                                            React.createElement("div", { 
                                                className: "small", 
                                                style: { marginTop: 4 } 
                                            }, "–ö–æ—Ä–æ—Ç–∫–æ: –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ (1‚Äì2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)."),
                                            React.createElement("div", { 
                                                className: "small", 
                                                style: { marginTop: 2, color: "#334155" } 
                                            }, example)
                                        ));
                                    }))
                                )
                            )
                        );
                    
                    case 4:
                        return React.createElement("div", { className: "assessment-block" + (assessmentProgress.pilot >= 60 ? " completed" : "") },
                            React.createElement("h3", { style: { marginTop: 0 } }, "4. –ü—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ—Å—Ç—å –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"),
                            React.createElement("div", { className: "small", style: { marginBottom: 16 } }, 
                                "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∏–ª–æ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è."),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ì–¥–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                                React.createElement("input", {
                                    className: "input",
                                    value: pilotSite,
                                    onChange: (e) => setPilotSite(e.target.value),
                                    placeholder: "–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞, –º–∞—Ä—à—Ä—É—Ç, —Å—Ç–∞–Ω—Ü–∏—è –∏ —Ç.–¥."
                                })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ö–∞–∫ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                                React.createElement("textarea", {
                                    className: "input textarea",
                                    value: pilotSteps,
                                    onChange: (e) => setPilotSteps(e.target.value),
                                    placeholder: "–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–∏–ª–æ—Ç–∞"
                                })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ó–∞ —Å–∫–æ–ª—å–∫–æ (—Ä–µ—Å—É—Ä—Å—ã –∏ —Å—Ä–æ–∫–∏)"),
                                React.createElement("textarea", {
                                    className: "input textarea",
                                    value: pilotResources,
                                    onChange: (e) => setPilotResources(e.target.value),
                                    placeholder: "–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –±—é–¥–∂–µ—Ç, —Å—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"
                                })
                            ),
                            
                            // –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–∏–ª–æ—Ç–∞ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö"),
                                React.createElement(TagsInput, {
                                    values: pilotDataSources,
                                    setValues: setPilotDataSources,
                                    placeholder: "–î–æ–±–∞–≤—å—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                                    ariaLabel: "–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö"
                                })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–¢–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"),
                                React.createElement(TagsInput, {
                                    values: pilotIntegrations,
                                    setValues: setPilotIntegrations,
                                    placeholder: "–î–æ–±–∞–≤—å—Ç–µ —Å–∏—Å—Ç–µ–º—ã/API –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                                    ariaLabel: "–¢–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
                                })
                            ),
                            
                            React.createElement("div", { className: "field-group" },
                                React.createElement("div", { className: "label" }, "–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞"),
                                React.createElement("textarea", {
                                    className: "input textarea",
                                    value: pilotSuccess,
                                    onChange: (e) => setPilotSuccess(e.target.value),
                                    placeholder: "–ú–µ—Ç—Ä–∏–∫–∏ –∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–∏–ª–æ—Ç–∞"
                                })
                            )
                        );
                    
                    default:
                        return null;
                }
            };

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
            const canProceedToStep = (step) => {
                switch(step) {
                    case 2: // –ö –æ—Ü–µ–Ω–∫–µ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏
                        return title.trim() && teamName.trim() && shortDescription.trim();
                    case 3: // –ö —Å–∞–º–æ–æ—Ü–µ–Ω–∫–µ –∏–¥–µ–∏  
                        return directionName && customer && selectedOpenCase; // –î–û–ë–ê–í–õ–ï–ù selectedOpenCase
                    case 4: // –ö –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
                        return true; // –í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
                    default:
                        return true;
                }
            };

            return React.createElement(CenterModal, {
                open,
                onClose,
                title: isEdit ? "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç" : "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç",
                "aria-label": "–§–æ—Ä–º–∞ –ø—Ä–æ–µ–∫—Ç–∞",
                headExtra: React.createElement("div", { className: "chips" },
                    React.createElement(Badge, { 
                        title: "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é (–∫–µ–π—Å—ã + —ç—Ñ—Ñ–µ–∫—Ç—ã + –∑–∞–∫–∞–∑—á–∏–∫)" 
                    }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ", computed.fit, "%"),
                    React.createElement(Badge, { 
                        title: "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é" 
                    }, "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ", computed.pilot, "%"),
                    React.createElement(Badge, { 
                        title: "–ì–ª—É–±–∏–Ω–∞ –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ –∏–¥–µ–∏ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è + –ø–ª–∞–Ω + –ø—Ä–æ–¥—É–∫—Ç)" 
                    }, "–ü—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ ", computed.idea, "%")
                ),
                footLeft: React.createElement("div", { className: "small" },
                    "–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏: ", assessmentProgress.overall, "%",
                    nextStepsUnique.length > 0 ? " ‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:" : "",
                    nextStepsUnique.length > 0 && React.createElement("ul", { 
                        className: "list", 
                        style: { marginTop: 4 } 
                    }, nextStepsUnique.map((s, i) =>
                        React.createElement("li", { key: i }, s)
                    ))
                ),
                footRight: React.createElement(React.Fragment, null,
                    currentStep > 1 && React.createElement("button", {
                        className: "btn",
                        onClick: () => setCurrentStep(currentStep - 1)
                    }, "–ù–∞–∑–∞–¥"),
                    currentStep < 4 && React.createElement("button", {
                        className: "btn primary",
                        onClick: () => setCurrentStep(currentStep + 1),
                        disabled: !canProceedToStep(currentStep + 1)
                    }, "–î–∞–ª–µ–µ"),
                    currentStep === 4 && React.createElement(React.Fragment, null,
                        React.createElement("button", {
                            className: "btn",
                            onClick: () => submit("—á–µ—Ä–Ω–æ–≤–∏–∫")
                        }, "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫"),
                        React.createElement("button", {
                            className: "btn primary",
                            onClick: () => submit("–≥–æ—Ç–æ–≤"),
                            disabled: !canSave,
                            "aria-disabled": !canSave
                        }, "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")
                    )
                )
            }, 
            // –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
            React.createElement("div", { className: "assessment-progress" },
                React.createElement("div", { 
                    className: "assessment-progress-bar", 
                    style: { width: `${assessmentProgress.overall}%` } 
                })
            ),
            
            // –®–∞–≥–∏ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
            React.createElement("div", { className: "assessment-steps" },
                [1, 2, 3, 4].map(step => 
                    React.createElement("div", {
                        key: step,
                        className: `assessment-step ${currentStep === step ? 'active' : ''} ${assessmentProgress[['base', 'usefulness', 'idea', 'pilot'][step-1]] === 100 ? 'completed' : ''} ${step > 1 && !canProceedToStep(step) ? 'disabled' : ''}`,
                        onClick: () => step <= 1 || canProceedToStep(step) ? setCurrentStep(step) : null
                    }, step)
                )
            ),
            
            // –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞
            renderStep(currentStep),
            
            // –ü—Ä–∏—á–∏–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (—Ç–æ–ª—å–∫–æ –¥–ª—è —à–∞–≥–∞ 4)
            currentStep === 4 && unmet.length > 0 && React.createElement("div", { 
                className: "small", 
                style: { color: "var(--red)" } 
            }, unmet.map((m, i) =>
                React.createElement("div", { key: i }, "‚Ä¢ ", m)
            ))
            );
        }
        /* ====================== –ö–û–ú–ü–û–ù–ï–ù–¢ –¶–ï–ù–¢–†–ê–õ–¨–ù–û–ì–û –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê ====================== */
        function CenterModal({ open, title, onClose, headExtra, children, footLeft, footRight, ariaLabel }) {
          useEffect(() => {
            if (open) {
              const onKey = (e) => {
                if (e.key === "Escape") onClose();
              };
              document.addEventListener("keydown", onKey);
              document.body.style.overflow = 'hidden';
              
              return () => {
                document.removeEventListener("keydown", onKey);
                document.body.style.overflow = '';
              };
            }
          }, [open, onClose]);
        
          if (!open) return null;
        
          return React.createElement("div", { 
            className: "center-modal-backdrop",
          }, 
            React.createElement("div", {
              className: "center-modal",
              role: "dialog",
              "aria-modal": "true",
              "aria-label": ariaLabel || title
            },
              React.createElement("div", { className: "modal-head" },
                React.createElement("h2", null, title),
                React.createElement("div", { style: { display: "flex", alignItems: "center", gap: "12px" } },
                  headExtra,
                  React.createElement("button", {
                    className: "center-modal-close",
                    onClick: onClose,
                    "aria-label": "–ó–∞–∫—Ä—ã—Ç—å"
                  }, "√ó")
                )
              ),
              React.createElement("div", { className: "modal-body" }, children),
              React.createElement("div", { className: "modal-foot" },
                React.createElement("div", null, footLeft),
                React.createElement("div", { style: { display: "flex", gap: "8px" } }, footRight)
              )
            )
          );
        }
        
        /* ====================== –ö–û–ú–ü–û–ù–ï–ù–¢ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –£–î–ê–õ–ï–ù–ò–Ø ====================== */
        function DeleteConfirmationModal({ 
          open, 
          onClose, 
          onConfirm, 
          itemType, 
          itemName, 
          warningMessage 
        }) {
          const [confirmText, setConfirmText] = useState("");
          const [step, setStep] = useState(1); // 1 - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, 2 - –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
          
          // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
          useEffect(() => {
            if (open) {
              setConfirmText("");
              setStep(1);
            }
          }, [open]);
          
          const getItemTypeText = () => {
            switch(itemType) {
              case "direction": return "–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ";
              case "project": return "–ø—Ä–æ–µ–∫—Ç";
              case "ftimProject": return "–ø—Ä–æ–µ–∫—Ç –§–æ–Ω–¥–∞";
              default: return "—ç–ª–µ–º–µ–Ω—Ç";
            }
          };
          
          const handleConfirm = () => {
            if (step === 1) {
              setStep(2);
            } else {
              if (confirmText.toUpperCase() === MIN_CONFIRM_TEXT) {
                onConfirm();
                onClose();
              }
            }
          };
          
          if (!open) return null;
          
          return React.createElement(CenterModal, {
            open: true,
            onClose,
            title: step === 1 ? "‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è" : "üö® –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ",
            "aria-label": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è",
            footRight: React.createElement(React.Fragment, null,
              React.createElement("button", {
                className: "btn",
                onClick: onClose
              }, "–û—Ç–º–µ–Ω–∞"),
              React.createElement("button", {
                className: "btn primary",
                onClick: handleConfirm,
                disabled: step === 2 && confirmText.toUpperCase() !== MIN_CONFIRM_TEXT,
                style: step === 2 && confirmText.toUpperCase() !== MIN_CONFIRM_TEXT ? 
                  { opacity: 0.5, cursor: "not-allowed" } : {}
              }, step === 1 ? "–î–∞–ª–µ–µ" : "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ")
            )
          }, 
            step === 1 ? 
              React.createElement("div", null,
                React.createElement("div", { 
                  style: { 
                    background: "#fffbeb", 
                    border: "1px solid #fde68a", 
                    borderRadius: "8px", 
                    padding: "16px", 
                    marginBottom: "16px" 
                  } 
                },
                  React.createElement("h4", { style: { marginTop: 0, color: "#f59e0b" } }, "–í–Ω–∏–º–∞–Ω–∏–µ!"),
                  React.createElement("p", null, 
                    "–í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å —É–¥–∞–ª–∏—Ç—å ", 
                    React.createElement("strong", null, getItemTypeText()), 
                    ":"
                  ),
                  React.createElement("div", { 
                    style: { 
                      background: "white", 
                      padding: "12px", 
                      borderRadius: "6px", 
                      margin: "12px 0", 
                      borderLeft: "4px solid var(--accent)" 
                    } 
                  },
                    React.createElement("strong", null, itemName)
                  ),
                  warningMessage && 
                    React.createElement("div", { 
                      className: "small", 
                      style: { color: "#ef4444", marginTop: "8px" } 
                    }, warningMessage),
                  React.createElement("div", { className: "small", style: { marginTop: "12px" } },
                    "–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ:", 
                    React.createElement("ul", { className: "list" },
                      React.createElement("li", null, "‚Ä¢ ", React.createElement("strong", null, "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å")),
                      React.createElement("li", null, "‚Ä¢ ", "–£–¥–∞–ª–∏—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"),
                      React.createElement("li", null, "‚Ä¢ ", "–ú–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É")
                    )
                  )
                ),
                React.createElement("div", { className: "small" },
                  "–ù–∞–∂–º–∏—Ç–µ ¬´–î–∞–ª–µ–µ¬ª –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏–ª–∏ ¬´–û—Ç–º–µ–Ω–∞¬ª –¥–ª—è –æ—Ç–∫–∞–∑–∞."
                )
              ) :
              React.createElement("div", null,
                React.createElement("div", { 
                  style: { 
                    background: "#fef2f2", 
                    border: "1px solid #fecaca", 
                    borderRadius: "8px", 
                    padding: "16px", 
                    marginBottom: "16px",
                    textAlign: "center" 
                  } 
                },
                  React.createElement("div", { 
                    style: { 
                      fontSize: "3rem", 
                      marginBottom: "12px" 
                    } 
                  }, "üö®"),
                  React.createElement("h4", { style: { margin: "0 0 12px 0", color: "#ef4444" } }, 
                    "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"
                  ),
                  React.createElement("p", null, 
                    "–í—ã —Ç–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å ", 
                    React.createElement("strong", null, getItemTypeText()), 
                    " ¬´", React.createElement("strong", null, itemName), "¬ª?"
                  )
                ),
                React.createElement("div", { className: "field-group" },
                  React.createElement("div", { className: "label" }, 
                    "–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ ¬´–£–î–ê–õ–ò–¢–¨¬ª –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:"
                  ),
                  React.createElement("input", {
                    className: "input",
                    value: confirmText,
                    onChange: (e) => setConfirmText(e.target.value),
                    placeholder: "–í–≤–µ–¥–∏—Ç–µ –£–î–ê–õ–ò–¢–¨",
                    style: { 
                      textAlign: "center", 
                      fontWeight: "bold",
                      borderColor: confirmText.toUpperCase() === MIN_CONFIRM_TEXT ? 
                        "#10b981" : "#ef4444"
                    }
                  }),
                  React.createElement("div", { 
                    className: "small", 
                    style: { 
                      marginTop: "8px",
                      color: confirmText.toUpperCase() === MIN_CONFIRM_TEXT ? 
                        "#10b981" : "#64748b"
                    } 
                  },
                    confirmText.toUpperCase() === MIN_CONFIRM_TEXT ? 
                      "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ." :
                      "‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ ¬´–£–î–ê–õ–ò–¢–¨¬ª –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ"
                  )
                ),
                React.createElement("div", { 
                  className: "small", 
                  style: { 
                    background: "#f1f5f9", 
                    padding: "12px", 
                    borderRadius: "6px",
                    marginTop: "16px" 
                  } 
                },
                  "–ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏ –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è."
                )
              )
          );
        }
        /* ====================== Direction: —Ä–µ–¥–∞–∫—Ç–æ—Ä ====================== */
        function DirectionDrawer({ open, onClose, initialDirection, onSave }) {
            const [code, setCode] = useState("");
            const [name, setName] = useState("");
            const [description, setDescription] = useState("");
            const [customersRecommended, setCustomersRecommended] = useState([]);
            const [openCases, setOpenCases] = useState([]);
            const [recommendedEffects, setRecommendedEffects] = useState([]);
            const [recommendedTags, setRecommendedTags] = useState([]);
            const [pilotHints, setPilotHints] = useState([]);
            const [stakeholders, setStakeholders] = useState([]);
            const [requirements, setRequirements] = useState([]);

            useEffect(() => {
                if (open && initialDirection) {
                    setCode(initialDirection.code || "");
                    setName(initialDirection.name || "");
                    setDescription(initialDirection.description || "");
                    setCustomersRecommended(initialDirection.customersRecommended || []);
                    setOpenCases(initialDirection.openCases || []);
                    setRecommendedEffects(initialDirection.recommendedEffects || []);
                    setRecommendedTags(initialDirection.recommendedTags || []);
                    setPilotHints(initialDirection.pilotHints || []);
                    setStakeholders(initialDirection.stakeholders || []);
                    setRequirements(initialDirection.requirements || []);
                }
            }, [open, initialDirection]);

            const save = () => {
                const d = {
                    code,
                    name,
                    description,
                    customersRecommended,
                    openCases,
                    recommendedEffects,
                    recommendedTags,
                    pilotHints,
                    stakeholders,
                    requirements,
                };
                onSave(d);
                onClose();
            };

            return React.createElement(CenterModal, {
                open: open && !!initialDirection,
                onClose,
                title: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                footRight: React.createElement(React.Fragment, null,
                    React.createElement("button", { className: "btn", onClick: onClose }, "–û—Ç–º–µ–Ω–∞"),
                    React.createElement("button", { className: "btn primary", onClick: save }, "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")
                )
            }, React.createElement("div", { className: "row cols-2" },
                React.createElement("div", null,
                    React.createElement("div", { className: "label" }, "–ö–æ–¥"),
                    React.createElement("input", {
                        className: "input",
                        value: code,
                        onChange: (e) => setCode(e.target.value)
                    })
                ),
                React.createElement("div", null,
                    React.createElement("div", { className: "label" }, "–ù–∞–∑–≤–∞–Ω–∏–µ"),
                    React.createElement("input", {
                        className: "input",
                        value: name,
                        onChange: (e) => setName(e.target.value)
                    })
                )
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "–û–ø–∏—Å–∞–Ω–∏–µ"),
                React.createElement("textarea", {
                    className: "input textarea",
                    value: description,
                    onChange: (e) => setDescription(e.target.value)
                })
            ), React.createElement(CheckboxList, {
                label: "–†–µ–∫–æ–º. –∑–∞–∫–∞–∑—á–∏–∫–∏",
                items: CUSTOMERS,
                values: customersRecommended,
                setValues: setCustomersRecommended
            }), React.createElement(MultiSelectDropdown, {
                label: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã",
                options: EFFECT_OPTIONS,
                values: recommendedEffects,
                setValues: setRecommendedEffects,
                defs: EFFECT_DEFINITIONS
            }), React.createElement(MultiSelectDropdown, {
                label: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ–≥–∏ –î–ò–¢",
                options: DIT_TAGS,
                values: recommendedTags,
                setValues: setRecommendedTags
            }), React.createElement(TagsInput, {
                label: "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã",
                values: openCases,
                setValues: setOpenCases,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ –∫–µ–π—Å –∏ Enter",
                ariaLabel: "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã"
            }), React.createElement(TagsInput, {
                label: "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–∏–ª–æ—Ç–∞",
                values: pilotHints,
                setValues: setPilotHints,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫—É –∏ Enter",
                ariaLabel: "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–∏–ª–æ—Ç–∞"
            }), React.createElement(TagsInput, {
                label: "–°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã (–æ–ø—Ü.)",
                values: stakeholders,
                setValues: setStakeholders,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ —Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä–∞ –∏ Enter",
                ariaLabel: "–°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã"
            }), React.createElement(TagsInput, {
                label: "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞)",
                values: requirements,
                setValues: setRequirements,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏ Enter",
                ariaLabel: "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è"
            }));
        }

        /* ====================== Direction: —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ ====================== */
        function DirectionCreateDrawer({ open, onClose, onSave }) {
            const [code, setCode] = useState("");
            const [name, setName] = useState("");
            const [description, setDescription] = useState("");
            const [customersRecommended, setCustomersRecommended] = useState([]);
            const [openCases, setOpenCases] = useState([]);
            const [recommendedEffects, setRecommendedEffects] = useState([]);
            const [recommendedTags, setRecommendedTags] = useState([]);
            const [pilotHints, setPilotHints] = useState([]);
            const [stakeholders, setStakeholders] = useState([]);
            const [requirements, setRequirements] = useState([]);
            const [errors, setErrors] = useState({});

            useEffect(() => {
                if (open) {
                    setCode("");
                    setName("");
                    setDescription("");
                    setCustomersRecommended([]);
                    setOpenCases([]);
                    setRecommendedEffects([]);
                    setRecommendedTags([]);
                    setPilotHints([]);
                    setStakeholders([]);
                    setRequirements([]);
                    setErrors({});
                }
            }, [open]);

            const validate = () => {
                const e = {};
                if (!code.trim()) e.code = "–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è";
                if (!name.trim()) e.name = "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è";
                if (!description.trim()) e.description = "–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è";
                setErrors(e);
                return Object.keys(e).length === 0;
            };

            const save = () => {
                if (!validate()) return;
                
                const newDirection = {
                    code: code.trim(),
                    name: name.trim(),
                    description: description.trim(),
                    customersRecommended,
                    openCases,
                    recommendedEffects,
                    recommendedTags,
                    pilotHints,
                    stakeholders,
                    requirements,
                };
                onSave(newDirection);
                onClose();
            };

            return React.createElement(CenterModal, {
                open,
                onClose,
                title: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                "aria-label": "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                footRight: React.createElement(React.Fragment, null,
                    React.createElement("button", { className: "btn", onClick: onClose }, "–û—Ç–º–µ–Ω–∞"),
                    React.createElement("button", { className: "btn primary", onClick: save }, "–°–æ–∑–¥–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ")
                )
            }, React.createElement("div", { className: "row cols-2" },
                React.createElement("div", null,
                    React.createElement("div", { className: "label" }, "‚Ä¢ –ö–æ–¥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
                    React.createElement("input", {
                        className: "input",
                        value: code,
                        onChange: (e) => setCode(e.target.value),
                        placeholder: "–ù–∞–ø—Ä–∏–º–µ—Ä: 9.0",
                        "aria-invalid": !!errors.code,
                        "aria-describedby": errors.code ? "err-code" : undefined
                    }),
                    errors.code && React.createElement("div", { 
                        id: "err-code", 
                        className: "small", 
                        style: { color: "var(--red)" } 
                    }, errors.code)
                ),
                React.createElement("div", null,
                    React.createElement("div", { className: "label" }, "‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
                    React.createElement("input", {
                        className: "input",
                        value: name,
                        onChange: (e) => setName(e.target.value),
                        placeholder: "–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
                        "aria-invalid": !!errors.name,
                        "aria-describedby": errors.name ? "err-name" : undefined
                    }),
                    errors.name && React.createElement("div", { 
                        id: "err-name", 
                        className: "small", 
                        style: { color: "var(--red)" } 
                    }, errors.name)
                )
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
                React.createElement("textarea", {
                    className: "input textarea",
                    value: description,
                    onChange: (e) => setDescription(e.target.value),
                    placeholder: "–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è...",
                    "aria-invalid": !!errors.description,
                    "aria-describedby": errors.description ? "err-desc" : undefined
                }),
                errors.description && React.createElement("div", { 
                    id: "err-desc", 
                    className: "small", 
                    style: { color: "var(--red)" } 
                }, errors.description)
            ), React.createElement(CheckboxList, {
                label: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–∞–∫–∞–∑—á–∏–∫–∏",
                items: CUSTOMERS,
                values: customersRecommended,
                setValues: setCustomersRecommended
            }), React.createElement(MultiSelectDropdown, {
                label: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã",
                options: EFFECT_OPTIONS,
                values: recommendedEffects,
                setValues: setRecommendedEffects,
                defs: EFFECT_DEFINITIONS
            }), React.createElement(MultiSelectDropdown, {
                label: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ–≥–∏ –î–ò–¢",
                options: DIT_TAGS,
                values: recommendedTags,
                setValues: setRecommendedTags
            }), React.createElement(TagsInput, {
                label: "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã",
                values: openCases,
                setValues: setOpenCases,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ –∫–µ–π—Å –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                ariaLabel: "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã"
            }), React.createElement(TagsInput, {
                label: "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–∏–ª–æ—Ç–∞",
                values: pilotHints,
                setValues: setPilotHints,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫—É –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                ariaLabel: "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–∏–ª–æ—Ç–∞"
            }), React.createElement(TagsInput, {
                label: "–°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
                values: stakeholders,
                setValues: setStakeholders,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ —Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                ariaLabel: "–°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã"
            }), React.createElement(TagsInput, {
                label: "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏",
                values: requirements,
                setValues: setRequirements,
                placeholder: "–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ Enter",
                ariaLabel: "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏"
            }), React.createElement("div", { className: "small", style: { color: "var(--muted)" } },
                "–ù–æ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π."
            ));
        }
        
        /* ====================== –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É ====================== */
        function LoginModal({ open, onClose, onLogin }) {
            const [password, setPassword] = useState("");
            const [name, setName] = useState("");
            const [error, setError] = useState("");
        
            const handleLogin = () => {
                if (password === FOUNDATION_PASSWORD) {
                    onLogin(USER_ROLES.FOUNDATION, name || "–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –§–¢–ò–ú");
                    setError("");
                } else if (password.trim() !== "") {
                    setError("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –§–¢–ò–ú");
                } else {
                    // –í—Ö–æ–¥ –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ –±–µ–∑ –ø–∞—Ä–æ–ª—è
                    onLogin(USER_ROLES.PARTICIPANT, name || "–£—á–∞—Å—Ç–Ω–∏–∫ –°—Ç–°—Ç");
                    setError("");
                }
            };
        
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    handleLogin();
                }
            };
        
            return React.createElement(CenterModal, {
                open,
                onClose,
                title: "üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É",
                "aria-label": "–§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É",
                footRight: React.createElement(React.Fragment, null,
                    React.createElement("button", { 
                        className: "btn", 
                        onClick: onClose 
                    }, "–û—Ç–º–µ–Ω–∞"),
                    React.createElement("button", { 
                        className: "btn primary", 
                        onClick: handleLogin 
                    }, "–í–æ–π—Ç–∏")
                )
            }, 
                React.createElement("div", { className: "field-group" },
                    React.createElement("div", { className: "label" }, "üë§ –í–∞—à–µ –∏–º—è"),
                    React.createElement("input", {
                        className: "input",
                        value: name,
                        onChange: (e) => setName(e.target.value),
                        onKeyPress: handleKeyPress,
                        placeholder: "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞"
                    })
                ),
                React.createElement("div", { className: "field-group" },
                    React.createElement("div", { className: "label" }, 
                        "üîí –ü–∞—Ä–æ–ª—å –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –§–¢–ò–ú",
                        React.createElement("div", { className: "small" }, 
                            "–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –≤—Ö–æ–¥–∞ –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ –°—Ç–°—Ç"
                        )
                    ),
                    React.createElement("input", {
                        type: "password",
                        className: "input",
                        value: password,
                        onChange: (e) => setPassword(e.target.value),
                        onKeyPress: handleKeyPress,
                        placeholder: "–¢–æ–ª—å–∫–æ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –§–¢–ò–ú"
                    })
                ),
                error && React.createElement("div", { 
                    className: "small", 
                    style: { color: "var(--red)", marginTop: 8 } 
                }, error),
                
                React.createElement("hr", { className: "sep" }),
                
                React.createElement("div", { className: "small", style: { marginTop: 16 } },
                    React.createElement("strong", null, "üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏:"),
                    React.createElement("ul", { className: "list", style: { marginTop: 8 } },
                        React.createElement("li", null, 
                            "üéì –£—á–∞—Å—Ç–Ω–∏–∫ –°—Ç–°—Ç - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤"
                        ),
                        React.createElement("li", null, 
                            "üè¢ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –§–¢–ò–ú - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º"
                        )
                    )
                ),
                React.createElement("div", { className: "small", style: { marginTop: 12, color: "var(--muted)" } },
                    "üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–ª—è –≤—Ö–æ–¥–∞ –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –Ω–∞–∂–º–∏—Ç–µ '–í–æ–π—Ç–∏'"
                )
            );
        }

        /* ====================== –ü—Ä–æ–µ–∫—Ç—ã –æ—Ç –§–¢–ò–ú ====================== */
        function FTIMProjectDrawer({ open, onClose, directions, initialProject, onSave }) {
            const isEdit = !!(initialProject && initialProject.id);
            
            const [projectName, setProjectName] = useState("");
            const [description, setDescription] = useState("");
            const [currentStatus, setCurrentStatus] = useState("");
            const [pilotSite, setPilotSite] = useState("");
            const [status, setStatus] = useState("");
            const [directionName, setDirectionName] = useState("");
            const [errors, setErrors] = useState({});

            const STATUS_OPTIONS = [
                "–ò–¥–µ—è",
                "–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ", 
                "–ü–∏–ª–æ—Ç",
                "–í–Ω–µ–¥—Ä–µ–Ω–∏–µ",
                "–ó–∞–≤–µ—Ä—à–µ–Ω",
                "–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
            ];

            useEffect(() => {
                if (open) {
                    if (isEdit && initialProject) {
                        setProjectName(initialProject.projectName || "");
                        setDescription(initialProject.description || "");
                        setCurrentStatus(initialProject.currentStatus || "");
                        setPilotSite(initialProject.pilotSite || "");
                        setStatus(initialProject.status || "");
                        setDirectionName(initialProject.directionName || "");
                    } else {
                        setProjectName("");
                        setDescription("");
                        setCurrentStatus("");
                        setPilotSite("");
                        setStatus("");
                        setDirectionName("");
                    }
                    setErrors({});
                }
            }, [open, isEdit, initialProject]);

            const validate = () => {
                const e = {};
                if (!projectName.trim()) e.projectName = "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞";
                if (!directionName) e.directionName = "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ";
                setErrors(e);
                return Object.keys(e).length === 0;
            };

            const save = () => {
                if (!validate()) return;
                
                const ftimProject = {
                    id: isEdit && initialProject ? initialProject.id : uuid(),
                    projectName: projectName.trim(),
                    description: description.trim(),
                    currentStatus: currentStatus.trim(),
                    pilotSite: pilotSite.trim(),
                    status,
                    directionName,
                    updatedAt: new Date().toISOString()
                };
                
                onSave(ftimProject);
                onClose();
            };

            return React.createElement(CenterModal, {
                open,
                onClose,
                title: isEdit ? "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –æ—Ç –§–¢–ò–ú" : "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –æ—Ç –§–¢–ò–ú",
                "aria-label": "–§–æ—Ä–º–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç –§–¢–ò–ú",
                footRight: React.createElement(React.Fragment, null,
                    React.createElement("button", { className: "btn", onClick: onClose }, "–û—Ç–º–µ–Ω–∞"),
                    React.createElement("button", { 
                        className: "btn primary", 
                        onClick: save 
                    }, isEdit ? "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" : "–î–æ–±–∞–≤–∏—Ç—å")
                )
            }, React.createElement("div", null,
                React.createElement("div", { className: "label" }, "‚Ä¢ –ü—Ä–æ–µ–∫—Ç"),
                React.createElement("input", {
                    className: "input",
                    value: projectName,
                    onChange: (e) => setProjectName(e.target.value),
                    placeholder: "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",
                    "aria-invalid": !!errors.projectName,
                    "aria-describedby": errors.projectName ? "err-project" : undefined
                }),
                errors.projectName && React.createElement("div", { 
                    id: "err-project", 
                    className: "small", 
                    style: { color: "var(--red)" } 
                }, errors.projectName)
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "–û–ø–∏—Å–∞–Ω–∏–µ"),
                React.createElement("textarea", {
                    className: "input textarea",
                    value: description,
                    onChange: (e) => setDescription(e.target.value),
                    placeholder: "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞"
                })
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å"),
                React.createElement("textarea", {
                    className: "input textarea",
                    value: currentStatus,
                    onChange: (e) => setCurrentStatus(e.target.value),
                    placeholder: "–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º—ã"
                })
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "–ü–∏–ª–æ—Ç–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞"),
                React.createElement("input", {
                    className: "input",
                    value: pilotSite,
                    onChange: (e) => setPilotSite(e.target.value),
                    placeholder: "–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–∏–ª–æ—Ç–∞"
                })
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "–°—Ç–∞—Ç—É—Å"),
                React.createElement("select", {
                    className: "select",
                    value: status,
                    onChange: (e) => setStatus(e.target.value)
                }, React.createElement("option", { value: "" }, "–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å"),
                STATUS_OPTIONS.map((s) =>
                    React.createElement("option", { key: s, value: s }, s)
                ))
            ), React.createElement("div", null,
                React.createElement("div", { className: "label" }, "‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                React.createElement("select", {
                    className: "select",
                    value: directionName,
                    onChange: (e) => setDirectionName(e.target.value),
                    "aria-invalid": !!errors.directionName,
                    "aria-describedby": errors.directionName ? "err-dir" : undefined
                }, React.createElement("option", { value: "" }, "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                directions
                    .filter(d => !d.archived) // ‚Üê –î–û–ë–ê–í–õ–Ø–ï–ú –§–ò–õ–¨–¢–†–ê–¶–ò–Æ
                    .map((d) =>
                        React.createElement("option", { key: d.code, value: d.name }, d.name)
                )),
                errors.directionName && React.createElement("div", { 
                    id: "err-dir", 
                    className: "small", 
                    style: { color: "var(--red)" } 
                }, errors.directionName)
            ));
        }

        /* ====================== –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ====================== */
        function DirectionsDashboardFixed({ cloudData, onDataRefresh }) {
            const [directions, setDirections] = useState(() => {
              if (cloudData && cloudData.directions) {
                return Array.isArray(cloudData.directions) ? cloudData.directions : [];
              }
              const loaded = loadDirections();
              return Array.isArray(loaded) ? loaded : [];
            });
            
            const [projects, setProjects] = useState(() => {
              if (cloudData && cloudData.projects) {
                return Array.isArray(cloudData.projects) ? cloudData.projects : [];
              }
              const loaded = loadProjects();
              return Array.isArray(loaded) ? loaded : [];
            });
            
            const [ftimProjects, setFtimProjects] = useState(() => {
              if (cloudData && cloudData.ftimProjects) {
                return Array.isArray(cloudData.ftimProjects) ? cloudData.ftimProjects : [];
              }
              const loaded = loadFTIMProjects();
              return Array.isArray(loaded) ? loaded : [];
            });
            const [lastUpdate, setLastUpdate] = useState(new Date());
        
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ cloudData
            useEffect(() => {
                if (cloudData) {
                    setDirections(Array.isArray(cloudData.directions) ? cloudData.directions : []);
                    setProjects(Array.isArray(cloudData.projects) ? cloudData.projects : []);
                    setFtimProjects(Array.isArray(cloudData.ftimProjects) ? cloudData.ftimProjects : []);
                    setLastUpdate(new Date());
                }
            }, [cloudData]);
                        
            /* ====================== –°–û–°–¢–û–Ø–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ====================== */
            const [currentUser, setCurrentUser] = useState(() => {
                try {
                    const role = localStorage.getItem(LS_USER_ROLE);
                    const name = localStorage.getItem(LS_USER_NAME);
                    return role ? { role, name } : null;
                } catch {
                    return null;
                }
            });
            const [showLogin, setShowLogin] = useState(!currentUser);

            const [dataset, setDataset] = useState("directions");
            const [view, setView] = useState("cards");
            const [search, setSearch] = useState("");
            const [directionFilter, setDirectionFilter] = useState("active");
            const debouncedSearch = useDebounced(search, 200);
            const [filterCustomers, setFilterCustomers] = useState([]);
            const [filterEffects, setFilterEffects] = useState([]);
            const [filterDirNames, setFilterDirNames] = useState([]);
            const [filterTags, setFilterTags] = useState([]);

            const [sortKey, setSortKey] = useState("name");
            const [sortDir, setSortDir] = useState("asc");

            const [fitOpen, setFitOpen] = useState(false);
            const [fitItem, setFitItem] = useState(null);

            const [projOpen, setProjOpen] = useState(false);
            const [projEditing, setProjEditing] = useState(null);

            const [dirOpen, setDirOpen] = useState(false);
            const [dirEditing, setDirEditing] = useState(null);

            const [dirCreateOpen, setDirCreateOpen] = useState(false);

            const [ftimProjOpen, setFtimProjOpen] = useState(false);
            const [ftimProjEditing, setFtimProjEditing] = useState(null);
            const [showInstruction, setShowInstruction] = useState(() => {
                try {
                    return localStorage.getItem(LS_INSTRUCTION_KEY) !== "1";
                } catch {
                    return true;
                }
            });
            const dismissInstruction = () => {
                try {
                    localStorage.setItem(LS_INSTRUCTION_KEY, "1");
                } catch {}
                setShowInstruction(false);
            };
            const [manualInstructionOpen, setManualInstructionOpen] = useState(false);
            
            /* ====================== –§–£–ù–ö–¶–ò–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ====================== */
            const handleLogin = (role, name) => {
                const user = { role, name };
                setCurrentUser(user);
                localStorage.setItem(LS_USER_ROLE, role);
                localStorage.setItem(LS_USER_NAME, name);
                setShowLogin(false);
            };
        
            const handleLogout = () => {
                setCurrentUser(null);
                localStorage.removeItem(LS_USER_ROLE);
                localStorage.removeItem(LS_USER_NAME);
                setShowLogin(true);
            };
        
            // –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
            const canEditDirections = currentUser?.role === USER_ROLES.FOUNDATION;
            const canEditFTIMProjects = currentUser?.role === USER_ROLES.FOUNDATION;
            const canEditProjects = !!currentUser; // –õ—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
            
            const directionNamesAll = useMemo(() => 
                directions
                    .filter(d => !d.archived) // ‚Üê –î–û–ë–ê–í–õ–Ø–ï–ú –§–ò–õ–¨–¢–†–ê–¶–ò–Æ
                    .map((d) => d.name), 
                [directions]
            );

            const unified = useMemo(() => {
                if (dataset === "directions") {
                    let filteredDirections = Array.isArray(directions) ? directions : [];
                    
                    // 1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä (–¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –§–æ–Ω–¥–∞)
                    if (currentUser?.role === USER_ROLES.FOUNDATION) {
                        if (directionFilter === "active") {
                            filteredDirections = filteredDirections.filter(d => !d.archived);
                        } else if (directionFilter === "archived") {
                            filteredDirections = filteredDirections.filter(d => d.archived);
                        }
                        // "all" - –Ω–µ —Ñ–∏–ª—å—Ç—Ä—É–µ–º, –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ
                    }
                    
                    // 2. –î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –í–°–ï–ì–î–ê –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ
                    if (currentUser?.role === USER_ROLES.PARTICIPANT) {
                        filteredDirections = filteredDirections.filter(d => !d.archived);
                    }
                    
                    return filteredDirections.map((d) => ({ type: "direction", ...d }));
                }

                else if (dataset === "projects") {
                    let filteredProjects = Array.isArray(projects) ? projects : [];
                    
                    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —É—á–∞—Å—Ç–Ω–∏–∫, —Å–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã —Å –∞—Ä—Ö–∏–≤–Ω—ã–º–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
                    if (currentUser?.role === USER_ROLES.PARTICIPANT) {
                        filteredProjects = filteredProjects.filter(project => {
                            const projectDirection = directions.find(d => d.name === project.directionName);
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –∞—Ä—Ö–∏–≤–Ω–æ–µ –ò–õ–ò –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
                            return !projectDirection || !projectDirection.archived;
                        });
                    }
                    
                    return filteredProjects.map((p) => ({
                        type: "project",
                        ...p,
                        customers: [p.customer],
                        description: p.shortDescription || "",
                    }));
                } else if (dataset === "ftimProjects") {
                    let filteredFTIMProjects = Array.isArray(ftimProjects) ? ftimProjects : [];
                    
                    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —É—á–∞—Å—Ç–Ω–∏–∫, —Å–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã —Å –∞—Ä—Ö–∏–≤–Ω—ã–º–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
                    if (currentUser?.role === USER_ROLES.PARTICIPANT) {
                        filteredFTIMProjects = filteredFTIMProjects.filter(project => {
                            const projectDirection = directions.find(d => d.name === project.directionName);
                            return !projectDirection || !projectDirection.archived;
                        });
                    }
                    
                    return filteredFTIMProjects.map((p) => ({
                        type: "ftimProject",
                        ...p,
                        name: p.projectName,
                        description: p.description,
                        customers: [],
                        directionName: p.directionName
                    }));
                }
                return [];
            }, [dataset, directions, projects, ftimProjects, currentUser, directionFilter]);

            const filtered = useMemo(() => {
                const s = debouncedSearch.trim().toLowerCase();
                return unified.filter((it) => {
                    if (s.length > 0) {
                        const hay = [
                            it.type || "",
                            it.name || it.directionName || "",
                            it.title || "",
                            it.description || it.shortDescription || "",
                            ...(it.customers || it.customersRecommended || []),
                            ...(it.effectTags || it.recommendedEffects || []),
                            ...(it.DITTags || it.recommendedTags || []),
                            ...(it.openCases || []),
                            ...(it.stakeholders || []),
                        ]
                            .join(" ")
                            .toLowerCase();
                        if (!hay.includes(s)) return false;
                    }
                    if (filterCustomers.length > 0) {
                        const arr = it.customers || it.customersRecommended || [];
                        if (!filterCustomers.some((c) => arr.includes(c))) return false;
                    }
                    if (filterEffects.length > 0) {
                        const arr = it.effectTags || it.recommendedEffects || [];
                        if (!filterEffects.some((e) => arr.includes(e))) return false;
                    }
                    if (filterDirNames.length > 0) {
                        const name = it.name || it.directionName || "";
                        if (!filterDirNames.includes(name)) return false;
                    }
                    if (filterTags.length > 0) {
                        const arr = it.DITTags || it.recommendedTags || [];
                        if (!filterTags.some((t) => arr.includes(t))) return false;
                    }
                    return true;
                });
            }, [unified, debouncedSearch, filterCustomers, filterEffects, filterDirNames, filterTags]);

            const sorted = useMemo(() => {
                const arr = [...filtered];
                const compare = (a, b) => {
                    const get = (o) => {
                        switch (sortKey) {
                            case "name":
                                return o.type === "project" ? o.title || "" : 
                                       o.type === "ftimProject" ? o.projectName || "" : 
                                       o.name || "";
                            case "customer":
                                return (o.customers || o.customersRecommended || []).join(", ");
                            case "effects":
                                return (o.effectTags || o.recommendedEffects || []).join(", ");
                            case "direction":
                                return o.type === "project" ? o.directionName || "" : 
                                       o.type === "ftimProject" ? o.directionName || "" :
                                       o.name || "";
                            case "fit":
                                return o.type === "project" ? o.fitScore || 0 : -1;
                            case "pilot":
                                return o.type === "project" ? o.pilotReadiness || 0 : -1;
                            default:
                                return "";
                        }
                    };
                    const va = get(a), vb = get(b);
                    if (typeof va === "number" && typeof vb === "number") return va - vb;
                    return String(va).localeCompare(String(vb), "ru");
                };
                arr.sort(compare);
                if (sortDir === "desc") arr.reverse();
                return arr;
            }, [filtered, sortKey, sortDir]);

            const openFit = (proj) => {
                setFitItem(proj);
                setFitOpen(true);
            };
            const onOpenAddProject = () => {
                setProjEditing(null);
                setProjOpen(true);
            };
            const onEditProject = (p) => {
                setProjEditing(p);
                setProjOpen(true);
            };
            const onEditDirection = (d) => {
                setDirEditing(d);
                setDirOpen(true);
            };
            const onOpenCreateDirection = () => {
                setDirCreateOpen(true);
            };
            const onOpenAddFTIMProject = () => {
                setFtimProjEditing(null);
                setFtimProjOpen(true);
            };
            const onEditFTIMProject = (p) => {
                setFtimProjEditing(p);
                setFtimProjOpen(true);
            };

            const addOrUpdateProject = (project) => {
                setProjects((prev) => {
                    // ‚úÖ –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú, —á—Ç–æ prev - –º–∞—Å—Å–∏–≤
                    const prevArray = Array.isArray(prev) ? prev : [];
                    const exists = prevArray.some((p) => p.id === project.id);
                    const next = exists ? prevArray.map((p) => (p.id === project.id ? project : p)) : [project, ...prevArray];
                    saveProjects(next);
                    return next;
                });
                setDataset("projects");
            };

            const addOrUpdateFTIMProject = (project) => {
                setFtimProjects((prev) => {
                    const exists = prev.some((p) => p.id === project.id);
                    const next = exists ? prev.map((p) => (p.id === project.id ? project : p)) : [project, ...prev];
                    saveFTIMProjects(next);
                    return next;
                });
                setDataset("ftimProjects");
            };

            const deleteFTIMProject = (id) => {
                if (!canEditFTIMProjects) {
                    alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –§–¢–ò–ú");
                    return;
                }
                if (confirm("–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –æ—Ç –§–¢–ò–ú?")) {
                    setFtimProjects((prev) => {
                        const next = prev.filter((p) => p.id !== id);
                        saveFTIMProjects(next);
                        return next;
                    });
                }
            };

            const saveDirection = (updated) => {
                if (!canEditDirections) {
                    alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π");
                    return;
                }
                setDirections((prev) => {
                    const next = prev.map((d) => (d.code === updated.code ? updated : d));
                    saveDirections(next);
                    return next;
                });
            };

            const createDirection = (newDirection) => {
                if (!canEditDirections) {
                    alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π");
                    return;
                }
                const exists = directions.find(d => d.code === newDirection.code);
                if (exists) {
                    alert('–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Ç–∞–∫–∏–º –∫–æ–¥–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                    return;
                }
                
                setDirections((prev) => {
                    const next = [...prev, newDirection];
                    saveDirections(next);
                    return next;
                });
                setDirCreateOpen(false);
            };
            
            const toggleArchiveDirection = (directionCode) => {
                if (!canEditDirections) {
                    alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π");
                    return;
                }
                
                // –ù–∞—Ö–æ–¥–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                const directionToToggle = directions.find(d => d.code === directionCode);
                if (!directionToToggle) return;
                
                const directionName = directionToToggle.name;
                const isCurrentlyArchived = directionToToggle.archived || false;
                
                if (isCurrentlyArchived) {
                    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∞—Ä—Ö–∏–≤–∞
                    if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "${directionName}" –∏–∑ –∞—Ä—Ö–∏–≤–∞?\n\n–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:\n‚Ä¢ –°–Ω–æ–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–ø–∏—Å–∫–µ\n‚Ä¢ –°—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤`)) {
                        setDirections((prev) => {
                            const newDirections = prev.map(d => 
                                d.code === directionCode 
                                    ? { ...d, archived: false } 
                                    : d
                            );
                            saveDirections(newDirections);
                            return newDirections;
                        });
                        alert("‚úÖ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏–∑ –∞—Ä—Ö–∏–≤–∞");
                    }
                } else {
                    // –ê—Ä—Ö–∏–≤–∞—Ü–∏—è
                    if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "${directionName}"?\n\n–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:\n‚Ä¢ –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–ø–∏—Å–∫–µ\n‚Ä¢ –ù–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤\n‚Ä¢ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤—è–∑—å`)) {
                        setDirections((prev) => {
                            const newDirections = prev.map(d => 
                                d.code === directionCode 
                                    ? { ...d, archived: true } 
                                    : d
                            );
                            saveDirections(newDirections);
                            return newDirections;
                        });
                        alert("‚úÖ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–æ –≤ –∞—Ä—Ö–∏–≤");
                    }
                }
            };

            const exportJSON = () => {
                const payload =
                    dataset === "projects"
                        ? { dataset, timestamp: new Date().toISOString(), items: projects }
                        : dataset === "ftimProjects"
                        ? { dataset, timestamp: new Date().toISOString(), items: ftimProjects }
                        : { dataset, timestamp: new Date().toISOString(), items: directions };
                downloadBlob(JSON.stringify(payload, null, 2), "application/json", `export_${dataset}_${timeStamp()}.json`);
            };

            const exportCSV = () => {
                const items = sorted;
                const headers =
                    dataset === "projects"
                        ? ["–¢–∏–ø", "–ù–∞–∑–≤–∞–Ω–∏–µ", "–ó–∞–∫–∞–∑—á–∏–∫", "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ", "–≠—Ñ—Ñ–µ–∫—Ç—ã", "–¶–ê", "–¢–µ–≥–∏ –î–ò–¢", "–û–ø–∏—Å–∞–Ω–∏–µ", "Fit", "Pilot", "–°—Ç–∞—Ç—É—Å", "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–µ–π—Å—É"]
                        : dataset === "ftimProjects"
                        ? ["–¢–∏–ø", "–ü—Ä–æ–µ–∫—Ç", "–û–ø–∏—Å–∞–Ω–∏–µ", "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å", "–ü–∏–ª–æ—Ç–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞", "–°—Ç–∞—Ç—É—Å", "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"]
                        : ["–¢–∏–ø", "–ù–∞–∑–≤–∞–Ω–∏–µ", "–û–ø–∏—Å–∞–Ω–∏–µ", "–†–µ–∫–æ–º. –∑–∞–∫–∞–∑—á–∏–∫–∏", "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã", "–†–µ–∫–æ–º. —ç—Ñ—Ñ–µ–∫—Ç—ã", "–†–µ–∫–æ–º. —Ç–µ–≥–∏ –î–ò–¢", "–°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã"];
                const escape = (v) => {
                    if (Array.isArray(v)) v = v.join("; ");
                    if (v == null) v = "";
                    v = String(v).replace(/"/g, '""');
                    return `"${v}"`;
                };
                const lines = items.map((it) =>
                    dataset === "projects"
                        ? [
                            "–ü—Ä–æ–µ–∫—Ç",
                            it.title,
                            (it.customers || []).join("; "),
                            it.directionName,
                            (it.effectTags || []).join("; "),
                            (it.targetAudience || []).join("; "),
                            (it.DITTags || []).join("; "),
                            it.description || "",
                            it.fitScore ?? "",
                            it.pilotReadiness ?? "",
                            it.status || "",
                            it.selectedOpenCase || "" // –ù–û–í–û–ï –ü–û–õ–ï
                        ]
                            .map(escape)
                            .join(",")
                        : dataset === "ftimProjects"
                        ? [
                            "–ü—Ä–æ–µ–∫—Ç –§–¢–ò–ú",
                            it.projectName,
                            it.description || "",
                            it.currentStatus || "",
                            it.pilotSite || "",
                            it.status || "",
                            it.directionName || "",
                        ]
                            .map(escape)
                            .join(",")
                        : [
                            "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                            it.name,
                            it.description || "",
                            (it.customersRecommended || []).join("; "),
                            (it.openCases || []).join(" | "),
                            (it.recommendedEffects || []).join("; "),
                            (it.recommendedTags || []).join("; "),
                            (it.stakeholders || []).join("; "),
                        ]
                            .map(escape)
                            .join(",")
                );
                const csv = [headers.map(escape).join(","), ...lines].join("\n");
                downloadBlob(csv, "text/csv", `export_${dataset}_filtered_${timeStamp()}.csv`);
            };

            const exportPitch = () => {
                if (dataset !== "projects") return;
                const items = sorted.filter((it) => it.type === "project");
                const parts = [];
                for (const it of items) {
                    const dirObj = directions.find((d) => d.name === it.directionName);
                    const idea = computeIdeaAdequacy(it, dirObj);
                    parts.push(
`# ${it.title || "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"}
–ó–∞–∫–∞–∑—á–∏–∫: ${it.customer || "‚Äî"} ‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${it.directionName || "‚Äî"} ‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç—ã: ${(it.effectTags || []).join(", ") || "‚Äî"} ‚Ä¢ –¢–µ–≥–∏ –î–ò–¢: ${(it.DITTags || []).join(", ") || "‚Äî"}
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–µ–π—Å—É: ${it.selectedOpenCase === "ORIGINAL" ? "üí° –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è" : it.selectedOpenCase || "‚Äî"}

${it.shortDescription || "‚Äî"}

–ü–∏–ª–æ—Ç: –ü–ª–æ—â–∞–¥–∫–∞ ‚Äî ${it.pilot?.site || "‚Äî"}; –ò—Å—Ç–æ—á–Ω–∏–∫–∏ ‚Äî ${(it.pilot?.dataSources || []).join(", ") || "‚Äî"}; –¢–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ‚Äî ${(it.pilot?.integrations || []).join(", ") || "‚Äî"}
–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è: ${it.pilot?.legalApprovals || "‚Äî"}
–†–µ—Å—É—Ä—Å—ã: ${it.pilot?.resources || "‚Äî"}
–®–∞–≥–∏/–ø–ª–∞–Ω: ${it.pilot?.stepsPlan || "‚Äî"}
–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞: ${it.pilot?.successCriteria || "‚Äî"}

Fit ${it.fitScore ?? 0}% ‚Ä¢ Pilot ${it.pilotReadiness ?? 0}% ‚Ä¢ Idea ${idea}%`
                    );
                }
                const md = parts.join("\n\n---\n\n");
                downloadBlob(md, "text/markdown", `pitch_projects_${timeStamp()}.md`);
            };

            const importJSON = (json) => {
                if (!json || typeof json !== "object") {
                    alert("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON");
                    return;
                }
                if (Array.isArray(json)) {
                    setProjects((prev) => {
                        const incoming = json.map((p) => normalizeProject(p, directions));
                        const merged = [...incoming, ...prev];
                        saveProjects(merged);
                        return merged;
                    });
                    setDataset("projects");
                    return;
                }
                if (json.dataset === "projects" && Array.isArray(json.items)) {
                    setProjects((prev) => {
                        const incoming = json.items.map((p) => normalizeProject(p, directions));
                        const merged = [...incoming, ...prev];
                        saveProjects(merged);
                        return merged;
                    });
                    setDataset("projects");
                } else if (json.dataset === "directions" && Array.isArray(json.items)) {
                    setDirections(json.items);
                    saveDirections(json.items);
                    setDataset("directions");
                } else if (json.dataset === "ftimProjects" && Array.isArray(json.items)) {
                    setFtimProjects(json.items);
                    saveFTIMProjects(json.items);
                    setDataset("ftimProjects");
                } else {
                    alert("–û–∂–∏–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç { dataset: 'projects'|'directions'|'ftimProjects', items: [...] } –∏–ª–∏ –º–∞—Å—Å–∏–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤");
                }
            };

            const clearFilters = () => {
                setSearch("");
                setFilterCustomers([]);
                setFilterEffects([]);
                setFilterDirNames([]);
                setFilterTags([]);
                setSortKey("name");
                setSortDir("asc");
            };

            const onSort = (key) => {
                if (sortKey === key) setSortDir(sortDir === "asc" ? "desc" : "asc");
                else {
                    setSortKey(key);
                    setSortDir("asc");
                }
            };

            const [showTour, setShowTour] = useState(() => {
                try {
                    return localStorage.getItem(LS_TOUR_KEY) !== "1";
                } catch {
                    return true;
                }
            });
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
            const [deleteModalOpen, setDeleteModalOpen] = useState(false);
            const [itemToDelete, setItemToDelete] = useState(null);
            const [deletedItemsLog, setDeletedItemsLog] = useState(() => {
              try {
                const saved = localStorage.getItem(LS_DELETED_ITEMS);
                return saved ? JSON.parse(saved) : [];
              } catch {
                return [];
              }
            });
            /* ====================== –§–£–ù–ö–¶–ò–ò –£–î–ê–õ–ï–ù–ò–Ø ====================== */

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
            const logDeletion = (itemType, itemName, itemId) => {
              const newLog = [...deletedItemsLog, {
                type: itemType,
                name: itemName,
                id: itemId,
                deletedBy: currentUser?.name || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",
                deletedAt: new Date().toISOString(),
                timestamp: Date.now()
              }];
              
              // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —É–¥–∞–ª–µ–Ω–∏–π
              const trimmedLog = newLog.slice(-50);
              setDeletedItemsLog(trimmedLog);
              
              try {
                localStorage.setItem(LS_DELETED_ITEMS, JSON.stringify(trimmedLog));
              } catch (error) {
                console.error("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∂—É—Ä–Ω–∞–ª —É–¥–∞–ª–µ–Ω–∏–π:", error);
              }
            };
            
            // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            const handleDeleteDirection = (directionCode) => {
              if (!canEditDirections) {
                alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π");
                return;
              }
              
              const direction = directions.find(d => d.code === directionCode);
              if (!direction) return;
              
              // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø—Ä–æ–µ–∫—Ç—ã –≤ —ç—Ç–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
              const projectsInDirection = projects.filter(p => p.directionName === direction.name);
              const ftimProjectsInDirection = ftimProjects.filter(p => p.directionName === direction.name);
              
              let warningMessage = "";
              if (projectsInDirection.length > 0 || ftimProjectsInDirection.length > 0) {
                warningMessage = `‚ö†Ô∏è –í —ç—Ç–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –µ—Å—Ç—å ${projectsInDirection.length} –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ ${ftimProjectsInDirection.length} –ø—Ä–æ–µ–∫—Ç–æ–≤ –§–æ–Ω–¥–∞. –û–Ω–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –±–µ–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è.`;
              }
              
              setItemToDelete({
                type: "direction",
                code: directionCode,
                name: direction.name,
                warning: warningMessage
              });
              setDeleteModalOpen(true);
            };
            
            // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
            const handleDeleteProject = (projectId) => {
              if (!canEditProjects) {
                alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤");
                return;
              }
              
              const project = projects.find(p => p.id === projectId);
              if (!project) return;
              
              setItemToDelete({
                type: "project",
                id: projectId,
                name: project.title || "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"
              });
              setDeleteModalOpen(true);
            };
            
            // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –§–æ–Ω–¥–∞
            const handleDeleteFTIMProject = (projectId) => {
              if (!canEditFTIMProjects) {
                alert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –§–æ–Ω–¥–∞");
                return;
              }
              
              const project = ftimProjects.find(p => p.id === projectId);
              if (!project) return;
              
              setItemToDelete({
                type: "ftimProject",
                id: projectId,
                name: project.projectName || "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"
              });
              setDeleteModalOpen(true);
            };
            
            // –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            const confirmDelete = () => {
              if (!itemToDelete) return;
              
              switch (itemToDelete.type) {
                case "direction":
                  // –£–¥–∞–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                  const newDirections = directions.filter(d => d.code !== itemToDelete.code);
                  setDirections(newDirections);
                  saveDirections(newDirections);
                  logDeletion("direction", itemToDelete.name, itemToDelete.code);
                  break;
                  
                case "project":
                  // –£–¥–∞–ª—è–µ–º –ø—Ä–æ–µ–∫—Ç
                  const newProjects = projects.filter(p => p.id !== itemToDelete.id);
                  setProjects(newProjects);
                  saveProjects(newProjects);
                  logDeletion("project", itemToDelete.name, itemToDelete.id);
                  break;
                  
                case "ftimProject":
                  // –£–¥–∞–ª—è–µ–º –ø—Ä–æ–µ–∫—Ç –§–æ–Ω–¥–∞
                  const newFTIMProjects = ftimProjects.filter(p => p.id !== itemToDelete.id);
                  setFtimProjects(newFTIMProjects);
                  saveFTIMProjects(newFTIMProjects);
                  logDeletion("ftimProject", itemToDelete.name, itemToDelete.id);
                  break;
              }
              
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
              alert(`‚úÖ –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ: ${itemToDelete.name}`);
              
              // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
              setDeleteModalOpen(false);
              setItemToDelete(null);
            };
            const dismissTour = () => {
                try {
                    localStorage.setItem(LS_TOUR_KEY, "1");
                } catch {}
                setShowTour(false);
            };

            return React.createElement("div", { className: "app-shell" },
                React.createElement("header", { className: "header" },
                    React.createElement("div", { className: "title" }, "–ö–∞—Ä—Ç–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚Äî –¥–∞—à–±–æ—Ä–¥"),
                    React.createElement("div", { className: "spacer" }),
                    React.createElement("div", { className: "status" },
                        currentUser ? 
                            React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 12 } },
                                React.createElement("span", { className: "small" }, 
                                    `üëã ${currentUser.name} (${currentUser.role === USER_ROLES.FOUNDATION ? "–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –§–¢–ò–ú" : "–£—á–∞—Å—Ç–Ω–∏–∫ –°—Ç–°—Ç"})`
                                ),
                                React.createElement("button", {
                                    className: "btn ghost",
                                    onClick: handleLogout,
                                    "aria-label": "–í—ã–π—Ç–∏",
                                    style: { fontSize: "12px", padding: "4px 8px" }
                                }, "–í—ã–π—Ç–∏")
                            ) :
                            React.createElement("button", {
                                className: "btn primary",
                                onClick: () => setShowLogin(true),
                                "aria-label": "–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É",
                                style: { fontSize: "12px", padding: "4px 8px" }
                            }, "–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É")
                    )
                ),

                /* –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –í–ö–õ–ê–î–û–ö */
                React.createElement("nav", { className: "tabs-container" },
                    React.createElement("ul", { className: "tabs" },
                        React.createElement("li", null,
                            React.createElement("button", {
                                className: `tab ${dataset === "directions" ? "active" : ""}`,
                                onClick: () => setDataset("directions")
                            }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è", 
                            React.createElement("span", { className: "tab-badge" }, directions.length))
                        ),
                        React.createElement("li", null,
                            React.createElement("button", {
                                className: `tab ${dataset === "projects" ? "active" : ""}`,
                                onClick: () => setDataset("projects")
                            }, "–ü—Ä–æ–µ–∫—Ç—ã",
                            React.createElement("span", { className: "tab-badge" }, projects.length))
                        ),
                        React.createElement("li", null,
                            React.createElement("button", {
                                className: `tab ${dataset === "ftimProjects" ? "active" : ""}`,
                                onClick: () => setDataset("ftimProjects")
                            }, "–ü—Ä–æ–µ–∫—Ç—ã –§–æ–Ω–¥–∞",
                            React.createElement("span", { className: "tab-badge" }, ftimProjects.length))
                        )
                    )
                ),

                /* –°–¢–ê–¢–£–°-–ü–ê–ù–ï–õ–¨ */
                React.createElement("div", { className: "status-panel" },
                    React.createElement("div", { className: "status-item" },
                        React.createElement("span", { className: "small" }, "–ù–∞–π–¥–µ–Ω–æ:"),
                        React.createElement("span", { className: "status-count" }, filtered.length)
                    ),
                    
                    // –î–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    dataset === "directions" ? 
                    React.createElement(React.Fragment, null,
                        React.createElement("div", { className: "status-item" },
                            React.createElement("span", { className: "small" }, "–î–µ–π—Å—Ç–≤—É—é—â–∏–µ:"),
                            React.createElement("span", { className: "status-count" }, 
                                directions.filter(d => !d.archived).length
                            )
                        ),
                        React.createElement("div", { className: "status-item" },
                            React.createElement("span", { className: "small" }, "–í –∞—Ä—Ö–∏–≤–µ:"),
                            React.createElement("span", { className: "status-count" }, 
                                directions.filter(d => d.archived).length
                            )
                        ),    
                        currentUser?.role === USER_ROLES.FOUNDATION && 
                        React.createElement("div", { className: "status-item" },
                            React.createElement("span", { className: "small" }, "–§–∏–ª—å—Ç—Ä:"),
                            React.createElement("span", { className: "status-count" }, 
                                directionFilter === "active" ? "–î–µ–π—Å—Ç–≤—É—é—â–∏–µ" :
                                directionFilter === "archived" ? "–ê—Ä—Ö–∏–≤–Ω—ã–µ" : "–í—Å–µ"
                            )
                        )
                    ) : 
                    // –î–ª—è –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–æ–∫ - –æ–±—ã—á–Ω—ã–π —Å—á–µ—Ç—á–∏–∫
                    React.createElement("div", { className: "status-item" },
                        React.createElement("span", { className: "small" }, "–í—Å–µ–≥–æ:"),
                        React.createElement("span", { className: "status-count" }, unified.length)
                    ),
                    React.createElement("div", { className: "spacer" }),
                    React.createElement("div", { className: "small" }, 
                        "–ê–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª: ", 
                        dataset === "directions" ? "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è" : 
                        dataset === "projects" ? "–ü—Ä–æ–µ–∫—Ç—ã" : "–ü—Ä–æ–µ–∫—Ç—ã –§–æ–Ω–¥–∞"
                    )
                ),

                React.createElement("section", { className: "toolbar", role: "region", "aria-label": "–§–∏–ª—å—Ç—Ä—ã" },
                    React.createElement("div", { className: "filters" },
                        React.createElement("div", { className: "filter-item search", style: { position: "relative" } },
                            React.createElement("input", {
                                className: "input",
                                style: { 
                                    width: "100%", 
                                    paddingLeft: 36,
                                    paddingRight: 12
                                },
                                placeholder: "–ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º...",
                                value: search,
                                onChange: (e) => setSearch(e.target.value),
                                "aria-label": "–ü–æ–∏—Å–∫"
                            }),
                            React.createElement("span", { 
                                style: { 
                                    position: "absolute", 
                                    left: 12, 
                                    top: "50%", 
                                    transform: "translateY(-50%)", 
                                    opacity: .6,
                                    pointerEvents: "none"
                                } 
                            }, "üîé")
                        ),
                        dataset !== "ftimProjects" && React.createElement(React.Fragment, null,
                            React.createElement(MultiSelectDropdown, {
                                label: "–ó–∞–∫–∞–∑—á–∏–∫",
                                options: CUSTOMERS,
                                values: filterCustomers,
                                setValues: setFilterCustomers
                            }),
                            React.createElement(MultiSelectDropdown, {
                                label: "–≠—Ñ—Ñ–µ–∫—Ç",
                                options: EFFECT_OPTIONS,
                                values: filterEffects,
                                setValues: setFilterEffects,
                                defs: EFFECT_DEFINITIONS
                            }),
                            React.createElement(MultiSelectDropdown, {
                                label: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                                options: directionNamesAll,
                                values: filterDirNames,
                                setValues: setFilterDirNames
                            }),
                            React.createElement(MultiSelectDropdown, {
                                label: "–¢–µ–≥–∏ –î–ò–¢",
                                options: DIT_TAGS,
                                values: filterTags,
                                setValues: setFilterTags
                            }), // ‚Üê –î–û–ë–ê–í–õ–ï–ù–ê –ó–ê–ü–Ø–¢–ê–Ø –ó–î–ï–°–¨!
                            dataset === "directions" && currentUser?.role === USER_ROLES.FOUNDATION && 
                        React.createElement("div", { className: "filter-item" },
                            React.createElement("div", { className: "filter-dropdown" },
                                React.createElement("button", {
                                    className: "btn",
                                    onClick: () => {
                                        // –ü—Ä–æ—Å—Ç–æ–π dropdown
                                        const newValue = directionFilter === "active" ? "archived" : 
                                                        directionFilter === "archived" ? "all" : "active";
                                        setDirectionFilter(newValue);
                                    },
                                    style: { 
                                        width: "100%",
                                        display: "flex",
                                        justifyContent: "space-between"
                                    }
                                },
                                    React.createElement("span", null, 
                                        directionFilter === "active" ? "–î–µ–π—Å—Ç–≤—É—é—â–∏–µ" :
                                        directionFilter === "archived" ? "–ê—Ä—Ö–∏–≤–Ω—ã–µ" : "–í—Å–µ"
                                    ),
                                    React.createElement("span", { style: { opacity: 0.6 } }, "‚ñº")
                                )
                            )
                        )
                        )
                    ),

                    React.createElement("div", { className: "actions" },
                        React.createElement(ToggleGroup, {
                            ariaLabel: "–í–∏–¥",
                            value: view,
                            onChange: (v) => setView(v),
                            items: [
                                { value: "cards", label: "–ö–∞—Ä—Ç–æ—á–∫–∏" },
                                { value: "table", label: "–¢–∞–±–ª–∏—Ü–∞" },
                            ]
                        }),
                        
                        React.createElement("button", {
                            className: "btn",
                            onClick: () => {
                                console.log("üîÑ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö");
                                if (onDataRefresh) {
                                    onDataRefresh();
                                }
                            },
                            "aria-label": "–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–ª–∞–∫–∞",
                            title: "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞"
                        }, "üîÑ –û–±–Ω–æ–≤–∏—Ç—å"),
                        React.createElement("button", {
                            className: "btn",
                            onClick: () => exportCSV(),
                            "aria-label": "–≠–∫—Å–ø–æ—Ä—Ç CSV"
                        }, "–≠–∫—Å–ø–æ—Ä—Ç CSV"),
                        React.createElement("button", {
                            className: "btn",
                            onClick: () => exportJSON(),
                            "aria-label": "–≠–∫—Å–ø–æ—Ä—Ç JSON"
                        }, "–≠–∫—Å–ø–æ—Ä—Ç JSON"),
                        dataset === "projects" && React.createElement("button", {
                            className: "btn",
                            onClick: () => exportPitch(),
                            "aria-label": "–≠–∫—Å–ø–æ—Ä—Ç Pitch"
                        }, "–≠–∫—Å–ø–æ—Ä—Ç Pitch"),
                        React.createElement("button", {
                            className: "btn",
                            onClick: () => setManualInstructionOpen(true),
                            "aria-label": "–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é"
                        }, "üìö –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"),
                        React.createElement("label", {
                            className: "btn",
                            "aria-label": "–ò–º–ø–æ—Ä—Ç JSON",
                            title: "–ò–º–ø–æ—Ä—Ç JSON"
                        }, "–ò–º–ø–æ—Ä—Ç JSON", React.createElement("input", {
                            type: "file",
                            accept: "application/json",
                            style: { display: "none" },
                            onChange: (e) => {
                                const file = e.target.files?.[0];
                                if (!file) return;
                                const reader = new FileReader();
                                reader.onload = () => {
                                    try {
                                        const json = JSON.parse(String(reader.result || "{}"));
                                        importJSON(json);
                                    } catch {
                                        alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å JSON");
                                    }
                                };
                                reader.readAsText(file);
                                e.currentTarget.value = "";
                            }
                        })),
                        
                        // –ö–û–ù–¢–ï–ö–°–¢–ù–´–ï –ö–ù–û–ü–ö–ò –î–û–ë–ê–í–õ–ï–ù–ò–Ø
                        // –ö–û–ù–¢–ï–ö–°–¢–ù–´–ï –ö–ù–û–ü–ö–ò –î–û–ë–ê–í–õ–ï–ù–ò–Ø (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤)
                        dataset === "directions" && canEditDirections && React.createElement("button", {
                            className: "btn primary",
                            onClick: onOpenCreateDirection,
                            "aria-label": "–°–æ–∑–¥–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
                        }, "–°–æ–∑–¥–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                        dataset === "ftimProjects" && canEditFTIMProjects && React.createElement("button", {
                            className: "btn primary",
                            onClick: onOpenAddFTIMProject,
                            "aria-label": "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –æ—Ç –§–¢–ò–ú"
                        }, "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç"),
                        dataset === "projects" && canEditProjects && React.createElement("button", {
                            className: "btn primary",
                            onClick: onOpenAddProject,
                            "aria-label": "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç"
                        }, "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç"),
                        
                        React.createElement("button", {
                            className: "btn ghost",
                            onClick: clearFilters,
                            "aria-label": "–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"
                        }, "–°–±—Ä–æ—Å–∏—Ç—å")
                    )
                ),

                showTour && React.createElement("div", { 
                    className: "toolbar", 
                    style: { borderTop: "none", paddingTop: 0, background: "#fefce8" } 
                }, React.createElement("div", { 
                    className: "small", 
                    style: { gridColumn: "1 / -1", color: "#0f172a" } 
                }, React.createElement("div", { className: "chips" },
                    React.createElement(Badge, { kind: "warn" }, "–ú–∏–Ω–∏‚Äë—Ç—É—Ä"),
                    React.createElement("span", null, "1) –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É, 2) –¥–æ–±–∞–≤—å—Ç–µ —ç–ª–µ–º–µ–Ω—Ç —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É, 3) –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, 4) –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Fit-Check"),
                    React.createElement("button", {
                        className: "btn",
                        onClick: dismissTour,
                        "aria-label": "–°–∫—Ä—ã—Ç—å –º–∏–Ω–∏-—Ç—É—Ä"
                    }, "–ü–æ–Ω—è—Ç–Ω–æ")
                ))),

                view === "cards" ? React.createElement("section", { className: "grid cards", role: "list", "aria-label": "–°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫" },
                    sorted.map((it) => {
                        const isProject = it.type === "project";
                        const isFTIMProject = it.type === "ftimProject";
                        const dirObj = isProject ? directions.find((d) => d.name === it.directionName) : null;
                        const ideaBadgeVal = isProject ? computeIdeaAdequacy(it, dirObj || undefined) : 0;
                        
                        return React.createElement("div", {
                            key: isProject ? "p:" + it.id : isFTIMProject ? "f:" + it.id : "d:" + it.code,
                            className: "card",
                            role: "listitem"
                        }, 
                            // card-head
                            React.createElement("div", { className: "card-head" },
                                React.createElement("div", { 
                                    style: { fontWeight: 600, display: "flex", alignItems: "center", gap: 8 } 
                                }, 
                                    React.createElement("span", null, isProject ? it.title : isFTIMProject ? it.projectName : it.name),
                                    // –î–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –§–¢–ò–ú –ø—Ä–æ–µ–∫—Ç–æ–≤ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
                                    isProject ? React.createElement(Badge, { kind: "accent" }, "–ü—Ä–æ–µ–∫—Ç") : 
                                    isFTIMProject ? React.createElement(Badge, { kind: "accent" }, "–§–¢–ò–ú") : 
                                    // –î–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ" –∏, –µ—Å–ª–∏ –∞—Ä—Ö–∏–≤–Ω–æ–µ, —Ç–æ –µ—â–µ –±–µ–π–¥–∂ "–ê—Ä—Ö–∏–≤"
                                    React.createElement(React.Fragment, null,
                                        React.createElement(Badge, { kind: "accent" }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                                        it.archived && React.createElement(Badge, { 
                                            kind: "muted", 
                                            style: { background: '#6b7280', color: 'white' },
                                            title: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏–≤–µ"
                                        }, "–ê—Ä—Ö–∏–≤")
                                    )
                                ),
                                React.createElement("div", { 
                                    className: "small", 
                                    style: { marginTop: 4 } 
                                }, it.description || "‚Äî"),
                                !isFTIMProject && React.createElement("div", { className: "chips" },
                                    (isProject ? it.customers : it.customersRecommended || []).map((c) =>
                                        React.createElement(Badge, { 
                                            key: c, 
                                            title: "–ó–∞–∫–∞–∑—á–∏–∫: " + c 
                                        }, c)
                                    )
                                )
                            ),
                        React.createElement("div", { className: "card-body" },
                            !isFTIMProject && React.createElement("div", { className: "chips" },
                                (isProject ? it.effectTags : it.recommendedEffects || []).map((e) =>
                                    React.createElement(Badge, { 
                                        key: e, 
                                        title: EFFECT_DEFINITIONS[e] || "" 
                                    }, e)
                                )
                            ),
                            // –ù–û–í–û–ï: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–µ–π—Å—É
                            isProject && it.selectedOpenCase && React.createElement("div", { className: "chips" },
                                React.createElement("span", { 
                                    className: `case-alignment-badge ${it.selectedOpenCase === "ORIGINAL" ? "original" : "aligned"}`,
                                    title: it.selectedOpenCase === "ORIGINAL" ? "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è" : `–†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞: ${it.selectedOpenCase}`
                                }, it.selectedOpenCase === "ORIGINAL" ? "üí° –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è" : `üéØ –ö–µ–π—Å: ${it.selectedOpenCase}`)
                            ),
                            isProject ? React.createElement(React.Fragment, null,
                                React.createElement("div", { className: "small" },
                                    React.createElement("span", { className: "muted" }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:"), " ", 
                                    it.directionName || "‚Äî",
                                    // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–º–µ—Ç–∫—É –¥–ª—è –∞—Ä—Ö–∏–≤–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
                                    directions.find(d => d.name === it.directionName)?.archived && 
                                    React.createElement(Badge, { 
                                        kind: "muted", 
                                        style: { marginLeft: 8 },
                                        title: "–≠—Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ"
                                    }, "–ê—Ä—Ö–∏–≤")
                                ),
                                React.createElement("div", { className: "chips" },
                                    React.createElement("span", { 
                                        className: "small", 
                                        style: { alignSelf: "center" } 
                                    }, "–¢–µ–≥–∏ –î–ò–¢:"),
                                    (it.DITTags || []).map((t) => 
                                        React.createElement(Badge, { key: t }, t)
                                    ),
                                    (it.DITTags || []).length === 0 ? 
                                    React.createElement("span", { className: "small" }, "‚Äî") : null
                                ),
                                it.productType && React.createElement("div", { className: "small" },
                                    React.createElement("span", { className: "muted" }, "–ü—Ä–æ–¥—É–∫—Ç:"), " ", it.productType),
                                React.createElement("div", { className: "chips" },
                                    React.createElement(Badge, { 
                                      title: "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é (–∫–µ–π—Å—ã + —ç—Ñ—Ñ–µ–∫—Ç—ã + –∑–∞–∫–∞–∑—á–∏–∫)" 
                                    }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ", it.fitScore ?? 0, "%"),
                                    React.createElement(Badge, { 
                                      title: "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é" 
                                    }, "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ", it.pilotReadiness ?? 0, "%"),
                                    React.createElement(Badge, { 
                                      title: "–ì–ª—É–±–∏–Ω–∞ –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ –∏–¥–µ–∏ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è + –ø–ª–∞–Ω + –ø—Ä–æ–¥—É–∫—Ç)" 
                                    }, "–ü—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ ", ideaBadgeVal, "%")
                                )
                            ) : isFTIMProject ? React.createElement(React.Fragment, null,
                                React.createElement("div", { className: "small" },
                                    React.createElement("span", { className: "muted" }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:"), " ", it.directionName || "‚Äî"),
                                React.createElement("div", { className: "small" },
                                    React.createElement("span", { className: "muted" }, "–°—Ç–∞—Ç—É—Å:"), " ", it.status || "‚Äî"),
                                it.pilotSite && React.createElement("div", { className: "small" },
                                    React.createElement("span", { className: "muted" }, "–ü–∏–ª–æ—Ç–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞:"), " ", it.pilotSite)
                            ) : React.createElement(React.Fragment, null,
                                (it.openCases || []).length > 0 && React.createElement("div", null,
                                    React.createElement("div", { 
                                        className: "small", 
                                        style: { marginBottom: 4 } 
                                    }, "–û—Ç–∫—Ä—ã—Ç—ã–µ –∫–µ–π—Å—ã:"),
                                    React.createElement("ul", { className: "list" },
                                        (it.openCases || []).map((c, i) =>
                                            React.createElement("li", { key: i, className: "small" }, c)
                                        )
                                    )
                                ),
                                React.createElement("div", { className: "chips" },
                                    React.createElement("span", { 
                                        className: "small", 
                                        style: { alignSelf: "center" } 
                                    }, "–†–µ–∫–æ–º. —Ç–µ–≥–∏:"),
                                    (it.recommendedTags || []).map((t) => 
                                        React.createElement(Badge, { key: t }, t)
                                    ),
                                    (it.recommendedTags || []).length === 0 ? 
                                    React.createElement("span", { className: "small" }, "‚Äî") : null
                                )
                            )
                        ), React.createElement("div", { className: "card-foot" },
                            React.createElement("div", { className: "small" }, 
                                isProject ? "–°—Ç–∞—Ç—É—Å: " + (it.status || "–≥–æ—Ç–æ–≤") : 
                                isFTIMProject ? "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: " + (it.currentStatus || "‚Äî") :
                                "–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
                            React.createElement("div", { className: "chips" },
                                isProject ? React.createElement(React.Fragment, null,
                                    React.createElement("button", {
                                        className: "btn",
                                        onClick: () => openFit(it),
                                        "aria-label": "Fit-Check"
                                    }, "Fit-Check"),
                                    React.createElement("button", {
                                        className: "btn primary",
                                        onClick: () => onEditProject(it),
                                        "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
                                    }, "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                                    // –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –ö–ù–û–ü–ö–£:
                                    canEditProjects && React.createElement("button", {
                                        className: "btn",
                                        onClick: () => handleDeleteProject(it.id),
                                        "aria-label": "–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç",
                                        style: { 
                                            background: 'var(--red)', 
                                            color: 'white',
                                            marginLeft: '4px'
                                        }
                                    }, "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å")
                                    ) : isFTIMProject ? (canEditFTIMProjects ? 
                                      React.createElement(React.Fragment, null,
                                        // –ò–ó–ú–ï–ù–ò–¢–ï –≠–¢–£ –°–£–©–ï–°–¢–í–£–Æ–©–£–Æ –ö–ù–û–ü–ö–£:
                                        React.createElement("button", {
                                          className: "btn",
                                          onClick: () => handleDeleteFTIMProject(it.id), // –ò–ó–ú–ï–ù–ò–õ–ò –§–£–ù–ö–¶–ò–Æ
                                          "aria-label": "–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç",
                                          style: { background: 'var(--red)', color: 'white' }
                                        }, "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"),
                                        React.createElement("button", {
                                          className: "btn primary",
                                          onClick: () => onEditFTIMProject(it),
                                          "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
                                        }, "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å")
                                      ) :
                                      React.createElement("span", { className: "small" }, 
                                        "üè¢ –ü—Ä–æ–µ–∫—Ç –§–æ–Ω–¥–∞ –¢–ò–ú"
                                      )
                                    ) : canEditDirections ? 
                                        React.createElement("div", { className: "chips" },
                                          React.createElement("button", {
                                            className: "btn primary",
                                            onClick: () => onEditDirection(it),
                                            "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
                                          }, "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                                          React.createElement("button", {
                                            className: "btn",
                                            onClick: () => toggleArchiveDirection(it.code),
                                            "aria-label": it.archived ? "–í–µ—Ä–Ω—É—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞" : "–í –∞—Ä—Ö–∏–≤",
                                            style: it.archived 
                                              ? { background: 'var(--green)', color: 'white' } 
                                              : { background: 'var(--yellow)', color: 'black' }
                                          }, it.archived ? "–í–µ—Ä–Ω—É—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞" : "–í –∞—Ä—Ö–∏–≤"),
                                          // –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –ö–ù–û–ü–ö–£:
                                          React.createElement("button", {
                                            className: "btn",
                                            onClick: () => handleDeleteDirection(it.code),
                                            "aria-label": "–£–¥–∞–ª–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                                            style: { 
                                              background: 'var(--red)', 
                                              color: 'white',
                                              marginLeft: '4px'
                                            }
                                          }, "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å")
                                        ) :
                                        React.createElement("span", { className: "small" }, 
                                          "üìñ –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞"
                                )
                            )
                        ));
                    }),
                    sorted.length === 0 && React.createElement("div", { 
                        className: "small", 
                        style: { opacity: .8, padding: 16, textAlign: "center", gridColumn: "1 / -1" } 
                    }, "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã.")
                ) : React.createElement("section", { className: "grid", style: { paddingTop: 0 } },
                    React.createElement("div", { className: "card", role: "region", "aria-label": "–¢–∞–±–ª–∏—Ü–∞" },
                        React.createElement("div", { style: { overflowX: "auto" } },
                            React.createElement("table", { className: "table" },
                                React.createElement("thead", null,
                                    React.createElement("tr", null,
                                        React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–ù–∞–∑–≤–∞–Ω–∏–µ",
                                                sortKey: "name",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        dataset !== "ftimProjects" && React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–ó–∞–∫–∞–∑—á–∏–∫",
                                                sortKey: "customer",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        dataset !== "ftimProjects" && React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–≠—Ñ—Ñ–µ–∫—Ç—ã",
                                                sortKey: "effects",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                                                sortKey: "direction",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        dataset === "projects" && React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–ö–µ–π—Å",
                                                sortKey: "name",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        dataset === "projects" && React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                                                sortKey: "fit",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        dataset === "projects" && React.createElement("th", null, 
                                            React.createElement(SortHeader, {
                                                label: "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
                                                sortKey: "pilot",
                                                currentKey: sortKey,
                                                sortDir,
                                                onSort
                                            })),
                                        React.createElement("th", null, 
                                            (canEditDirections || canEditFTIMProjects) ? "–î–µ–π—Å—Ç–≤–∏—è" : "–°—Ç–∞—Ç—É—Å"
                                        )
                                    )
                                ),
                                React.createElement("tbody", null,
                                    sorted.map((it) =>
                                        React.createElement("tr", {
                                            key: it.type === "project" ? "p:" + it.id : it.type === "ftimProject" ? "f:" + it.id : "d:" + it.code,
                                            className: "table-row"
                                        }, React.createElement("td", null,
                                            React.createElement("div", { 
                                                style: { fontWeight: 600, display: "flex", alignItems: "center", gap: 6 } 
                                            }, it.type === "project" ? it.title : 
                                               it.type === "ftimProject" ? it.projectName : 
                                               it.name,
                                            it.type === "project" ? 
                                            React.createElement(Badge, { kind: "accent" }, "–ü—Ä–æ–µ–∫—Ç") : 
                                            it.type === "ftimProject" ?
                                            React.createElement(Badge, { kind: "accent" }, "–§–¢–ò–ú") : 
                                            React.createElement(Badge, { kind: "accent" }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ")),
                                            React.createElement("div", { className: "small" }, it.description || "‚Äî")
                                        ), 
                                        dataset !== "ftimProjects" && React.createElement("td", null,
                                            React.createElement("div", { className: "chips" },
                                                (it.customers || it.customersRecommended || []).map((c) =>
                                                    React.createElement(Badge, { key: c }, c)
                                                )
                                            )
                                        ),
                                        dataset !== "ftimProjects" && React.createElement("td", null,
                                            React.createElement("div", { className: "chips" },
                                                (it.effectTags || it.recommendedEffects || []).map((e) =>
                                                    React.createElement(Badge, { 
                                                        key: e, 
                                                        title: EFFECT_DEFINITIONS[e] || "" 
                                                    }, e)
                                                )
                                            )
                                        ),
                                        React.createElement("td", null, 
                                            it.type === "project" ? 
                                                React.createElement("div", null,
                                                    it.directionName || "‚Äî",
                                                    directions.find(d => d.name === it.directionName)?.archived && 
                                                    React.createElement(Badge, { 
                                                        kind: "muted", 
                                                        style: { marginLeft: 8, fontSize: "10px" },
                                                        title: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏–≤–µ"
                                                    }, "–ê—Ä—Ö–∏–≤")
                                                ) : 
                                            it.type === "ftimProject" ? 
                                                React.createElement("div", null,
                                                    it.directionName || "‚Äî",
                                                    directions.find(d => d.name === it.directionName)?.archived && 
                                                    React.createElement(Badge, { 
                                                        kind: "muted", 
                                                        style: { marginLeft: 8, fontSize: "10px" },
                                                        title: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏–≤–µ"
                                                    }, "–ê—Ä—Ö–∏–≤")
                                                ) :
                                            React.createElement("div", null,
                                                it.name,
                                                it.archived && React.createElement(Badge, { 
                                                    kind: "muted", 
                                                    style: { marginLeft: 8, fontSize: "10px" },
                                                    title: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏–≤–µ"
                                                }, "–ê—Ä—Ö–∏–≤")
                                            )
                                        ),
                                        // –ù–û–í–´–ô –°–¢–û–õ–ë–ï–¶: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–µ–π—Å—É
                                        dataset === "projects" && React.createElement("td", null,
                                            it.selectedOpenCase ? 
                                                React.createElement("span", { 
                                                    className: `case-alignment-badge ${it.selectedOpenCase === "ORIGINAL" ? "original" : "aligned"}`,
                                                    title: it.selectedOpenCase === "ORIGINAL" ? "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è" : `–†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞: ${it.selectedOpenCase}`
                                                }, it.selectedOpenCase === "ORIGINAL" ? "üí° –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è" : "üéØ –ö–µ–π—Å") 
                                            : "‚Äî"
                                        ),
                                        dataset === "projects" && React.createElement("td", null, 
                                          it.type === "project" ? 
                                          React.createElement(Badge, null, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ", it.fitScore ?? 0, "%") : "‚Äî"),
                                        dataset === "projects" && React.createElement("td", null, 
                                          it.type === "project" ? 
                                          React.createElement(Badge, null, "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ", it.pilotReadiness ?? 0, "%") : "‚Äî"),
                                        React.createElement("td", null,
                                            React.createElement("div", { className: "chips" },
                                                it.type === "project" ? React.createElement(React.Fragment, null,
                                                  React.createElement("button", {
                                                    className: "btn",
                                                    onClick: () => openFit(it),
                                                    "aria-label": "Fit-Check"
                                                  }, "Fit-Check"),
                                                  React.createElement("button", {
                                                    className: "btn primary",
                                                    onClick: () => onEditProject(it),
                                                    "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
                                                  }, "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                                                  // –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –ö–ù–û–ü–ö–£:
                                                  canEditProjects && React.createElement("button", {
                                                    className: "btn",
                                                    onClick: () => handleDeleteProject(it.id),
                                                    "aria-label": "–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç",
                                                    style: { 
                                                      background: 'var(--red)', 
                                                      color: 'white',
                                                      marginLeft: '8px'
                                                    }
                                                  }, "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å")
                                                ) : it.type === "ftimProject" ? (canEditFTIMProjects ? 
                                                      React.createElement(React.Fragment, null,
                                                        React.createElement("button", {
                                                          className: "btn",
                                                          onClick: () => handleDeleteFTIMProject(it.id), // –ò–ó–ú–ï–ù–ò–¢–ï –§–£–ù–ö–¶–ò–Æ
                                                          "aria-label": "–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç",
                                                          style: { background: 'var(--red)', color: 'white' }
                                                        }, "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"),
                                                        React.createElement("button", {
                                                          className: "btn primary",
                                                          onClick: () => onEditFTIMProject(it),
                                                          "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
                                                        }, "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å")
                                                    ) :
                                                    React.createElement("span", { className: "small" }, 
                                                        "–ü—Ä–æ–µ–∫—Ç –§–æ–Ω–¥–∞ –¢–ò–ú"
                                                    )    
                                                ) : canEditDirections ? 
                                                    React.createElement("div", { className: "chips" },
                                                      React.createElement("button", {
                                                        className: "btn primary",
                                                        onClick: () => onEditDirection(it),
                                                        "aria-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
                                                      }, "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                                                      React.createElement("button", {
                                                        className: "btn",
                                                        onClick: () => toggleArchiveDirection(it.code),
                                                        "aria-label": it.archived ? "–í–µ—Ä–Ω—É—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞" : "–í –∞—Ä—Ö–∏–≤",
                                                        style: it.archived 
                                                          ? { background: 'var(--green)', color: 'white' } 
                                                          : { background: 'var(--yellow)', color: 'black' }
                                                      }, it.archived ? "–í–µ—Ä–Ω—É—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞" : "–í –∞—Ä—Ö–∏–≤"),
                                                      // –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –ö–ù–û–ü–ö–£:
                                                      React.createElement("button", {
                                                        className: "btn",
                                                        onClick: () => handleDeleteDirection(it.code),
                                                        "aria-label": "–£–¥–∞–ª–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                                                        style: { 
                                                          background: 'var(--red)', 
                                                          color: 'white',
                                                          marginLeft: '4px'
                                                        }
                                                      }, "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å")
                                                    ) :
                                                    React.createElement("span", { className: "small" }, 
                                                      "üìñ –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞"
                                                )        
                                            )
                                        ))
                                    ),
                                    sorted.length === 0 && React.createElement("tr", null,
                                        React.createElement("td", { 
                                            colSpan: dataset === "ftimProjects" ? 4 : dataset === "projects" ? 8 : 5, 
                                            className: "small", 
                                            style: { textAlign: "center", padding: 16 } 
                                        }, "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã.")
                                    )
                                )
                            )
                        )
                    )
                ),

                React.createElement(CenterModal, {
                  open: fitOpen && !!fitItem,
                  title: "üéØ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–¥–µ–∏",
                  onClose: () => setFitOpen(false),
                  "aria-label": "–ê–Ω–∞–ª–∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏–¥–µ–∏",
                  footRight: React.createElement("button", {
                    className: "btn primary",
                    onClick: () => setFitOpen(false)
                  }, "–ó–∞–∫—Ä—ã—Ç—å")
                }, fitItem && React.createElement(EnhancedFitCheck, {
                  project: fitItem,
                  directions: directions,
                  onEdit: () => {
                    setFitOpen(false);
                    onEditProject(fitItem);
                  }
                })),

                React.createElement(ProjectDrawer, {
                    open: projOpen,
                    onClose: () => setProjOpen(false),
                    directions,
                    initialProject: projEditing,
                    onSaveFinal: (p) => addOrUpdateProject(p),
                    onSaveDraft: (p) => addOrUpdateProject(p)
                }),

                React.createElement(DirectionDrawer, {
                    open: dirOpen,
                    onClose: () => setDirOpen(false),
                    initialDirection: dirEditing,
                    onSave: (d) => saveDirection(d)
                }),

                React.createElement(DirectionCreateDrawer, {
                    open: dirCreateOpen,
                    onClose: () => setDirCreateOpen(false),
                    onSave: (d) => createDirection(d)
                }),

                React.createElement(FTIMProjectDrawer, {
                    open: ftimProjOpen,
                    onClose: () => setFtimProjOpen(false),
                    directions,
                    initialProject: ftimProjEditing,
                    onSave: (p) => addOrUpdateFTIMProject(p)
                }),
                React.createElement(InstructionPopup, {
                    open: showInstruction || manualInstructionOpen,
                    onClose: () => {
                        if (showInstruction) {
                            dismissInstruction();
                        }
                        setManualInstructionOpen(false);
                    }
                }),
                
                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è - –î–û–ë–ê–í–õ–Ø–ï–ú –≠–¢–û
                React.createElement(DeleteConfirmationModal, {
                  open: deleteModalOpen,
                  onClose: () => {
                    setDeleteModalOpen(false);
                    setItemToDelete(null);
                  },
                  onConfirm: confirmDelete,
                  itemType: itemToDelete?.type,
                  itemName: itemToDelete?.name,
                  warningMessage: itemToDelete?.warning
                }),
                // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞
                React.createElement(LoginModal, {
                    open: showLogin,
                    onClose: () => setShowLogin(false),
                    onLogin: handleLogin
                })    
            );
        }
                /* ====================== –ö–û–ú–ü–û–ù–ï–ù–¢ –û–ë–£–ß–ê–Æ–©–ï–ì–û –ü–û–ü–ê–ü–ê ====================== */
        function InstructionPopup({ open, onClose }) {
          useEffect(() => {
            if (open) {
              const onKey = (e) => {
                if (e.key === "Escape") onClose();
              };
              document.addEventListener("keydown", onKey);
              document.body.style.overflow = 'hidden';
              
              return () => {
                document.removeEventListener("keydown", onKey);
                document.body.style.overflow = '';
              };
            }
          }, [open, onClose]);
        
          if (!open) return null;
        
          return React.createElement("div", { 
            className: "instruction-backdrop",
          }, 
            React.createElement("div", {
              className: "instruction-modal",
              role: "dialog",
              "aria-modal": "true",
              "aria-label": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–µ—Å–æ—á–Ω–∏—Ü—ã"
            },
              React.createElement("div", { className: "instruction-header" },
                React.createElement("h2", null, "üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ü–µ—Å–æ—á–Ω–∏—Ü—É –°—Ç–∞—Ä—Ç–∞–ø-–°—Ç—É–¥–∏–∏!"),
                React.createElement("button", {
                  className: "center-modal-close",
                  onClick: onClose,
                  "aria-label": "–ó–∞–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é",
                  style: { color: "white" }
                }, "√ó")
              ),
              React.createElement("div", { className: "instruction-body" },
                React.createElement("div", { className: "instruction-section" },
                  React.createElement("h3", null, "üéØ –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?"),
                  React.createElement("p", null, 
                    "–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–∏—Ö –∏–¥–µ–π –≤ —Ä–µ–∂–∏–º–µ ¬´–æ–¥–Ω–æ–≥–æ –æ–∫–Ω–∞¬ª. –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:"),
                  React.createElement("div", { className: "instruction-features" },
                    React.createElement("div", { className: "instruction-feature" },
                      React.createElement("h4", null, "üí° –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–¥–µ–∏"),
                      React.createElement("p", null, "–û—Ü–µ–Ω–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –≤–∞—à–µ–π –∏–¥–µ–∏ –¥–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π")
                    ),
                    React.createElement("div", { className: "instruction-feature" },
                      React.createElement("h4", null, "üìä –ü–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å"),
                      React.createElement("p", null, "–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏—Ç –≤–∞—à—É –∏–¥–µ—é –ø–æ –∫–ª—é—á–µ–≤—ã–º –º–µ—Ç—Ä–∏–∫–∞–º")
                    ),
                    React.createElement("div", { className: "instruction-feature" },
                      React.createElement("h4", null, "üé™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å—Ä–µ–¥–µ"),
                      React.createElement("p", null, "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–µ–∑ —Ä–∏—Å–∫–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞")
                    )
                  )
                ),
        
                React.createElement("div", { className: "instruction-section" },
                  React.createElement("h3", null, "üìà –°–∏—Å—Ç–µ–º–∞ –º–µ—Ç—Ä–∏–∫"),
                  React.createElement("p", null, 
                    "–í–∞—à–∞ –∏–¥–µ—è –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ —á–µ—Ç—ã—Ä–µ–º –∫–ª—é—á–µ–≤—ã–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º:"),
                  
                  React.createElement("div", { className: "metric-explanation" },
                    React.createElement("h4", null, 
                      "üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é", 
                      React.createElement("span", { className: "metric-score" }, "50%+")
                    ),
                    React.createElement("p", null, 
                      "–ù–∞—Å–∫–æ–ª—å–∫–æ –≤–∞—à–∞ –∏–¥–µ—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é. –°—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑:"),
                    React.createElement("ul", { className: "list" },
                      React.createElement("li", null, "‚Ä¢ 50% - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–µ–π—Å–∞–º"),
                      React.createElement("li", null, "‚Ä¢ 30% - —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∞–º"),
                      React.createElement("li", null, "‚Ä¢ 20% - —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∑–∞–∫–∞–∑—á–∏–∫—É")
                    )
                  ),
        
                  React.createElement("div", { className: "metric-explanation" },
                    React.createElement("h4", null, 
                      "üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é", 
                      React.createElement("span", { className: "metric-score" }, "40%+")
                    ),
                    React.createElement("p", null, 
                      "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ—Å—Ç—å:"),
                    React.createElement("ul", { className: "list" },
                      React.createElement("li", null, "‚Ä¢ –ü–ª–æ—â–∞–¥–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"),
                      React.createElement("li", null, "‚Ä¢ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö"),
                      React.createElement("li", null, "‚Ä¢ –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"),
                      React.createElement("li", null, "‚Ä¢ –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è")
                    )
                  ),
        
                  React.createElement("div", { className: "metric-explanation" },
                    React.createElement("h4", null, 
                      "üí° –ü—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ –∏–¥–µ–∏", 
                      React.createElement("span", { className: "metric-score" }, "50%+")
                    ),
                    React.createElement("p", null, 
                      "–ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ –∏–¥–µ–∏. –°–æ—Å—Ç–æ–∏—Ç –∏–∑:"),
                    React.createElement("ul", { className: "list" },
                      React.createElement("li", null, "‚Ä¢ 50% - –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π"),
                      React.createElement("li", null, "‚Ä¢ 30% - —è–¥—Ä–æ –ø–∏–ª–æ—Ç–∞"),
                      React.createElement("li", null, "‚Ä¢ 20% - –ø–æ–ª–Ω–æ—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è")
                    )
                  ),
        
                  React.createElement("div", { className: "metric-explanation" },
                    React.createElement("h4", null, 
                      "üèó –ü—Ä–æ–¥—É–∫—Ç", 
                      React.createElement("span", { className: "metric-score" }, "100%")
                    ),
                    React.createElement("p", null, 
                      "–ü–æ–ª–Ω–æ—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:"),
                    React.createElement("ul", { className: "list" },
                      React.createElement("li", null, "‚Ä¢ –ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞"),
                      React.createElement("li", null, "‚Ä¢ –¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞"),
                      React.createElement("li", null, "‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ"),
                      React.createElement("li", null, "‚Ä¢ –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å")
                    )
                  )
                ),
        
                React.createElement("div", { className: "instruction-section" },
                  React.createElement("h3", null, "üéÆ –ö–∞–∫ –Ω–∞—á–∞—Ç—å?"),
                  React.createElement("ol", { className: "list" },
                    React.createElement("li", null, 
                      React.createElement("strong", null, "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É ¬´–ü—Ä–æ–µ–∫—Ç—ã¬ª")),
                    React.createElement("li", null, 
                      React.createElement("strong", null, "–ù–∞–∂–º–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª")),
                    React.createElement("li", null, 
                      React.createElement("strong", null, "–ü—Ä–æ–π–¥–∏—Ç–µ 4 —à–∞–≥–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏")),
                    React.createElement("li", null, 
                      React.createElement("strong", null, "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Fit-Check –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞")),
                    React.createElement("li", null, 
                      React.createElement("strong", null, "–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã"))
                  )
                ),
        
                React.createElement("div", { className: "instruction-section" },
                  React.createElement("h3", null, "üíé –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞"),
                  React.createElement("p", null, 
                    "–•–æ—Ä–æ—à–∞—è –∏–¥–µ—è –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç:"),
                  React.createElement("ul", { className: "list" },
                    React.createElement("li", null, "‚Ä¢ Fit ‚â• 50% - —Ä–µ—à–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã"),
                    React.createElement("li", null, "‚Ä¢ Pilot ‚â• 40% - –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å"),
                    React.createElement("li", null, "‚Ä¢ Idea ‚â• 50% - —Ö–æ—Ä–æ—à–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–∞"),
                    React.createElement("li", null, "‚Ä¢ Product = 100% - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ")
                  )
                )
              ),
              React.createElement("div", { className: "instruction-footer" },
                React.createElement("div", { className: "small" },
                  "üí° –≠—Ç—É –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –º–æ–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É ¬´–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é¬ª"
                ),
                React.createElement("button", {
                  className: "btn primary",
                  onClick: onClose
                }, "–ü–æ–Ω—è—Ç–Ω–æ, –Ω–∞—á–∞—Ç—å!")
              )
            )
          );
        }
        
        /* ====================== –ú–û–î–£–õ–¨ –û–ë–õ–ê–ß–ù–û–ì–û –•–†–ê–ù–ò–õ–ò–©–ê –° API GATEWAY ====================== */
        const CloudStorage = {
            baseURL: "https://d5dj84fvqbntrqp4bgf7.y1haggxy.apigw.yandexcloud.net",
            
            async loadAllData() {
                try {
                    console.log("üåê –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–ª–∞–∫–∞...");
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
                    const projectsResponse = await fetch(`${this.baseURL}/projects`);
                    if (!projectsResponse.ok) {
                        throw new Error(`Projects: ${projectsResponse.status}`);
                    }
                    const projects = await projectsResponse.json();
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                    const directionsResponse = await fetch(`${this.baseURL}/directions`);
                    const directions = directionsResponse.ok ? await directionsResponse.json() : [];
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã –§–æ–Ω–¥–∞
                    const ftimResponse = await fetch(`${this.baseURL}/ftim-projects`);
                    const ftimProjects = ftimResponse.ok ? await ftimResponse.json() : [];
                    
                    console.log("‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:", {
                        projects: projects.length,
                        directions: directions.length,
                        ftimProjects: ftimProjects.length
                    });
                    
                    return { projects, directions, ftimProjects };
                    
                } catch (error) {
                    console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –æ–±–ª–∞–∫–∞:", error);
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
                    return {
                        projects: [],
                        directions: [],
                        ftimProjects: []
                    };
                }
            },
        
            async saveProjects(projects) {
                try {
                    console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–µ–∫—Ç—ã –≤ –æ–±–ª–∞–∫–æ...");
                    const response = await fetch(`${this.baseURL}/projects`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(projects)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    console.log("‚úÖ –ü—Ä–æ–µ–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –æ–±–ª–∞–∫–æ");
                    return true;
                    
                } catch (error) {
                    console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤:", error);
                    return false;
                }
            },
        
            async saveDirections(directions) {
                try {
                    console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –æ–±–ª–∞–∫–æ...");
                    const response = await fetch(`${this.baseURL}/directions`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(directions)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    console.log("‚úÖ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –æ–±–ª–∞–∫–æ");
                    return true;
                    
                } catch (error) {
                    console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:", error);
                    return false;
                }
            },
        
            async saveFTIMProjects(ftimProjects) {
                try {
                    console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–µ–∫—Ç—ã –§–æ–Ω–¥–∞ –≤ –æ–±–ª–∞–∫–æ...");
                    const response = await fetch(`${this.baseURL}/ftim-projects`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(ftimProjects)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    console.log("‚úÖ –ü—Ä–æ–µ–∫—Ç—ã –§–æ–Ω–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –æ–±–ª–∞–∫–æ");
                    return true;
                    
                } catch (error) {
                    console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –§–æ–Ω–¥–∞:", error);
                    return false;
                }
            }
        };

        /* ====================== –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï –í –û–ë–õ–ê–ö–û ====================== */
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        const originalSaveProjects = window.saveProjects;
        window.saveProjects = function(projects) {
            console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–µ–∫—Ç—ã (–ª–æ–∫–∞–ª—å–Ω–æ + –æ–±–ª–∞–∫–æ)...");
            // ‚úÖ –ì–ê–†–ê–ù–¢–ò–†–£–ï–ú, —á—Ç–æ projects - –º–∞—Å—Å–∏–≤
            if (!Array.isArray(projects)) {
                console.error("‚ùå projects –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤:", projects);
                projects = [];
            }
            originalSaveProjects(projects); // –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            CloudStorage.saveProjects(projects); // –æ–±–ª–∞—á–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        };

        const originalSaveDirections = window.saveDirections;
        window.saveDirections = function(directions) {
            console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ª–æ–∫–∞–ª—å–Ω–æ + –æ–±–ª–∞–∫–æ)...");
            originalSaveDirections(directions);
            CloudStorage.saveDirections(directions);
        };

        const originalSaveFTIMProjects = window.saveFTIMProjects;
        window.saveFTIMProjects = function(ftimProjects) {
            console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–µ–∫—Ç—ã –§–æ–Ω–¥–∞ (–ª–æ–∫–∞–ª—å–Ω–æ + –æ–±–ª–∞–∫–æ)...");
            originalSaveFTIMProjects(ftimProjects);
            CloudStorage.saveFTIMProjects(ftimProjects);
        };

        /* ====================== –û–ë–ù–û–í–õ–Ø–ï–ú –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–ú–ü–û–ù–ï–ù–¢ ====================== */
        const OriginalDashboard = DirectionsDashboardFixed;
        
        function DirectionsDashboardFixedWithCloud() {
            console.log("üîÑ DirectionsDashboardFixedWithCloud mounted");
    
            // ‚õîÔ∏è –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –í–°–ï –í–û–ó–ú–û–ñ–ù–´–ï –ò–ù–¢–ï–†–í–ê–õ–´ –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï
            useEffect(() => {
                // –ü–æ–ª—É—á–∞–µ–º ID –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
                const intervalIds = Object.keys(window).filter(key => 
                    key.startsWith('interval') || 
                    key.includes('Interval') ||
                    key.includes('timeout')
                );
                
                console.log("üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:", intervalIds);
                
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –í–°–ï –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
                let highestIntervalId = setInterval(() => {}, 0);
                for (let i = 1; i < highestIntervalId; i++) {
                    clearInterval(i);
                }
                
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –í–°–ï —Ç–∞–π–º–∞—É—Ç—ã
                let highestTimeoutId = setTimeout(() => {}, 0);
                for (let i = 1; i < highestTimeoutId; i++) {
                    clearTimeout(i);
                }
                
                return () => {
                    // –ü—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–æ–∂–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
                    for (let i = 1; i < highestIntervalId; i++) {
                        clearInterval(i);
                    }
                    for (let i = 1; i < highestTimeoutId; i++) {
                        clearTimeout(i);
                    }
                };
            }, []);
            const [cloudData, setCloudData] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [error, setError] = useState(null);
        
            // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            const loadCloudData = async (showNotification = false) => {
                if (showNotification) {
                    console.log("üîÑ –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–±–ª–∞–∫–∞...");
                }
                
                setIsLoading(true);
                setError(null);
                try {
                    console.log("üåê –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–ª–∞–∫–∞...");
                    
                    const cloudData = await CloudStorage.loadAllData();
                    
                    setCloudData(cloudData);
                    
                    if (showNotification) {
                        console.log("‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ –æ–±–ª–∞–∫–∞");
                    }
                    
                } catch (err) {
                    console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –æ–±–ª–∞–∫–∞:", err);
                    setError(err.message);
                    
                    if (showNotification) {
                        alert("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–ª–∞–∫–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.");
                    }
                    
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ fallback
                    setCloudData({
                        projects: loadProjects(),
                        directions: loadDirections(),
                        ftimProjects: loadFTIMProjects()
                    });
                } finally {
                    setIsLoading(false);
                }
            };
        
            // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
            const saveProjectToCloud = async (project) => {
                try {
                    console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤ –æ–±–ª–∞–∫–æ...", project);
                    
                    // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è API
                    const projectToSave = {
                        id: project.id,
                        title: project.title || "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",
                        teamName: project.teamName || "",
                        customer: project.customer || "",
                        directionName: project.directionName || "",
                        shortDescription: project.shortDescription || "",
                        status: project.status || "—á–µ—Ä–Ω–æ–≤–∏–∫",
                        selectedOpenCase: project.selectedOpenCase || "",
                        createdAt: new Date().toISOString()
                    };
                    
                    const response = await fetch("https://d5dj84fvqbntrqp4bgf7.y1haggxy.apigw.yandexcloud.net/projects", {
                        method: 'PUT',
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(projectToSave)
                    });
                    
                    console.log("üì§ –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:", response.status, response.statusText);
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`HTTP ${response.status}: ${errorText}`);
                    }
                    
                    const result = await response.json();
                    console.log("‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –æ–±–ª–∞–∫–æ:", result);
                    return true;
                    
                } catch (err) {
                    console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ –æ–±–ª–∞–∫–æ:", err);
                    // –ù–ï –í–´–ö–ò–î–´–í–ê–ï–ú –û–®–ò–ë–ö–£, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å UI
                    return false;
                }
            };
        
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
            useEffect(() => {
                // ‚úÖ –°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º API, –ø–æ—Ç–æ–º –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                const initializeData = async () => {
                    console.log("üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...");
                    
                    console.log("üöÄ –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–ª–∞–∫–∞...");
                    await loadCloudData();
                };
                
                initializeData();
            }, []);
        
            // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
            useEffect(() => {
                const originalSaveProjects = window.saveProjects;
                window.saveProjects = function(projects) {
                    console.log("üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–µ–∫—Ç—ã...");
                    
                    // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                    originalSaveProjects(projects);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –≤ –æ–±–ª–∞–∫–æ
                    projects.forEach(project => {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–æ–≤—ã–π –ª–∏ —ç—Ç–æ –ø—Ä–æ–µ–∫—Ç (–Ω–µ—Ç id –≤ –æ–±–ª–∞—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
                        if (cloudData && !cloudData.projects.find(p => p.id === project.id)) {
                            saveProjectToCloud(project);
                        }
                    });
                };
                
                return () => {
                    window.saveProjects = originalSaveProjects;
                };
            }, [cloudData]);
        
            if (isLoading) {
                return React.createElement("div", { 
                    style: { 
                        padding: "20px", 
                        textAlign: "center",
                        background: "var(--bg)",
                        height: "100vh",
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "center",
                        flexDirection: "column",
                        gap: "16px"
                    } 
                }, 
                    React.createElement("div", { style: { fontSize: "24px" } }, "üîÑ"),
                    React.createElement("div", { style: { fontWeight: "600" } }, "–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ..."),
                    React.createElement("div", { className: "small" }, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ")
                );
            }
        
            return React.createElement(DirectionsDashboardFixed, { 
                cloudData,
                onDataRefresh: () => loadCloudData(true)
            });
            
        }
        
        // ====================== –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ======================
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(DirectionsDashboardFixedWithCloud));
        /* ====================== –£–õ–£–ß–®–ï–ù–ù–´–ô FIT-CHECK ====================== */

        // –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ Fit Score —Å —É—á–µ—Ç–æ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
        function calculateDetailedFitAnalysis(project, direction) {
          // –†–∞—Å—á–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–µ–π—Å–∞–º —Å –±–æ–Ω—É—Å–æ–º –∑–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å
          let caseAlignmentScore;
          let caseAlignmentDescription;
          
          if (project.selectedOpenCase === "ORIGINAL") {
            caseAlignmentScore = 0.8; // 80% –∑–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å = 32 –±–∞–ª–ª–∞
            caseAlignmentDescription = "üí° –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è (–±–æ–Ω—É—Å –∑–∞ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å)";
          } else if (project.selectedOpenCase && direction.openCases?.includes(project.selectedOpenCase)) {
            caseAlignmentScore = 1.0; // 100% –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞ = 40 –±–∞–ª–ª–æ–≤
            caseAlignmentDescription = `üéØ –†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞: "${project.selectedOpenCase}"`;
          } else {
            caseAlignmentScore = openCasesMatchRatio(
              project.title || "",
              project.shortDescription || "",
              direction.openCases || []
            );
            caseAlignmentDescription = caseAlignmentScore > 0.6 
              ? "‚úÖ –•–æ—Ä–æ—à–µ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–µ–π—Å–∞–º –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é" 
              : "‚ö†Ô∏è –°–ª–∞–±–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–µ–π—Å–∞–º";
          }
        
          // –†–∞—Å—á–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
          const effRecommended = direction.recommendedEffects || [];
          const effMatch = effRecommended.length > 0
            ? intersectCount(project.effectTags || [], effRecommended) / effRecommended.length
            : 0;
        
          // –†–∞—Å—á–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∑–∞–∫–∞–∑—á–∏–∫—É
          const custMatch = direction.customersRecommended?.includes(project.customer || "") ? 1 : 0;
        
          const totalScore = Math.round(caseAlignmentScore * 40 + effMatch * 30 + custMatch * 30);
        
          return {
            total: {
              score: totalScore,
              max: 100,
              status: totalScore >= 50 ? "passed" : totalScore >= 30 ? "medium" : "low"
            },
            caseAlignment: {
              score: Math.round(caseAlignmentScore * 40),
              max: 40,
              value: caseAlignmentScore,
              description: caseAlignmentDescription,
              isOriginal: project.selectedOpenCase === "ORIGINAL"
            },
            effects: {
              score: Math.round(effMatch * 30),
              max: 30,
              value: effMatch,
              matched: project.effectTags?.filter(tag => effRecommended.includes(tag)).length || 0,
              totalRecommended: effRecommended.length,
              description: effRecommended.length > 0 
                ? `–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: ${Math.round(effMatch * 100)}% —Å —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏`
                : "–ù–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤"
            },
            customer: {
              score: Math.round(custMatch * 30),
              max: 30,
              value: custMatch,
              isRecommended: custMatch === 1,
              description: custMatch === 1 
                ? "‚úÖ –ó–∞–∫–∞–∑—á–∏–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é"
                : "‚ö†Ô∏è –ó–∞–∫–∞–∑—á–∏–∫ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º"
            }
          };
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–º–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å —É—á–µ—Ç–æ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
        // –£–ª—É—á—à–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        function generateEnhancedRecommendations(project, direction, analysis) {
          const recommendations = [];
        
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
          if (!project.title || project.title.trim().length < 3) {
            recommendations.push({
              priority: 'high',
              text: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏ (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)',
              action: '–ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ'
            });
          }
        
          if (!project.teamName || project.teamName.trim().length === 0) {
            recommendations.push({
              priority: 'high',
              text: '–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã',
              action: '–ó–∞–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É'
            });
          }
        
          if (!project.shortDescription || project.shortDescription.trim().length < 10) {
            recommendations.push({
              priority: 'high',
              text: '–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)',
              action: '–ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ'
            });
          }
        
          if (!project.directionName) {
            recommendations.push({
              priority: 'high',
              text: '–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞',
              action: '–í—ã–±—Ä–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ'
            });
          }
        
          if (!project.customer) {
            recommendations.push({
              priority: 'high',
              text: '–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑—á–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞',
              action: '–í—ã–±—Ä–∞—Ç—å –∑–∞–∫–∞–∑—á–∏–∫–∞'
            });
          }
        
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞
          if (project.customer && !direction.customersRecommended?.includes(project.customer)) {
            recommendations.push({
              priority: 'medium',
              text: `–ó–∞–∫–∞–∑—á–∏–∫ "${project.customer}" –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è "${direction.name}". –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ: ${direction.customersRecommended?.join(', ') || '–Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π'}`,
              action: '–°–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑—á–∏–∫–∞'
            });
          }
        
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–µ–π—Å–∞
          if (!project.selectedOpenCase) {
            recommendations.push({
              priority: 'medium',
              text: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–µ–π—Å –∏–ª–∏ –æ—Ç–º–µ—Ç—å—Ç–µ –∏–¥–µ—é –∫–∞–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é',
              action: '–í—ã–±—Ä–∞—Ç—å –∫–µ–π—Å'
            });
          }
        
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
          if (!project.effectTags || project.effectTags.length === 0) {
            recommendations.push({
              priority: 'medium',
              text: `–î–æ–±–∞–≤—å—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ: ${direction.recommendedEffects?.join(', ') || '–Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π'}`,
              action: '–î–æ–±–∞–≤–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã'
            });
          }
        
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
          if (!project.problemStatement || project.problemStatement.trim().length < 10) {
            recommendations.push({
              priority: 'medium',
              text: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∏',
              action: '–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫—É'
            });
          }
        
          if (!project.targetAudience || project.targetAudience.trim().length < 5) {
            recommendations.push({
              priority: 'medium',
              text: '–û–ø–∏—à–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞',
              action: '–ó–∞–ø–æ–ª–Ω–∏—Ç—å –¶–ê'
            });
          }
        
          if (!project.productType) {
            recommendations.push({
              priority: 'medium',
              text: '–£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞',
              action: '–í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞'
            });
          }
        
          if (!project.businessModel) {
            recommendations.push({
              priority: 'medium',
              text: '–í—ã–±–µ—Ä–∏—Ç–µ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å',
              action: '–í—ã–±—Ä–∞—Ç—å –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å'
            });
          }
        
          if (!project.productDescription || project.productDescription.trim().length < 10) {
            recommendations.push({
              priority: 'medium',
              text: '–û–ø–∏—à–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ (–ø—Ä–æ–¥—É–∫—Ç)',
              action: '–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ'
            });
          }
        
          // –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–∞–ª–ª–∞–º
          if (analysis.total.score < 50) {
            recommendations.push({
              priority: 'high',
              text: '–ò–¥–µ—è –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (50%). –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö –≤—ã—à–µ.',
              action: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'
            });
          } else if (analysis.total.score < 70) {
            recommendations.push({
              priority: 'medium',
              text: '–•–æ—Ä–æ—à–∏–π —Å—Ç–∞—Ä—Ç! –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –æ—Ü–µ–Ω–∫—É, —Å–ª–µ–¥—É—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –≤—ã—à–µ.',
              action: '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å'
            });
          }
        
          return recommendations;
        }
        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ Fit-Check
        function EnhancedFitCheck({ project, directions, onEdit }) {
          const dir = directions.find(d => d.name === project.directionName);
          
          if (!dir) {
            return React.createElement("div", { className: "fit-check-error" },
              "‚ùå –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞."
            );
          }
        
          // –í—ã—á–∏—Å–ª—è–µ–º –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏
          const analysis = calculateDetailedFitAnalysis(project, dir);
          const productCompleteness = computeProductCompleteness(project);
          const pilotReadiness = computePilotReadiness(project);
          const ideaAdequacy = computeIdeaAdequacy(project, dir);
          
          // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–ª—É—á—à–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
          const recommendations = generateEnhancedRecommendations(project, dir, analysis);
        
          return React.createElement("div", { className: "enhanced-fit-check" },
            
            // –®–∞–ø–∫–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Å–∞–º–º–∞—Ä–∏
            React.createElement("div", { className: "fit-header" },
              React.createElement("h2", null, "üéØ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–¥–µ–∏"),
              React.createElement("div", { className: "project-summary-expanded" },
                React.createElement("div", { className: "summary-section" },
                  React.createElement("h4", null, "üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"),
                  React.createElement("div", { className: "summary-grid" },
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–ù–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏"),
                      React.createElement("div", { className: "summary-value" }, project.title || "‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ")
                    ),
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–ö–æ–º–∞–Ω–¥–∞"),
                      React.createElement("div", { className: "summary-value" }, project.teamName || "‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ")
                    ),
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"),
                      React.createElement("div", { className: "summary-value" }, project.directionName || "‚ùå –ù–µ –≤—ã–±—Ä–∞–Ω–æ")
                    ),
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–ó–∞–∫–∞–∑—á–∏–∫"),
                      React.createElement("div", { className: "summary-value" }, 
                        project.customer 
                          ? (dir.customersRecommended?.includes(project.customer) 
                              ? `‚úÖ ${project.customer}` 
                              : `‚ö†Ô∏è ${project.customer} (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω)`)
                          : "‚ùå –ù–µ –≤—ã–±—Ä–∞–Ω"
                      )
                    )
                  )
                ),
        
                React.createElement("div", { className: "summary-section" },
                  React.createElement("h4", null, "üéØ –°—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞"),
                  React.createElement("div", { className: "summary-item full-width" },
                    React.createElement("div", { className: "summary-label" }, "–û–ø–∏—Å–∞–Ω–∏–µ"),
                    React.createElement("div", { className: "summary-value" }, 
                      project.shortDescription 
                        ? (project.shortDescription.length > 150 
                            ? project.shortDescription.substring(0, 150) + "..." 
                            : project.shortDescription)
                        : "‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ"
                    )
                  ),
                  React.createElement("div", { className: "summary-grid" },
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è"),
                      React.createElement("div", { className: "summary-value" }, 
                        project.targetAudience && project.targetAudience.trim() 
                          ? "‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–æ" 
                          : "‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ"
                      )
                    ),
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–ü—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–∞"),
                      React.createElement("div", { className: "summary-value" }, 
                        project.problemStatement && project.problemStatement.trim()
                          ? "‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–æ"
                          : "‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ"
                      )
                    )
                  )
                ),
        
                React.createElement("div", { className: "summary-section" },
                  React.createElement("h4", null, "üíº –ü—Ä–æ–¥—É–∫—Ç –∏ –±–∏–∑–Ω–µ—Å"),
                  React.createElement("div", { className: "summary-grid" },
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞"),
                      React.createElement("div", { className: "summary-value" }, 
                        project.productType || "‚ùå –ù–µ —É–∫–∞–∑–∞–Ω"
                      )
                    ),
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å"),
                      React.createElement("div", { className: "summary-value" }, 
                        project.businessModel || "‚ùå –ù–µ –≤—ã–±—Ä–∞–Ω–∞"
                      )
                    ),
                    React.createElement("div", { className: "summary-item" },
                      React.createElement("div", { className: "summary-label" }, "–†–µ—à–µ–Ω–∏–µ"),
                      React.createElement("div", { className: "summary-value" }, 
                        project.productDescription && project.productDescription.trim()
                          ? "‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–æ"
                          : "‚ùå –ù–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ"
                      )
                    )
                  )
                )
              )
            ),
        
            // –ë–ª–æ–∫ –æ–±—â–µ–π –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ—Å—Ç–∏
            React.createElement("div", { className: "progress-overview" },
              React.createElement("h3", null, "üìä –û–±—â–∞—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ—Å—Ç—å –∏–¥–µ–∏"),
              React.createElement("div", { className: "progress-cards" },
                React.createElement("div", { className: "progress-card" },
                  React.createElement("div", { className: "progress-title" }, "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é"),
                  React.createElement("div", { className: "progress-score" }, analysis.total.score + "%"),
                  React.createElement("div", { className: "progress-bar" },
                    React.createElement("div", { 
                      className: "progress-fill", 
                      style: { width: analysis.total.score + "%" } 
                    })
                  ),
                  React.createElement("div", { className: "progress-status" },
                    analysis.total.score >= 50 ? "‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ—Ä–æ–≥" : "‚ùå –ù–∏–∂–µ –ø–æ—Ä–æ–≥–∞"
                  )
                ),
                React.createElement("div", { className: "progress-card" },
                  React.createElement("div", { className: "progress-title" }, "–ü—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ –∏–¥–µ–∏"),
                  React.createElement("div", { className: "progress-score" }, ideaAdequacy + "%"),
                  React.createElement("div", { className: "progress-bar" },
                    React.createElement("div", { 
                      className: "progress-fill", 
                      style: { width: ideaAdequacy + "%" } 
                    })
                  ),
                  React.createElement("div", { className: "progress-status" },
                    ideaAdequacy >= 50 ? "‚úÖ –•–æ—Ä–æ—à–æ" : "‚ö†Ô∏è –ù—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å"
                  )
                ),
                React.createElement("div", { className: "progress-card" },
                  React.createElement("div", { className: "progress-title" }, "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–∏–ª–æ—Ç–∞"),
                  React.createElement("div", { className: "progress-score" }, pilotReadiness + "%"),
                  React.createElement("div", { className: "progress-bar" },
                    React.createElement("div", { 
                      className: "progress-fill", 
                      style: { width: pilotReadiness + "%" } 
                    })
                  ),
                  React.createElement("div", { className: "progress-status" },
                    pilotReadiness >= 40 ? "‚úÖ –ì–æ—Ç–æ–≤" : "‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å"
                  )
                )
              )
            ),
        
            // –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è Fit Score
            React.createElement("div", { className: "breakdown-section" },
              React.createElement("h3", null, "üéØ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é"),
              
              React.createElement("div", { className: "metric-component" },
                React.createElement("div", { className: "metric-header" },
                  React.createElement("div", { className: "metric-title" },
                    React.createElement("span", null, "üìù –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–µ–π—Å–∞–º"),
                    React.createElement("span", { 
                      className: `metric-score ${analysis.caseAlignment.score >= 24 ? 'good' : analysis.caseAlignment.score >= 16 ? 'medium' : 'poor'}` 
                    }, analysis.caseAlignment.score + "/40")
                  )
                ),
                React.createElement("div", { className: "metric-bar" },
                  React.createElement("div", { 
                    className: "metric-progress",
                    style: { width: `${(analysis.caseAlignment.score / 40) * 100}%` }
                  })
                ),
                React.createElement("div", { className: "metric-description" },
                  project.selectedOpenCase === "ORIGINAL" 
                    ? "üí° –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è (–±–æ–Ω—É—Å –∑–∞ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å)"
                    : project.selectedOpenCase 
                    ? `üéØ –†–µ—à–µ–Ω–∏–µ –∫–µ–π—Å–∞: "${project.selectedOpenCase}"`
                    : "‚ùå –ö–µ–π—Å –Ω–µ –≤—ã–±—Ä–∞–Ω"
                )
              ),
        
              React.createElement("div", { className: "metric-component" },
                React.createElement("div", { className: "metric-header" },
                  React.createElement("div", { className: "metric-title" },
                    React.createElement("span", null, "üìà –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤"),
                    React.createElement("span", { 
                      className: `metric-score ${analysis.effects.score >= 21 ? 'good' : analysis.effects.score >= 15 ? 'medium' : 'poor'}` 
                    }, analysis.effects.score + "/30")
                  )
                ),
                React.createElement("div", { className: "metric-bar" },
                  React.createElement("div", { 
                    className: "metric-progress",
                    style: { width: `${(analysis.effects.score / 30) * 100}%` }
                  })
                ),
                React.createElement("div", { className: "metric-description" },
                  `–í—ã–±—Ä–∞–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤: ${project.effectTags?.length || 0} –∏–∑ ${dir.recommendedEffects?.length || 0} —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö`
                ),
                project.effectTags?.length > 0 && React.createElement("div", { className: "metric-tags" },
                  project.effectTags.map(effect => 
                    React.createElement("span", { 
                      key: effect, 
                      className: `tag ${dir.recommendedEffects?.includes(effect) ? 'matched' : 'custom'}` 
                    }, effect)
                  )
                )
              ),
        
              React.createElement("div", { className: "metric-component" },
                React.createElement("div", { className: "metric-header" },
                  React.createElement("div", { className: "metric-title" },
                    React.createElement("span", null, "üè¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–∞–∑—á–∏–∫—É"),
                    React.createElement("span", { 
                      className: `metric-score ${analysis.customer.score >= 21 ? 'good' : analysis.customer.score >= 15 ? 'medium' : 'poor'}` 
                    }, analysis.customer.score + "/30")
                  )
                ),
                React.createElement("div", { className: "metric-bar" },
                  React.createElement("div", { 
                    className: "metric-progress",
                    style: { width: `${(analysis.customer.score / 30) * 100}%` }
                  })
                ),
                React.createElement("div", { className: "metric-description" },
                  project.customer && dir.customersRecommended?.includes(project.customer)
                    ? `‚úÖ –ó–∞–∫–∞–∑—á–∏–∫ "${project.customer}" —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é`
                    : project.customer
                    ? `‚ö†Ô∏è –ó–∞–∫–∞–∑—á–∏–∫ "${project.customer}" –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ: ${dir.customersRecommended?.join(', ') || '–Ω–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π'}`
                    : "‚ùå –ó–∞–∫–∞–∑—á–∏–∫ –Ω–µ –≤—ã–±—Ä–∞–Ω"
                )
              )
            ),
        
            // –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            React.createElement("div", { className: "recommendations-section" },
              React.createElement("h3", null, "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é"),
              React.createElement("div", { className: "recommendations-list" },
                recommendations.map((rec, index) => 
                  React.createElement("div", { 
                    key: index, 
                    className: `recommendation ${rec.priority}` 
                  },
                    React.createElement("div", { className: "rec-icon" }, 
                      rec.priority === 'high' ? 'üö®' : '‚ö†Ô∏è'
                    ),
                    React.createElement("div", { className: "rec-content" },
                      React.createElement("div", { className: "rec-text" }, rec.text),
                      rec.action && React.createElement("button", {
                        className: "rec-action",
                        onClick: () => onEdit && onEdit()
                      }, rec.action)
                    )
                  )
                )
              )
            ),
        
            // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            React.createElement("div", { className: "fit-actions" },
              React.createElement("button", {
                className: "btn secondary",
                onClick: () => onEdit && onEdit()
              }, "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ—é"),
              React.createElement("button", {
                className: "btn primary",
                onClick: () => window.print()
              }, "üñ®Ô∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç")
            )
          );
        }
    </script>
</body>
</html>
